<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Baatar Shipping â€” Moving Trade Forward</title>
  <meta name="description" content="Baatar Shipping â€” Mongolia â†” China â†” Global logistics coordination. Fast response, clear communication, trusted partners."/>

  <style>
    :root{
      --navy:#0b1c2d;
      --navy2:#133457;
      --gold:#c89b3c;
      --steel:#4a6fa5;

      --pink:#ff4fd8;
      --mint:#47e6b1;
      --bg:#f1f6ff;

      --card:#ffffff;
      --text:#0b1c2d;
      --muted:#5a6676;
      --line:rgba(11,28,45,.10);

      --shadow:0 18px 45px rgba(11,28,45,.12);
      --shadow2:0 30px 90px rgba(11,28,45,.22);

      --r:22px;
      --max:1120px;
    }

    /* DARK MODE VARIABLES */
    [data-theme="dark"]{
      --bg:#070b12;
      --card: rgba(255,255,255,.06);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.62);
      --line: rgba(255,255,255,.14);
      --shadow:0 18px 55px rgba(0,0,0,.55);
      --shadow2:0 36px 110px rgba(0,0,0,.70);
    }

    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--text);

      /* AURORA BACKGROUND */
      background:
        radial-gradient(1200px 650px at 8% -10%, rgba(255,79,216,.18), transparent 55%),
        radial-gradient(1100px 620px at 92% -5%, rgba(71,230,177,.16), transparent 52%),
        radial-gradient(1100px 600px at 10% -10%, rgba(200,155,60,.14), transparent 55%),
        radial-gradient(900px 520px at 95% 0%, rgba(74,111,165,.13), transparent 55%),
        var(--bg);
      transition: background .35s ease, color .25s ease;
    }

    a{color:inherit}
    .wrap{max-width:var(--max); margin:0 auto; padding:18px 18px 90px;}

    /* TOP */
    .top{
      position:sticky; top:0; z-index:60;
      backdrop-filter:saturate(160%) blur(12px);
      background: rgba(243,246,251,.70);
      border-bottom:1px solid rgba(11,28,45,.08);
      transition: background .25s ease, border-color .25s ease;
    }
    [data-theme="dark"] .top{
      background: rgba(7,11,18,.62);
      border-bottom:1px solid rgba(255,255,255,.10);
    }

    .topInner{
      max-width:var(--max); margin:0 auto; padding:14px 18px;
      display:flex; align-items:center; justify-content:space-between; gap:14px;
    }
    .brand{display:flex; flex-direction:column; gap:2px; line-height:1.05}
    .brand b{letter-spacing:.10em; font-size:12px; text-transform:uppercase}
    .brand span{font-size:12px; color:var(--muted)}

    .nav{
      display:flex; align-items:center; gap:10px; flex-wrap:wrap; justify-content:flex-end;
    }
    .nav a{
      text-decoration:none;
      font-size:13px;
      color:var(--muted);
      padding:8px 10px;
      border-radius:999px;
      border:1px solid transparent;
      transition:transform .18s ease, background .18s ease, border-color .18s ease;
    }
    .nav a:hover{
      background: rgba(255,255,255,.78);
      border-color: var(--line);
      transform: translateY(-1px);
    }
    [data-theme="dark"] .nav a:hover{
      background: rgba(255,255,255,.08);
    }

    .controls{display:flex; gap:8px; align-items:center; padding-left:4px;}

    .pillBtn{
      border:1px solid var(--line);
      background: rgba(255,255,255,.85);
      border-radius:999px;
      padding:7px 10px;
      font-size:12px;
      cursor:pointer;
      transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease, background .18s ease;
      color: var(--text);
    }
    [data-theme="dark"] .pillBtn{
      background: rgba(255,255,255,.08);
    }
    .pillBtn:hover{
      transform:translateY(-1px);
      box-shadow:0 10px 22px rgba(11,28,45,.10);
    }
    .pillBtn.active{
      border-color: rgba(200,155,60,.55);
      box-shadow:0 10px 22px rgba(200,155,60,.12);
    }

    /* HERO */
    .hero{
      margin-top:26px;
      border-radius:28px;
      border:1px solid var(--line);
      background:
        radial-gradient(950px 420px at 10% 0%, rgba(255,79,216,.16), transparent 55%),
        radial-gradient(900px 420px at 92% 15%, rgba(71,230,177,.14), transparent 55%),
        radial-gradient(900px 420px at 30% 0%, rgba(200,155,60,.16), transparent 55%),
        linear-gradient(180deg, rgba(255,255,255,.88) 0%, rgba(245,248,255,.84) 100%);
      box-shadow:var(--shadow);
      overflow:hidden;
      position:relative;
    }
    [data-theme="dark"] .hero{
      background:
        radial-gradient(950px 420px at 10% 0%, rgba(255,79,216,.16), transparent 55%),
        radial-gradient(900px 420px at 92% 15%, rgba(71,230,177,.14), transparent 55%),
        radial-gradient(900px 420px at 30% 0%, rgba(200,155,60,.14), transparent 55%),
        linear-gradient(180deg, rgba(255,255,255,.07) 0%, rgba(255,255,255,.04) 100%);
    }
    .heroGrid{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:22px;
      padding:44px 26px;
      align-items:center;
    }
    .kicker{
      display:inline-flex; align-items:center; gap:10px;
      font-size:12px; color:var(--muted);
      letter-spacing:.04em; text-transform:uppercase;
    }
    .kdot{
      width:10px; height:10px; border-radius:50%;
      background: linear-gradient(135deg, var(--steel), var(--gold));
      box-shadow:0 12px 26px rgba(200,155,60,.22);
    }
    h1{
      margin:10px 0 10px;
      font-size: clamp(36px, 4.2vw, 58px);
      letter-spacing:-.03em;
      line-height:1.02;
    }
    .lead{ margin:0; color:var(--muted); font-size:15px; max-width:62ch; }

    .chips{display:flex; flex-wrap:wrap; gap:10px; margin-top:18px}
    .chip{
      font-size:12px;
      padding:8px 12px;
      border-radius:999px;
      background: rgba(11,28,45,.06);
      border:1px solid var(--line);
      transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease, background .18s ease;
      cursor:default;
    }
    [data-theme="dark"] .chip{ background: rgba(255,255,255,.06); }
    .chip:hover{
      transform:translateY(-2px);
      box-shadow:0 14px 35px rgba(11,28,45,.12);
      border-color:rgba(200,155,60,.35);
    }

    .heroCtas{display:flex; flex-wrap:wrap; gap:10px; margin-top:18px}
    .btn{
      display:inline-flex; align-items:center; justify-content:center;
      padding:12px 16px;
      border-radius:999px;
      text-decoration:none;
      font-weight:650;
      font-size:13px;
      border:1px solid var(--line);
      transition:transform .18s ease, box-shadow .18s ease, filter .18s ease;
      position:relative;
      overflow:hidden;
      will-change: transform;
      color: var(--text);
      background: rgba(255,255,255,.85);
    }
    [data-theme="dark"] .btn{ background: rgba(255,255,255,.10); }
    .btn.primary{
      background: linear-gradient(135deg, var(--navy), var(--navy2));
      border-color:transparent;
      color:#fff;
    }
    .btn.primary:hover{ transform:translateY(-2px); box-shadow:0 18px 50px rgba(11,28,45,.20); filter:brightness(1.05) }
    .btn.ghost:hover{ transform:translateY(-2px); box-shadow:0 18px 50px rgba(11,28,45,.12) }

    /* Ripple on click */
    .btn::after{
      content:"";
      position:absolute;
      left: var(--rx, 50%);
      top: var(--ry, 50%);
      width: 0;
      height: 0;
      border-radius: 999px;
      transform: translate(-50%, -50%);
      background: rgba(255,255,255,.35);
      pointer-events:none;
    }
    .btn:active::after{
      width: 260px; height: 260px;
      transition: width .35s ease, height .35s ease;
    }

    .mini{ margin-top:10px; color:var(--muted); font-size:12.5px; }

    /* Right visual */
    .heroVisual{
      border-radius:26px;
      border:1px solid var(--line);
      background:
        radial-gradient(650px 280px at 15% 30%, rgba(255,79,216,.12), transparent 55%),
        radial-gradient(650px 280px at 85% 20%, rgba(71,230,177,.12), transparent 55%),
        radial-gradient(650px 280px at 55% 30%, rgba(200,155,60,.12), transparent 55%),
        linear-gradient(135deg, rgba(255,255,255,.92) 0%, rgba(243,246,251,.88) 100%);
      box-shadow:0 18px 55px rgba(11,28,45,.10);
      height:280px;
      position:relative;
      overflow:hidden;
    }
    [data-theme="dark"] .heroVisual{
      background:
        radial-gradient(650px 280px at 15% 30%, rgba(255,79,216,.14), transparent 55%),
        radial-gradient(650px 280px at 85% 20%, rgba(71,230,177,.14), transparent 55%),
        radial-gradient(650px 280px at 55% 30%, rgba(200,155,60,.12), transparent 55%),
        linear-gradient(135deg, rgba(255,255,255,.07) 0%, rgba(255,255,255,.05) 100%);
    }

    .routeSvg{position:absolute; inset:-10px; opacity:.95}
    .routeSvg .glow{ fill:none; stroke: rgba(200,155,60,.30); stroke-width: 5; filter: blur(1px); }
    .routeSvg .main{
      fill:none;
      stroke: url(#routeGrad);
      stroke-width: 2.8;
      stroke-dasharray: 7 10;
      animation: dash 8s linear infinite;
    }
    .routeSvg .dot{
      fill: var(--gold);
      filter: drop-shadow(0 14px 26px rgba(200,155,60,.45));
    }
    .routeSvg .dot1{ animation: dotMove 5.6s ease-in-out infinite; }
    .routeSvg .dot2{ animation: dotMove2 6.8s ease-in-out infinite; opacity:.85; }
    .routeSvg .pulse{
      fill: none;
      stroke: rgba(255,79,216,.35);
      stroke-width: 2;
      opacity: .8;
      animation: pulse 2.2s ease-out infinite;
    }
    @keyframes dash{ to{ stroke-dashoffset:-260; } }
    @keyframes dotMove{
      0%{ transform:translate(0,0); opacity:.85 }
      50%{ transform:translate(-18px,10px); opacity:1 }
      100%{ transform:translate(0,0); opacity:.85 }
    }
    @keyframes dotMove2{
      0%{ transform:translate(0,0); }
      50%{ transform:translate(26px,-18px); }
      100%{ transform:translate(0,0); }
    }
    @keyframes pulse{
      0%{ r:10; opacity:.9 }
      100%{ r:26; opacity:0 }
    }

    .badge{
      position:absolute; left:16px; bottom:16px;
      display:inline-flex; align-items:center; gap:10px;
      background: rgba(255,255,255,.72);
      border:1px solid var(--line);
      border-radius:999px;
      padding:10px 12px;
      font-size:12px;
      color:var(--muted);
      backdrop-filter: blur(10px);
    }
    [data-theme="dark"] .badge{ background: rgba(255,255,255,.08); }
    .badge .bDot{
      width:9px; height:9px; border-radius:50%;
      background: linear-gradient(135deg, var(--gold), var(--steel));
    }

    /* SECTIONS */
    .section{margin-top:34px}
    .sectionCard{
      border-radius:28px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.76);
      box-shadow:0 16px 44px rgba(11,28,45,.08);
      padding:24px;
      position:relative;
      overflow:hidden;
    }
    [data-theme="dark"] .sectionCard{
      background: rgba(255,255,255,.06);
    }
    .sectionCard::before{
      content:"";
      position:absolute; inset:-40px;
      background:
        radial-gradient(500px 220px at 0% 0%, rgba(255,79,216,.10), transparent 60%),
        radial-gradient(520px 240px at 100% 10%, rgba(71,230,177,.09), transparent 60%),
        radial-gradient(420px 240px at 50% 0%, rgba(200,155,60,.08), transparent 60%);
      opacity:.9;
      pointer-events:none;
    }
    .sectionCard > *{ position:relative; z-index:1; }

    .headRow{display:flex; align-items:flex-end; justify-content:space-between; gap:14px; flex-wrap:wrap;}
    .headRow h2{margin:0; font-size:20px; letter-spacing:-.01em}
    .sub{margin:6px 0 0; color:var(--muted); font-size:13px; max-width:70ch}

    /* Tabs */
    .tabs{ margin-top:16px; display:flex; gap:10px; flex-wrap:wrap; }
    .tab{
      border:1px solid var(--line);
      background: rgba(255,255,255,.85);
      border-radius:999px;
      padding:10px 12px;
      font-size:12px;
      cursor:pointer;
      transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease, background .18s ease;
      color: var(--text);
    }
    [data-theme="dark"] .tab{ background: rgba(255,255,255,.08); }
    .tab:hover{ transform:translateY(-2px); box-shadow:0 14px 30px rgba(11,28,45,.10) }
    .tab.active{ border-color:rgba(200,155,60,.55); box-shadow:0 14px 30px rgba(200,155,60,.12) }

    .tabPanels{margin-top:16px}
    .panel{
      display:none;
      border-radius:22px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.86);
      padding:18px;
    }
    [data-theme="dark"] .panel{ background: rgba(255,255,255,.06); }
    .panel.active{display:block}
    .panelGrid{ display:grid; grid-template-columns: 1fr 1fr; gap:14px; margin-top:12px; }

    /* Cards */
    .cards{
      margin-top:16px;
      display:grid;
      grid-template-columns: repeat(3, minmax(0,1fr));
      gap:14px;
    }
    .card{
      position:relative;
      border-radius:22px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.92);
      padding:16px;
      box-shadow:0 14px 34px rgba(11,28,45,.07);
      transition: transform .22s ease, box-shadow .22s ease, border-color .22s ease;
      overflow:hidden;
      transform-style: preserve-3d;
      will-change: transform;
    }
    [data-theme="dark"] .card{ background: rgba(255,255,255,.06); }
    .card::before{
      content:"";
      position:absolute; top:14px; left:14px;
      width:38px; height:6px;
      border-radius:999px;
      background: linear-gradient(90deg, var(--gold), var(--steel));
      opacity:.9;
    }
    .card:hover{
      transform: translateY(-10px);
      box-shadow: var(--shadow2);
      border-color: rgba(200,155,60,.35);
    }
    .card h3{margin:14px 0 6px; font-size:14px}
    .card p{margin:0; color:var(--muted); font-size:12.5px; line-height:1.45}
    .card .meta{margin-top:10px; display:flex; gap:8px; flex-wrap:wrap}

    .tag{
      font-size:11px;
      padding:7px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background: rgba(11,28,45,.04);
      color: var(--muted);
    }
    [data-theme="dark"] .tag{ background: rgba(255,255,255,.06); }

    .cardLink{ text-decoration:none; display:block; }

    /* Coverage */
    .coverageGrid{ margin-top:16px; display:grid; grid-template-columns: 1fr 1fr; gap:14px; }
    .covCard{
      border-radius:22px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.92);
      padding:16px;
      box-shadow:0 14px 34px rgba(11,28,45,.07);
    }
    [data-theme="dark"] .covCard{ background: rgba(255,255,255,.06); }
    .covTop{display:flex; align-items:center; justify-content:space-between; gap:10px}
    .covCard h3{margin:0; font-size:14px}
    .covChips{display:flex; gap:8px; flex-wrap:wrap; margin-top:12px}
    .covChip{
      cursor:pointer;
      user-select:none;
      font-size:12px;
      padding:9px 12px;
      border-radius:999px;
      border:1px solid var(--line);
      background: rgba(11,28,45,.04);
      transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease, background .18s ease;
      color: var(--text);
    }
    [data-theme="dark"] .covChip{ background: rgba(255,255,255,.06); }
    .covChip:hover{transform: translateY(-2px); box-shadow:0 14px 28px rgba(11,28,45,.10)}
    .covChip.active{
      background: rgba(200,155,60,.16);
      border-color: rgba(200,155,60,.50);
      box-shadow:0 16px 34px rgba(200,155,60,.12);
    }
    .covNote{ margin-top:12px; color: var(--muted); font-size:12.5px; min-height: 38px; }

    /* CONTACT BAND */
    .band{
      margin-top:18px;
      border-radius:26px;
      padding:18px;
      background: linear-gradient(135deg, var(--navy), var(--navy2));
      color:#fff;
      display:flex; align-items:center; justify-content:space-between; gap:14px; flex-wrap:wrap;
      box-shadow: var(--shadow);
    }
    [data-theme="dark"] .band{
      background: linear-gradient(135deg, rgba(255,79,216,.22), rgba(71,230,177,.18));
      border:1px solid rgba(255,255,255,.12);
    }

    footer{
      margin-top:28px;
      display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap;
      color:var(--muted);
      font-size:12px;
    }

    /* Reveal + Stagger */
    .reveal{ opacity:0; transform: translateY(16px); transition: opacity .7s ease, transform .7s ease; }
    .reveal.in{ opacity:1; transform: translateY(0); }
    .stagger > *{ opacity:0; transform: translateY(16px); transition: opacity .6s ease, transform .6s ease; }
    .reveal.in .stagger > *{ opacity:1; transform: translateY(0); }
    .reveal.in .stagger > *:nth-child(1){ transition-delay:.05s }
    .reveal.in .stagger > *:nth-child(2){ transition-delay:.14s }
    .reveal.in .stagger > *:nth-child(3){ transition-delay:.23s }
    .reveal.in .stagger > *:nth-child(4){ transition-delay:.32s }
    .reveal.in .stagger > *:nth-child(5){ transition-delay:.41s }
    .reveal.in .stagger > *:nth-child(6){ transition-delay:.50s }

    /* QUOTE DRAWER */
    .drawerOverlay{
      position:fixed; inset:0; z-index:200;
      background: rgba(0,0,0,.30);
      backdrop-filter: blur(8px);
      opacity:0;
      pointer-events:none;
      transition: opacity .25s ease;
    }
    .drawerOverlay.open{
      opacity:1;
      pointer-events:auto;
    }
    .drawer{
      position:fixed; top:0; right:0; height:100vh; width:min(460px, 92vw);
      z-index:210;
      transform: translateX(110%);
      transition: transform .35s cubic-bezier(.2,.9,.2,1);
      border-left:1px solid var(--line);
      background:
        radial-gradient(600px 300px at 10% 0%, rgba(255,79,216,.18), transparent 60%),
        radial-gradient(600px 300px at 90% 20%, rgba(71,230,177,.16), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.92) 0%, rgba(245,248,255,.88) 100%);
      color: var(--text);
      box-shadow: -30px 0 120px rgba(0,0,0,.25);
      padding:18px;
      display:flex;
      flex-direction:column;
      gap:14px;
    }
    [data-theme="dark"] .drawer{
      background:
        radial-gradient(600px 300px at 10% 0%, rgba(255,79,216,.18), transparent 60%),
        radial-gradient(600px 300px at 90% 20%, rgba(71,230,177,.16), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.08) 0%, rgba(255,255,255,.05) 100%);
    }
    .drawer.open{ transform: translateX(0); }

    .drawerTop{
      display:flex; align-items:flex-start; justify-content:space-between; gap:10px;
    }
    .drawerTop h3{ margin:0; font-size:16px; letter-spacing:-.01em; }
    .x{
      border:1px solid var(--line);
      background: rgba(255,255,255,.78);
      border-radius: 12px;
      padding:8px 10px;
      cursor:pointer;
      transition: transform .15s ease, box-shadow .15s ease, background .15s ease;
      color: var(--text);
    }
    [data-theme="dark"] .x{ background: rgba(255,255,255,.10); }
    .x:hover{ transform: translateY(-1px); box-shadow:0 14px 30px rgba(11,28,45,.12); }

    .drawerHint{ color: var(--muted); font-size:12.5px; margin-top:-6px; }

    .form{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    .form .full{ grid-column: 1 / -1; }
    label{ font-size:11px; color: var(--muted); display:block; margin:2px 0 6px; }
    input, select, textarea{
      width:100%;
      border:1px solid var(--line);
      background: rgba(255,255,255,.88);
      color: var(--text);
      border-radius: 14px;
      padding: 12px 12px;
      font-size:13px;
      outline:none;
      transition: box-shadow .18s ease, border-color .18s ease, background .18s ease;
    }
    [data-theme="dark"] input,
    [data-theme="dark"] select,
    [data-theme="dark"] textarea{
      background: rgba(255,255,255,.08);
    }
    input:focus, select:focus, textarea:focus{
      border-color: rgba(200,155,60,.55);
      box-shadow:0 0 0 4px rgba(200,155,60,.18);
    }
    textarea{ resize: vertical; min-height: 90px; }

    .drawerCtas{
      display:flex; gap:10px; flex-wrap:wrap; margin-top:4px;
    }
    .smallNote{
      color: var(--muted);
      font-size:12px;
      margin-top:4px;
    }

    /* ---------------- NEW: GLOBE + LEARNING + CBM ---------------- */
    .learnGrid{
      margin-top:16px;
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap:14px;
      align-items:stretch;
    }

    .globeCard{
      border-radius:22px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.92);
      padding:16px;
      box-shadow:0 14px 34px rgba(11,28,45,.07);
      overflow:hidden;
      position:relative;
    }
    [data-theme="dark"] .globeCard{ background: rgba(255,255,255,.06); }

    .globeTop{
      display:flex; align-items:flex-start; justify-content:space-between; gap:10px; flex-wrap:wrap;
      margin-bottom:10px;
    }
    .globeTop h3{margin:0; font-size:14px}
    .globeHint{margin:6px 0 0; color:var(--muted); font-size:12.5px; max-width:58ch}
    .globeWrap{
      margin-top:10px;
      border-radius:18px;
      border:1px solid var(--line);
      background:
        radial-gradient(520px 240px at 15% 20%, rgba(255,79,216,.11), transparent 60%),
        radial-gradient(520px 240px at 90% 20%, rgba(71,230,177,.10), transparent 60%),
        radial-gradient(420px 240px at 55% 10%, rgba(200,155,60,.09), transparent 60%),
        rgba(255,255,255,.55);
      overflow:hidden;
      position:relative;
      aspect-ratio: 1 / 1;
      display:flex; align-items:center; justify-content:center;
    }
    [data-theme="dark"] .globeWrap{ background: rgba(255,255,255,.05); }

    #globe{
      width:100%;
      height:100%;
      display:block;
    }

    .routePills{
      display:flex; gap:8px; flex-wrap:wrap;
      margin-top:10px;
    }
    .routePill{
      font-size:12px;
      padding:9px 12px;
      border-radius:999px;
      border:1px solid var(--line);
      background: rgba(11,28,45,.04);
      cursor:pointer;
      transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease, background .18s ease;
      user-select:none;
    }
    [data-theme="dark"] .routePill{ background: rgba(255,255,255,.06); }
    .routePill:hover{ transform: translateY(-2px); box-shadow:0 14px 28px rgba(11,28,45,.10) }
    .routePill.active{
      background: rgba(200,155,60,.16);
      border-color: rgba(200,155,60,.50);
      box-shadow:0 16px 34px rgba(200,155,60,.12);
    }

    .incotermsGrid{
      margin-top:14px;
      display:grid;
      grid-template-columns: 1fr;
      gap:12px;
    }
    .termRow{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      align-items:center;
      margin-top:10px;
    }
    .termBtn{
      font-size:12px;
      padding:9px 12px;
      border-radius:999px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.85);
      cursor:pointer;
      transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease, background .18s ease;
      color: var(--text);
    }
    [data-theme="dark"] .termBtn{ background: rgba(255,255,255,.08); }
    .termBtn:hover{ transform: translateY(-2px); box-shadow:0 14px 28px rgba(11,28,45,.10) }
    .termBtn.active{
      background: rgba(71,230,177,.14);
      border-color: rgba(71,230,177,.45);
      box-shadow:0 16px 34px rgba(71,230,177,.10);
    }

    .termPanel{
      border-radius:22px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.86);
      padding:16px;
    }
    [data-theme="dark"] .termPanel{ background: rgba(255,255,255,.06); }

    .termTitle{
      display:flex; align-items:baseline; justify-content:space-between; gap:10px; flex-wrap:wrap;
    }
    .termTitle b{font-size:14px}
    .termTitle .tag{ margin:0; }

    .termExplain{
      margin:8px 0 0;
      color: var(--muted);
      font-size:12.5px;
      line-height:1.45;
      max-width:78ch;
    }

    .timeline{
      margin-top:12px;
      border-radius:16px;
      border:1px solid var(--line);
      background: rgba(11,28,45,.03);
      padding:12px;
    }
    [data-theme="dark"] .timeline{ background: rgba(255,255,255,.05); }

    .tlHead{
      display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap;
      font-size:11px; color: var(--muted);
      margin-bottom:8px;
    }

    .bar{
      height:12px;
      border-radius:999px;
      overflow:hidden;
      border:1px solid var(--line);
      background: rgba(255,255,255,.55);
      display:flex;
    }
    [data-theme="dark"] .bar{ background: rgba(255,255,255,.06); }

    .seg{ height:100%; }
    .seg.seller{ background: linear-gradient(90deg, rgba(74,111,165,.65), rgba(200,155,60,.55)); }
    .seg.buyer{ background: linear-gradient(90deg, rgba(255,79,216,.45), rgba(71,230,177,.40)); opacity:.92; }

    .legend{
      display:flex; gap:10px; flex-wrap:wrap;
      margin-top:10px; font-size:11px; color: var(--muted);
    }
    .lg{
      display:inline-flex; align-items:center; gap:7px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.60);
    }
    [data-theme="dark"] .lg{ background: rgba(255,255,255,.06); }
    .sw{width:10px;height:10px;border-radius:50%}
    .sw.seller{ background: rgba(74,111,165,.75); }
    .sw.buyer{ background: rgba(255,79,216,.55); }

    .steps{
      margin-top:12px;
      display:grid;
      grid-template-columns: repeat(5, minmax(0,1fr));
      gap:8px;
    }
    .step{
      border:1px solid var(--line);
      border-radius:16px;
      padding:10px 10px;
      background: rgba(255,255,255,.62);
      min-height:66px;
    }
    [data-theme="dark"] .step{ background: rgba(255,255,255,.06); }
    .step b{ font-size:11px; display:block; }
    .step span{ font-size:11px; color: var(--muted); display:block; margin-top:4px; line-height:1.35; }

    /* CBM */
    .cbmGrid{
      margin-top:12px;
      display:grid;
      grid-template-columns: repeat(6, minmax(0,1fr));
      gap:10px;
    }
    .cbmGrid .full{ grid-column: 1 / -1; }
    .cbmGrid .span2{ grid-column: span 2; }
    .cbmGrid .span3{ grid-column: span 3; }
    .cbmGrid .span1{ grid-column: span 1; }

    .resultBox{
      margin-top:12px;
      border-radius:18px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.78);
      padding:14px;
      display:flex; align-items:flex-end; justify-content:space-between; gap:12px; flex-wrap:wrap;
    }
    [data-theme="dark"] .resultBox{ background: rgba(255,255,255,.06); }

    .bigNum{
      font-size:24px;
      font-weight:800;
      letter-spacing:-.02em;
      background: linear-gradient(135deg, var(--navy), var(--steel));
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
    }
    [data-theme="dark"] .bigNum{
      background: linear-gradient(135deg, rgba(71,230,177,.85), rgba(255,79,216,.75));
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
    }
    .smallNums{
      display:flex; gap:10px; flex-wrap:wrap;
      color: var(--muted);
      font-size:12px;
    }
    .smallNums .tag{ background: rgba(11,28,45,.03); }
    [data-theme="dark"] .smallNums .tag{ background: rgba(255,255,255,.06); }

    @media (max-width: 980px){
      .heroGrid{grid-template-columns:1fr; padding:32px 18px}
      .heroVisual{height:240px}
      .cards{grid-template-columns:1fr}
      .coverageGrid{grid-template-columns:1fr}
      .panelGrid{grid-template-columns:1fr}
      .form{grid-template-columns:1fr}
      .learnGrid{ grid-template-columns: 1fr; }
      .steps{ grid-template-columns: 1fr; }
      .cbmGrid{ grid-template-columns: 1fr 1fr; }
      .cbmGrid .span2, .cbmGrid .span3, .cbmGrid .span1{ grid-column: auto; }
    }
  </style>
</head>

<body>

  <div class="top">
    <div class="topInner">
      <div class="brand">
        <b>BAATAR SHIPPING</b>
        <span data-i18n="tagline">Moving Trade Forward</span>
      </div>

      <div class="nav" aria-label="Primary navigation">
        <a href="#services" data-i18n="navServices">Services</a>
        <a href="#coverage" data-i18n="navCoverage">Coverage</a>
        <a href="#learning" data-i18n="navLearning">Learning</a>
        <a href="#contact" data-i18n="navContact">Contact</a>
        <a href="about.html" data-i18n="navAbout">About</a>
        <a href="services.html" data-i18n="navServicesPage">Services Page</a>

        <div class="controls">
          <button class="pillBtn" id="theme-toggle" type="button" title="Toggle dark mode">ðŸŒ™</button>
          <button class="pillBtn" id="lang-en" type="button">EN</button>
          <button class="pillBtn" id="lang-mn" type="button">MN</button>
        </div>
      </div>
    </div>
  </div>

  <main class="wrap">

    <section class="hero reveal">
      <div class="heroGrid">
        <div>
          <div class="kicker"><span class="kdot"></span> <span data-i18n="heroKicker">Cross-border logistics coordination</span></div>
          <h1 data-i18n="heroTitle">Mongolia â†” China â†” Global Logistics</h1>
          <p class="lead" data-i18n="heroSub">
            Reliable logistics coordination for cross-border and international trade â€” clear communication, fast execution, trusted partners.
          </p>

          <div class="chips">
            <span class="chip" data-i18n="chip1">Fast response</span>
            <span class="chip" data-i18n="chip2">Clear coordination</span>
            <span class="chip" data-i18n="chip3">Trusted network</span>
          </div>

          <div class="heroCtas">
            <button class="btn primary" id="openQuote" type="button" data-i18n="ctaPrimary">Request a quote</button>
            <a class="btn ghost" href="https://wa.me/97699887055" target="_blank" rel="noopener">WhatsApp</a>
            <a class="btn ghost" href="viber://chat?number=%2B97699887055">Viber</a>
          </div>

          <div class="mini" data-i18n="heroMini">Practical, calm, dependable â€” built for long-term trade.</div>
        </div>

        <div class="heroVisual" aria-hidden="true">
          <svg class="routeSvg" viewBox="0 0 560 320" preserveAspectRatio="none">
            <defs>
              <linearGradient id="routeGrad" x1="0" x2="1" y1="0" y2="1">
                <stop offset="0" stop-color="rgba(255,79,216,.70)"/>
                <stop offset=".45" stop-color="rgba(200,155,60,.70)"/>
                <stop offset="1" stop-color="rgba(71,230,177,.60)"/>
              </linearGradient>
            </defs>

            <path class="glow" d="M30,250 C120,60 210,290 300,150 C360,70 440,80 530,40" />
            <path class="main" d="M30,250 C120,60 210,290 300,150 C360,70 440,80 530,40" />

            <circle cx="30" cy="250" r="6" fill="rgba(74,111,165,.75)"></circle>
            <circle cx="530" cy="40" r="6" fill="rgba(11,28,45,.55)"></circle>

            <circle class="dot dot1" cx="300" cy="150" r="7"></circle>
            <circle class="dot dot2" cx="220" cy="210" r="5"></circle>

            <circle class="pulse" cx="30" cy="250" r="14"></circle>
          </svg>

          <div class="badge">
            <span class="bDot"></span>
            <span data-i18n="heroBadge">Mongolia â†” China â†” Global</span>
          </div>
        </div>
      </div>
    </section>

    <!-- SERVICES -->
    <section class="section reveal" id="services">
      <div class="sectionCard">
        <div class="headRow">
          <div>
            <h2 data-i18n="servicesTitle">Services</h2>
            <p class="sub" data-i18n="servicesSub">Tap a service to see whatâ€™s included â€” designed to reduce risk and increase speed.</p>
          </div>
        </div>

        <div class="tabs" role="tablist" aria-label="Services tabs">
          <button class="tab active" type="button" data-tab="t1" data-i18n="tab1">Freight</button>
          <button class="tab" type="button" data-tab="t2" data-i18n="tab2">Cross-border</button>
          <button class="tab" type="button" data-tab="t3" data-i18n="tab3">Documents</button>
        </div>

        <div class="tabPanels">
          <div class="panel active" id="t1">
            <b data-i18n="p1Title">Freight coordination (planning + control)</b>
            <div class="panelGrid stagger">
              <div class="card">
                <h3 data-i18n="p1aTitle">Route options</h3>
                <p data-i18n="p1aText">Choose the best route for cost, speed, and reliability.</p>
                <div class="meta"><span class="tag">MNG â†” CHN</span><span class="tag" data-i18n="tagPlanning">Planning</span></div>
              </div>
              <div class="card">
                <h3 data-i18n="p1bTitle">Partner alignment</h3>
                <p data-i18n="p1bText">Coordinate carriers and operators so handovers are smooth.</p>
                <div class="meta"><span class="tag" data-i18n="tagCoordination">Coordination</span><span class="tag">Updates</span></div>
              </div>
            </div>
          </div>

          <div class="panel" id="t2">
            <b data-i18n="p2Title">Cross-border execution (handover + exceptions)</b>
            <div class="panelGrid stagger">
              <div class="card">
                <h3 data-i18n="p2aTitle">Border handover</h3>
                <p data-i18n="p2aText">Clear responsibilities across the border to keep cargo moving.</p>
                <div class="meta"><span class="tag">Handover</span><span class="tag" data-i18n="tagSpeed">Speed</span></div>
              </div>
              <div class="card">
                <h3 data-i18n="p2bTitle">Issue handling</h3>
                <p data-i18n="p2bText">If delays happen, we push a resolution plan fast.</p>
                <div class="meta"><span class="tag" data-i18n="tagRisk">Risk</span><span class="tag">Status</span></div>
              </div>
            </div>
          </div>

          <div class="panel" id="t3">
            <b data-i18n="p3Title">Documentation support (reduce preventable delays)</b>
            <div class="panelGrid stagger">
              <div class="card">
                <h3 data-i18n="p3aTitle">Checklist by route</h3>
                <p data-i18n="p3aText">Simple checklist to avoid missing or wrong docs.</p>
                <div class="meta"><span class="tag">Docs</span><span class="tag" data-i18n="tagAccuracy">Accuracy</span></div>
              </div>
              <div class="card">
                <h3 data-i18n="p3bTitle">Validation</h3>
                <p data-i18n="p3bText">Weights, codes, names â€” confirm before shipment.</p>
                <div class="meta"><span class="tag">Verification</span><span class="tag" data-i18n="tagClarity">Clarity</span></div>
              </div>
            </div>
          </div>
        </div>

        <div class="cards stagger" style="margin-top:14px;">
          <a class="card cardLink" href="services.html">
            <h3 data-i18n="svcCard1">See full Services page</h3>
            <p data-i18n="svcCard1Sub">Interactive details, quote shortcuts, and process overview.</p>
            <div class="meta"><span class="tag">services.html</span><span class="tag" data-i18n="tagExplore">Explore</span></div>
          </a>
          <div class="card">
            <h3 data-i18n="svcCard2">Fast quoting</h3>
            <p data-i18n="svcCard2Sub">Send route + cargo details â€” we reply quickly with next steps.</p>
            <div class="meta"><span class="tag">WhatsApp</span><span class="tag">Viber</span></div>
          </div>
          <div class="card">
            <h3 data-i18n="svcCard3">Clean communication</h3>
            <p data-i18n="svcCard3Sub">No confusion, no silence â€” clear updates at every stage.</p>
            <div class="meta"><span class="tag" data-i18n="tagUpdates">Updates</span><span class="tag" data-i18n="tagTrusted">Trusted</span></div>
          </div>
        </div>

      </div>
    </section>

    <!-- COVERAGE (now includes animated globe) -->
    <section class="section reveal" id="coverage">
      <div class="sectionCard">
        <div class="headRow">
          <div>
            <h2 data-i18n="coverageTitle">Coverage</h2>
            <p class="sub" data-i18n="coverageSub">Tap a route chip. Weâ€™ll show what that coverage means.</p>
          </div>
        </div>

        <div class="learnGrid stagger" style="margin-top:16px;">
          <!-- LEFT: your existing coverage cards -->
          <div>
            <div class="coverageGrid" style="margin-top:0;">
              <div class="covCard">
                <div class="covTop">
                  <h3 data-i18n="covCoreTitle">Core Routes</h3>
                  <span class="tag" data-i18n="covCoreTag">MNG â†” CHN</span>
                </div>
                <div class="covChips" id="coreChips">
                  <div class="covChip active" data-note="core1" data-i18n="covChip1">UB â†” Erenhot</div>
                  <div class="covChip" data-note="core2" data-i18n="covChip2">Zamiin-Uud â†” China</div>
                  <div class="covChip" data-note="core3" data-i18n="covChip3">Rail / Road options</div>
                </div>
                <div class="covNote" id="coreNote"></div>
              </div>

              <div class="covCard">
                <div class="covTop">
                  <h3 data-i18n="covGlobalTitle">Global Reach</h3>
                  <span class="tag" data-i18n="covGlobalTag">Partners</span>
                </div>
                <div class="covChips" id="globalChips">
                  <div class="covChip active" data-note="g1" data-i18n="covChip4">Overseas pickup</div>
                  <div class="covChip" data-note="g2" data-i18n="covChip5">Cross-trade</div>
                  <div class="covChip" data-note="g3" data-i18n="covChip6">Multi-leg tracking</div>
                </div>
                <div class="covNote" id="globalNote"></div>
              </div>
            </div>
          </div>

          <!-- RIGHT: animated globe -->
          <div class="globeCard">
            <div class="globeTop">
              <div>
                <h3 data-i18n="globeTitle">Live Coverage Map</h3>
                <div class="globeHint" data-i18n="globeSub">
                  A lightweight animated globe. Select routes to highlight trade lanes.
                </div>
              </div>
              <span class="tag" data-i18n="globeTag">Interactive</span>
            </div>

            <div class="globeWrap" id="globeWrap">
  <canvas id="globe" width="640" height="640"></canvas>

  <!-- Tooltip -->
  <div id="globeTip" style="
    position:absolute;
    left:16px; top:16px;
    max-width: 260px;
    padding:12px 12px;
    border-radius:16px;
    border:1px solid var(--line);
    background: rgba(255,255,255,.78);
    backdrop-filter: blur(10px);
    box-shadow: 0 18px 45px rgba(11,28,45,.12);
    display:none;
  ">
    <div style="display:flex; align-items:flex-start; justify-content:space-between; gap:10px;">
      <div>
        <b id="tipTitle" style="font-size:13px; letter-spacing:-.01em;">City</b>
        <div id="tipSub" style="margin-top:6px; color:var(--muted); font-size:12px; line-height:1.35;">
          Tap a city point to see details
        </div>
      </div>
      <button id="tipClose" type="button" style="
        border:1px solid var(--line);
        background: rgba(255,255,255,.72);
        border-radius: 12px;
        padding:6px 8px;
        cursor:pointer;
        color: var(--text);
      ">âœ•</button>
    </div>
    <div id="tipMeta" style="margin-top:10px; display:flex; gap:8px; flex-wrap:wrap;">
      <span class="tag" id="tipTag1">Lane</span>
      <span class="tag" id="tipTag2">Hub</span>
    </div>
    <div style="margin-top:10px; color:var(--muted); font-size:11.5px;">
      <span style="opacity:.9">Tip:</span> Drag to rotate â€¢ Tap to select
    </div>
  </div>
</div>

            <div class="routePills" id="routePills">
              <div class="routePill active" data-route="mngchn" data-i18n="route1">MNG â†” CHN</div>
              <div class="routePill" data-route="asiaeu" data-i18n="route2">Asia â†” EU</div>
              <div class="routePill" data-route="global" data-i18n="route3">Global network</div>
            </div>

            <div class="covNote" id="routeNote" style="margin-top:10px;"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- NEW: LEARNING (Incoterms + CBM) -->
    <section class="section reveal" id="learning">
      <div class="sectionCard">
        <div class="headRow">
          <div>
            <h2 data-i18n="learningTitle">Learning Tools</h2>
            <p class="sub" data-i18n="learningSub">IncotermsÂ® 2020 comparison + quick CBM calculator for faster quoting.</p>
          </div>
        </div>

        <!-- Incoterms -->
        <div class="incotermsGrid">
          <div class="termPanel">
            <div class="termTitle">
              <b data-i18n="incTitle">IncotermsÂ® 2020 â€” responsibility split</b>
              <span class="tag" data-i18n="incTag">Clear visual</span>
            </div>
            <div class="termExplain" data-i18n="incSub">
              Select a term. The timeline shows who handles each stage (Seller vs Buyer). Use this as a learning guide (always confirm contract specifics).
            </div>

            <div class="termRow" id="termRow">
              <button class="termBtn active" type="button" data-term="EXW">EXW</button>
              <button class="termBtn" type="button" data-term="FOB">FOB</button>
              <button class="termBtn" type="button" data-term="CIF">CIF</button>
              <button class="termBtn" type="button" data-term="DAP">DAP</button>
              <button class="termBtn" type="button" data-term="DDP">DDP</button>
            </div>

            <div class="timeline" id="termPanel">
              <div class="tlHead">
                <span data-i18n="tlSeller">Seller</span>
                <span data-i18n="tlBuyer">Buyer</span>
              </div>

              <div class="bar" aria-label="Responsibility bar">
                <div class="seg seller" id="segSeller" style="width:40%"></div>
                <div class="seg buyer" id="segBuyer" style="width:60%"></div>
              </div>

              <div class="legend">
                <span class="lg"><span class="sw seller"></span><span data-i18n="legendSeller">Seller handles</span></span>
                <span class="lg"><span class="sw buyer"></span><span data-i18n="legendBuyer">Buyer handles</span></span>
              </div>

              <div class="steps" id="termSteps" aria-label="Steps breakdown">
                <!-- Filled by JS -->
              </div>
            </div>
          </div>

          <!-- CBM Calculator -->
          <div class="termPanel">
            <div class="termTitle">
              <b data-i18n="cbmTitle">CBM Calculator</b>
              <span class="tag" data-i18n="cbmTag">Instant</span>
            </div>
            <div class="termExplain" data-i18n="cbmSub">
              Enter dimensions for one carton, then cartons count. Switch units as needed.
            </div>

            <div class="cbmGrid" id="cbmForm" style="margin-top:12px;">
              <div class="span1">
                <label data-i18n="cbmL">Length</label>
                <input id="cbmL" type="number" inputmode="decimal" placeholder="0" />
              </div>
              <div class="span1">
                <label data-i18n="cbmW">Width</label>
                <input id="cbmW" type="number" inputmode="decimal" placeholder="0" />
              </div>
              <div class="span1">
                <label data-i18n="cbmH">Height</label>
                <input id="cbmH" type="number" inputmode="decimal" placeholder="0" />
              </div>
              <div class="span1">
                <label data-i18n="cbmC">Cartons</label>
                <input id="cbmC" type="number" inputmode="numeric" value="1" min="1"/>
              </div>

              <div class="span2">
                <label data-i18n="cbmUnit">Unit</label>
                <select id="cbmUnit">
                  <option value="cm" data-i18n="uCM">Centimeters (cm)</option>
                  <option value="m" data-i18n="uM">Meters (m)</option>
                  <option value="in" data-i18n="uIN">Inches (in)</option>
                </select>
              </div>

              <div class="full resultBox">
                <div>
                  <div class="bigNum" id="cbmOut">0.000 CBM</div>
                  <div class="smallNote" data-i18n="cbmNote">CBM = (L Ã— W Ã— H) Ã— cartons</div>
                </div>
                <div class="smallNums">
                  <span class="tag" id="cbmEach">Each: 0.000</span>
                  <span class="tag" id="cbmCft">0.00 ftÂ³</span>
                </div>
              </div>

              <div class="full smallNote" data-i18n="cbmHint">
                Tip: For air freight, volumetric weight is often based on cmÂ³ / 6000 (carrier rules vary).
              </div>
            </div>

          </div>
        </div>

      </div>
    </section>

    <!-- CONTACT -->
    <section class="section reveal" id="contact">
      <div class="sectionCard">
        <div class="headRow">
          <div>
            <h2 data-i18n="contactTitle">Contact</h2>
            <p class="sub" data-i18n="contactSub">Message us with route + cargo details + timeline. We reply quickly.</p>
          </div>
        </div>

        <div class="band stagger">
          <div>
            <b data-i18n="contactBandTitle">Need a quick quote?</b><br/>
            <span data-i18n="contactBandSub">WhatsApp or Viber â€” fastest response.</span>
          </div>
          <div style="display:flex; gap:10px; flex-wrap:wrap;">
            <button class="btn primary" id="openQuote2" type="button" data-i18n="ctaPrimary">Request a quote</button>
            <a class="btn ghost" href="https://wa.me/97699887055" target="_blank" rel="noopener">WhatsApp</a>
            <a class="btn ghost" href="viber://chat?number=%2B97699887055">Viber</a>
          </div>
        </div>
      </div>
    </section>

    <footer>
      <div>Â© 2026 Baatar Shipping. <span data-i18n="rights">All rights reserved.</span></div>
      <div data-i18n="tagline">Moving Trade Forward</div>
    </footer>

  </main>

  <!-- QUOTE DRAWER -->
  <div class="drawerOverlay" id="drawerOverlay" aria-hidden="true"></div>

  <aside class="drawer" id="drawer" aria-hidden="true" aria-label="Quote request form">
    <div class="drawerTop">
      <div>
        <h3 data-i18n="drawerTitle">Request a quote</h3>
        <div class="drawerHint" data-i18n="drawerSub">Fill this in 30 seconds. Weâ€™ll reply quickly.</div>
      </div>
      <button class="x" id="closeDrawer" type="button">âœ•</button>
    </div>

    <form class="form" id="quoteForm">
      <div>
        <label data-i18n="fName">Name</label>
        <input name="name" required placeholder="Your name"/>
      </div>
      <div>
        <label data-i18n="fCompany">Company</label>
        <input name="company" placeholder="Company (optional)"/>
      </div>
      <div class="full">
        <label data-i18n="fRoute">Route</label>
        <input name="route" required placeholder="Example: Ulaanbaatar â†’ Erenhot â†’ Tianjin"/>
      </div>
      <div>
        <label data-i18n="fCargo">Cargo</label>
        <input name="cargo" required placeholder="Example: textiles / machinery"/>
      </div>
      <div>
        <label data-i18n="fWeight">Weight / Volume</label>
        <input name="weight" placeholder="Example: 12 tons / 40HQ"/>
      </div>
      <div>
        <label data-i18n="fTimeline">Timeline</label>
        <select name="timeline">
          <option value="asap" data-i18n="t1">ASAP</option>
          <option value="1w" data-i18n="t2">Within 1 week</option>
          <option value="2w" data-i18n="t3">Within 2 weeks</option>
          <option value="flex" data-i18n="t4">Flexible</option>
        </select>
      </div>
      <div>
        <label data-i18n="fContact">Preferred contact</label>
        <select name="contact">
          <option value="whatsapp">WhatsApp</option>
          <option value="viber">Viber</option>
          <option value="email">Email</option>
        </select>
      </div>
      <div class="full">
        <label data-i18n="fNotes">Notes</label>
        <textarea name="notes" placeholder="Any special requirements?"></textarea>
      </div>

      <div class="drawerCtas full">
        <button class="btn primary" type="submit" data-i18n="send">Send request</button>
        <a class="btn ghost" id="sendWhatsApp" href="#" target="_blank" rel="noopener">Send via WhatsApp</a>
        <a class="btn ghost" id="sendViber" href="#">Send via Viber</a>
      </div>

      <div class="smallNote full" data-i18n="privacy">We only use this info to reply to your request.</div>
    </form>
  </aside>

  <script>
    (function(){
      // ---------------- i18n ----------------
      const dict = {
        en: {
          tagline:"Moving Trade Forward",
          navServices:"Services", navCoverage:"Coverage", navLearning:"Learning", navContact:"Contact", navAbout:"About", navServicesPage:"Services Page",
          heroKicker:"Cross-border logistics coordination",
          heroTitle:"Mongolia â†” China â†” Global Logistics",
          heroSub:"Reliable logistics coordination for cross-border and international trade â€” clear communication, fast execution, trusted partners.",
          chip1:"Fast response", chip2:"Clear coordination", chip3:"Trusted network",
          ctaPrimary:"Request a quote",
          heroMini:"Practical, calm, dependable â€” built for long-term trade.",
          heroBadge:"Mongolia â†” China â†” Global",

          servicesTitle:"Services",
          servicesSub:"Tap a service to see whatâ€™s included â€” designed to reduce risk and increase speed.",
          tab1:"Freight", tab2:"Cross-border", tab3:"Documents",
          p1Title:"Freight coordination (planning + control)",
          p1aTitle:"Route options", p1aText:"Choose the best route for cost, speed, and reliability.",
          p1bTitle:"Partner alignment", p1bText:"Coordinate carriers and operators so handovers are smooth.",
          p2Title:"Cross-border execution (handover + exceptions)",
          p2aTitle:"Border handover", p2aText:"Clear responsibilities across the border to keep cargo moving.",
          p2bTitle:"Issue handling", p2bText:"If delays happen, we push a resolution plan fast.",
          p3Title:"Documentation support (reduce preventable delays)",
          p3aTitle:"Checklist by route", p3aText:"Simple checklist to avoid missing or wrong docs.",
          p3bTitle:"Validation", p3bText:"Weights, codes, names â€” confirm before shipment.",

          svcCard1:"See full Services page", svcCard1Sub:"Interactive details, quote shortcuts, and process overview.",
          svcCard2:"Fast quoting", svcCard2Sub:"Send route + cargo details â€” we reply quickly with next steps.",
          svcCard3:"Clean communication", svcCard3Sub:"No confusion, no silence â€” clear updates at every stage.",
          tagPlanning:"Planning", tagCoordination:"Coordination", tagSpeed:"Speed", tagRisk:"Risk", tagAccuracy:"Accuracy", tagClarity:"Clarity",
          tagExplore:"Explore", tagUpdates:"Updates", tagTrusted:"Trusted",

          coverageTitle:"Coverage",
          coverageSub:"Tap a route chip. Weâ€™ll show what that coverage means.",
          covCoreTitle:"Core Routes", covCoreTag:"MNG â†” CHN",
          covGlobalTitle:"Global Reach", covGlobalTag:"Partners",
          covChip1:"UB â†” Erenhot", covChip2:"Zamiin-Uud â†” China", covChip3:"Rail / Road options",
          covChip4:"Overseas pickup", covChip5:"Cross-trade", covChip6:"Multi-leg tracking",

          globeTitle:"Live Coverage Map",
          globeSub:"A lightweight animated globe. Select routes to highlight trade lanes.",
          globeTag:"Interactive",
          route1:"MNG â†” CHN",
          route2:"Asia â†” EU",
          route3:"Global network",

          learningTitle:"Learning Tools",
          learningSub:"IncotermsÂ® 2020 comparison + quick CBM calculator for faster quoting.",

          incTitle:"IncotermsÂ® 2020 â€” responsibility split",
          incTag:"Clear visual",
          incSub:"Select a term. The timeline shows who handles each stage (Seller vs Buyer). Use this as a learning guide (always confirm contract specifics).",
          tlSeller:"Seller",
          tlBuyer:"Buyer",
          legendSeller:"Seller handles",
          legendBuyer:"Buyer handles",

          cbmTitle:"CBM Calculator",
          cbmTag:"Instant",
          cbmSub:"Enter dimensions for one carton, then cartons count. Switch units as needed.",
          cbmL:"Length", cbmW:"Width", cbmH:"Height", cbmC:"Cartons", cbmUnit:"Unit",
          uCM:"Centimeters (cm)", uM:"Meters (m)", uIN:"Inches (in)",
          cbmNote:"CBM = (L Ã— W Ã— H) Ã— cartons",
          cbmHint:"Tip: For air freight, volumetric weight is often based on cmÂ³ / 6000 (carrier rules vary).",

          contactTitle:"Contact",
          contactSub:"Message us with route + cargo details + timeline. We reply quickly.",
          contactBandTitle:"Need a quick quote?",
          contactBandSub:"WhatsApp or Viber â€” fastest response.",
          rights:"All rights reserved.",

          drawerTitle:"Request a quote",
          drawerSub:"Fill this in 30 seconds. Weâ€™ll reply quickly.",
          fName:"Name", fCompany:"Company", fRoute:"Route", fCargo:"Cargo", fWeight:"Weight / Volume", fTimeline:"Timeline", fContact:"Preferred contact", fNotes:"Notes",
          t1:"ASAP", t2:"Within 1 week", t3:"Within 2 weeks", t4:"Flexible",
          send:"Send request",
          privacy:"We only use this info to reply to your request."
        },

        mn: {
          tagline:"Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð°Ð³ ÑƒÑ€Ð°Ð³ÑˆÐ»ÑƒÑƒÐ»Ð½Ð°",
          navServices:"Ò®Ð¹Ð»Ñ‡Ð¸Ð»Ð³ÑÑ", navCoverage:"Ð¥Ð°Ð¼Ñ€Ð°Ñ… Ñ…Ò¯Ñ€ÑÑ", navLearning:"Ð¡ÑƒÑ€Ð°Ð»Ñ†Ð°Ñ…", navContact:"Ð¥Ð¾Ð»Ð±Ð¾Ð¾ Ð±Ð°Ñ€Ð¸Ñ…", navAbout:"Ð‘Ð¸Ð´Ð½Ð¸Ð¹ Ñ‚ÑƒÑ…Ð°Ð¹", navServicesPage:"Ò®Ð¹Ð»Ñ‡Ð¸Ð»Ð³ÑÑ (Ñ…ÑƒÑƒÐ´Ð°Ñ)",
          heroKicker:"Ð¥Ð¸Ð» Ð´Ð°Ð¼Ð½Ð°ÑÐ°Ð½ Ð»Ð¾Ð¶Ð¸ÑÑ‚Ð¸ÐºÐ¸Ð¹Ð½ Ð·Ð¾Ñ…Ð¸Ñ†ÑƒÑƒÐ»Ð°Ð»Ñ‚",
          heroTitle:"ÐœÐ¾Ð½Ð³Ð¾Ð» â†” Ð¥ÑÑ‚Ð°Ð´ â†” Ð”ÑÐ»Ñ…Ð¸Ð¹ Ð›Ð¾Ð¶Ð¸ÑÑ‚Ð¸Ðº",
          heroSub:"Ð¥Ð¸Ð» Ð´Ð°Ð¼Ð½Ð°ÑÐ°Ð½ Ð±Ð¾Ð»Ð¾Ð½ Ð¾Ð»Ð¾Ð½ ÑƒÐ»ÑÑ‹Ð½ Ñ‚ÑÑÐ²ÑÑ€Ñ‚ â€” Ð¾Ð¹Ð»Ð³Ð¾Ð¼Ð¶Ñ‚Ð¾Ð¹ Ñ…Ð°Ñ€Ð¸Ð»Ñ†Ð°Ð°, Ñ…ÑƒÑ€Ð´Ð°Ð½ Ð³Ò¯Ð¹Ñ†ÑÑ‚Ð³ÑÐ», Ð½Ð°Ð¹Ð´Ð²Ð°Ñ€Ñ‚Ð°Ð¹ Ñ‚Ò¯Ð½ÑˆÐ»ÑÐ».",
          chip1:"Ð¥ÑƒÑ€Ð´Ð°Ð½ Ñ…Ð°Ñ€Ð¸Ñƒ", chip2:"Ð¢Ð¾Ð´ Ð·Ð¾Ñ…Ð¸Ñ†ÑƒÑƒÐ»Ð°Ð»Ñ‚", chip3:"ÐÐ°Ð¹Ð´Ð²Ð°Ñ€Ñ‚Ð°Ð¹ ÑÒ¯Ð»Ð¶ÑÑ",
          ctaPrimary:"Ò®Ð½Ð¸Ð¹Ð½ ÑÐ°Ð½Ð°Ð» Ð°Ð²Ð°Ñ…",
          heroMini:"ÐŸÑ€Ð°ÐºÑ‚Ð¸Ðº, Ñ‚Ð°Ð¹Ð²Ð°Ð½, Ð½Ð°Ð¹Ð´Ð²Ð°Ñ€Ñ‚Ð°Ð¹ â€” ÑƒÑ€Ñ‚ Ñ…ÑƒÐ³Ð°Ñ†Ð°Ð°Ð½Ñ‹ Ñ…ÑƒÐ´Ð°Ð»Ð´Ð°Ð°Ð½Ð´.",
          heroBadge:"ÐœÐ¾Ð½Ð³Ð¾Ð» â†” Ð¥ÑÑ‚Ð°Ð´ â†” Ð”ÑÐ»Ñ…Ð¸Ð¹",

          servicesTitle:"Ò®Ð¹Ð»Ñ‡Ð¸Ð»Ð³ÑÑ",
          servicesSub:"Ò®Ð¹Ð»Ñ‡Ð¸Ð»Ð³ÑÑÐ³ Ð´Ð°Ñ€Ð¶ Ð´ÑÐ»Ð³ÑÑ€ÑÐ½Ð³Ò¯Ð¹Ð³ Ò¯Ð·ÑÑÑ€ÑÐ¹ â€” ÑÑ€ÑÐ´ÑÐ» Ð±ÑƒÑƒÑ€ÑƒÑƒÐ»Ð¶, Ñ…ÑƒÑ€Ð´Ñ‹Ð³ Ð½ÑÐ¼ÑÐ³Ð´Ò¯Ò¯Ð»Ð½Ñ.",
          tab1:"Ð¢ÑÑÐ²ÑÑ€", tab2:"Ð¥Ð¸Ð» Ð´Ð°Ð¼Ð½Ð°ÑÐ°Ð½", tab3:"Ð‘Ð°Ñ€Ð¸Ð¼Ñ‚ Ð±Ð¸Ñ‡Ð¸Ð³",
          p1Title:"Ð¢ÑÑÐ²Ñ€Ð¸Ð¹Ð½ Ð·Ð¾Ñ…Ð¸Ñ†ÑƒÑƒÐ»Ð°Ð»Ñ‚ (Ñ‚Ó©Ð»Ó©Ð²Ð»Ó©Ð»Ñ‚ + Ñ…ÑÐ½Ð°Ð»Ñ‚)",
          p1aTitle:"ÐœÐ°Ñ€ÑˆÑ€ÑƒÑ‚ ÑÐ¾Ð½Ð³Ð¾Ð»Ñ‚", p1aText:"Ò®Ð½Ñ, Ñ…ÑƒÑ€Ð´, Ð½Ð°Ð¹Ð´Ð²Ð°Ñ€Ñ‚Ð°Ð¹ Ð±Ð°Ð¹Ð´Ð»Ð°Ð°Ñ€ Ð¾Ð½Ð¾Ð²Ñ‡Ñ‚Ð¾Ð¹Ð³ ÑÐ¾Ð½Ð³Ð¾Ð½Ð¾.",
          p1bTitle:"Ð¢Ò¯Ð½Ñˆ Ð·Ð¾Ñ…Ð¸Ñ†ÑƒÑƒÐ»Ð°Ð»Ñ‚", p1bText:"Ð”Ð°Ð¼Ð¶ÑƒÑƒÐ»Ð°Ð»Ñ‚Ñ‹Ð³ Ð¶Ð¸Ð³Ð´ Ð±Ð¾Ð»Ð³Ð¾Ñ…Ñ‹Ð½ Ñ‚ÑƒÐ»Ð´ Ñ‚Ò¯Ð½ÑˆÒ¯Ò¯Ð´Ð¸Ð¹Ð³ ÑƒÑÐ»Ð´ÑƒÑƒÐ»Ð½Ð°.",
          p2Title:"Ð¥Ð¸Ð» Ð´Ð°Ð¼Ð½Ð°ÑÐ°Ð½ Ð³Ò¯Ð¹Ñ†ÑÑ‚Ð³ÑÐ» (Ð´Ð°Ð¼Ð¶ÑƒÑƒÐ»Ð°Ð»Ñ‚ + Ð°ÑÑƒÑƒÐ´Ð°Ð» ÑˆÐ¸Ð¹Ð´ÑÐ»Ñ‚)",
          p2aTitle:"Ð¥Ð¸Ð» Ð´ÑÑÑ€Ñ… Ð´Ð°Ð¼Ð¶ÑƒÑƒÐ»Ð°Ð»Ñ‚", p2aText:"Ð¥Ð°Ñ€Ð¸ÑƒÑ†Ð»Ð°Ð³Ñ‹Ð³ Ñ‚Ð¾Ð´Ð¾Ñ€Ñ…Ð¾Ð¹Ð»Ð¶ Ñ‚ÑÑÐ²Ñ€Ð¸Ð¹Ð³ Ñ‚Ð°ÑÐ°Ð»Ð´ÑƒÑƒÐ»Ð°Ñ…Ð³Ò¯Ð¹.",
          p2bTitle:"ÐÑÑƒÑƒÐ´Ð°Ð» ÑˆÐ¸Ð¹Ð´Ð²ÑÑ€Ð»ÑÐ»Ñ‚", p2bText:"Ð¡Ð°Ð°Ñ‚Ð°Ð» Ð³Ð°Ñ€Ð²Ð°Ð» Ñ…ÑƒÑ€Ð´Ð°Ð½ ÑˆÐ¸Ð¹Ð´Ð²ÑÑ€Ð»ÑÑ… Ñ‚Ó©Ð»Ó©Ð²Ð»Ó©Ð³Ó©Ó© Ð³Ð°Ñ€Ð³Ð°Ð½Ð°.",
          p3Title:"Ð‘Ð°Ñ€Ð¸Ð¼Ñ‚ Ð±Ð¸Ñ‡Ð³Ð¸Ð¹Ð½ Ð´ÑÐ¼Ð¶Ð»ÑÐ³ (ÑƒÑ€ÑŒÐ´Ñ‡Ð¸Ð»Ð°Ð½ ÑÑÑ€Ð³Ð¸Ð¹Ð»ÑÑ… ÑÐ°Ð°Ñ‚Ð»Ñ‹Ð³ Ð±ÑƒÑƒÑ€ÑƒÑƒÐ»Ð½Ð°)",
          p3aTitle:"ÐœÐ°Ñ€ÑˆÑ€ÑƒÑ‚ Ð±Ò¯Ñ€Ð¸Ð¹Ð½ checklist", p3aText:"Ð”ÑƒÑ‚ÑƒÑƒ/Ð±ÑƒÑ€ÑƒÑƒ Ð±Ð°Ñ€Ð¸Ð¼Ñ‚Ð°Ð°Ñ Ò¯Ò¯ÑÑÑ… ÑÑ€ÑÐ´ÑÐ»Ð¸Ð¹Ð³ Ð±Ð°Ð³Ð°ÑÐ³Ð°Ð½Ð°.",
          p3bTitle:"Ð¨Ð°Ð»Ð³Ð°Ð»Ñ‚, Ð±Ð°Ñ‚Ð°Ð»Ð³Ð°Ð°Ð¶ÑƒÑƒÐ»Ð°Ð»Ñ‚", p3bText:"Ð–Ð¸Ð½, ÐºÐ¾Ð´, Ð½ÑÑ€ â€” Ð°Ñ‡Ð¸Ñ…Ð°Ð°Ñ Ó©Ð¼Ð½Ó© Ð±Ð°Ñ‚Ð°Ð»Ð³Ð°Ð°Ð¶ÑƒÑƒÐ»Ð½Ð°.",

          svcCard1:"Ò®Ð¹Ð»Ñ‡Ð¸Ð»Ð³ÑÑÐ½Ð¸Ð¹ Ñ…ÑƒÑƒÐ´ÑÑ‹Ð³ Ò¯Ð·ÑÑ…", svcCard1Sub:"Ð˜Ð½Ñ‚ÐµÑ€Ð°ÐºÑ‚Ð¸Ð² Ð´ÑÐ»Ð³ÑÑ€ÑÐ½Ð³Ò¯Ð¹, Ò¯Ð½Ð¸Ð¹Ð½ ÑÐ°Ð½Ð°Ð», Ð¿Ñ€Ð¾Ñ†ÐµÑÑ.",
          svcCard2:"Ð¥ÑƒÑ€Ð´Ð°Ð½ ÑÐ°Ð½Ð°Ð»", svcCard2Sub:"ÐœÐ°Ñ€ÑˆÑ€ÑƒÑ‚ + Ð°Ñ‡Ð°Ð°Ð½Ñ‹ Ð¼ÑÐ´ÑÑÐ»ÑÐ» Ð¸Ð»Ð³ÑÑ â€” Ñ…ÑƒÑ€Ð´Ð°Ð½ Ñ…Ð°Ñ€Ð¸Ñƒ Ó©Ð³Ð½Ó©.",
          svcCard3:"Ð¢Ð¾Ð´ Ñ…Ð°Ñ€Ð¸Ð»Ñ†Ð°Ð°", svcCard3Sub:"Ð¢Ó©Ó©Ñ€Ó©Ð³Ð´Ó©Ð»Ð³Ò¯Ð¹ â€” ÑˆÐ°Ñ‚ Ð±Ò¯Ñ€ Ð´ÑÑÑ€ Ð¾Ð¹Ð»Ð³Ð¾Ð¼Ð¶Ñ‚Ð¾Ð¹ Ð¼ÑÐ´ÑÐ³Ð´ÑÐ».",
          tagPlanning:"Ð¢Ó©Ð»Ó©Ð²Ð»Ó©Ð»Ñ‚", tagCoordination:"Ð—Ð¾Ñ…Ð¸Ñ†ÑƒÑƒÐ»Ð°Ð»Ñ‚", tagSpeed:"Ð¥ÑƒÑ€Ð´", tagRisk:"Ð­Ñ€ÑÐ´ÑÐ»", tagAccuracy:"ÐÐ°Ñ€Ð¸Ð¹Ð²Ñ‡Ð»Ð°Ð»", tagClarity:"Ð¢Ð¾Ð´Ð¾Ñ€Ñ…Ð¾Ð¹",
          tagExplore:"Ð¡ÑƒÐ´Ð»Ð°Ñ…", tagUpdates:"ÐœÑÐ´ÑÑÐ»ÑÐ»", tagTrusted:"Ð˜Ñ‚Ð³ÑÐ»Ñ‚ÑÐ¹",

          coverageTitle:"Ð¥Ð°Ð¼Ñ€Ð°Ñ… Ñ…Ò¯Ñ€ÑÑ",
          coverageSub:"Ð§Ð¸Ð¿ Ð´ÑÑÑ€ Ð´Ð°Ñ€ â€” Ñ…Ð°Ð¼Ñ€Ð°Ñ… Ñ…Ò¯Ñ€ÑÑÐ³ Ñ‚Ð¾Ð²Ñ‡ Ñ‚Ð°Ð¹Ð»Ð±Ð°Ñ€Ð»Ð°Ð½Ð°.",
          covCoreTitle:"Ò®Ð½Ð´ÑÑÐ½ Ñ‡Ð¸Ð³Ð»ÑÐ»", covCoreTag:"ÐœÐ â†” Ð¥Ð",
          covGlobalTitle:"Ð”ÑÐ»Ñ…Ð¸Ð¹Ð½ Ñ…Ð°Ð¼Ñ€Ð°Ñ… Ñ…Ò¯Ñ€ÑÑ", covGlobalTag:"Ð¢Ò¯Ð½ÑˆÐ»ÑÐ»",
          covChip1:"Ð£Ð‘ â†” Ð­Ñ€ÑÑÐ½Ð¸Ð¹", covChip2:"Ð—Ð°Ð¼Ñ‹Ð½-Ò®Ò¯Ð´ â†” Ð¥ÑÑ‚Ð°Ð´", covChip3:"Ð¢Ó©Ð¼Ó©Ñ€ Ð·Ð°Ð¼ / ÐÐ²Ñ‚Ð¾ ÑÐ¾Ð½Ð³Ð¾Ð»Ñ‚",
          covChip4:"Ð“Ð°Ð´Ð°Ð°Ð´ pickup", covChip5:"Cross-trade", covChip6:"ÐžÐ»Ð¾Ð½ ÑˆÐ°Ñ‚Ð½Ñ‹ tracking",

          globeTitle:"Ð¥Ð°Ð¼Ñ€Ð°Ñ… Ñ…Ò¯Ñ€ÑÑÐ½Ð¸Ð¹ Ð·ÑƒÑ€Ð°Ð³",
          globeSub:"Ð¥Ó©Ð½Ð³Ó©Ð½ canvas globe. Ð§Ð¸Ð³Ð»ÑÐ» ÑÐ¾Ð½Ð³Ð¾Ñ…Ð¾Ð´ trade lane Ñ‚Ð¾Ð´Ð¾Ñ€Ð½Ð¾.",
          globeTag:"Ð˜Ð½Ñ‚ÐµÑ€Ð°ÐºÑ‚Ð¸Ð²",
          route1:"ÐœÐ â†” Ð¥Ð",
          route2:"ÐÐ·Ð¸ â†” Ð•Ð²Ñ€Ð¾Ð¿",
          route3:"Ð”ÑÐ»Ñ…Ð¸Ð¹Ð½ ÑÒ¯Ð»Ð¶ÑÑ",

          learningTitle:"Ð¡ÑƒÑ€Ð°Ð»Ñ†Ð°Ñ… Ñ…ÑÑ€ÑÐ³ÑÑÐ»",
          learningSub:"IncotermsÂ® 2020 Ñ…Ð°Ñ€ÑŒÑ†ÑƒÑƒÐ»Ð°Ð»Ñ‚ + Ñ…ÑƒÑ€Ð´Ð°Ð½ CBM Ñ‚Ð¾Ð¾Ñ†Ð¾Ð¾Ð»ÑƒÑƒÑ€.",

          incTitle:"IncotermsÂ® 2020 â€” Ñ…Ð°Ñ€Ð¸ÑƒÑ†Ð»Ð°Ð³Ñ‹Ð½ Ñ…ÑƒÐ²Ð°Ð°Ñ€Ð¸Ð»Ð°Ð»Ñ‚",
          incTag:"Ð¥ÑÐ»Ð±Ð°Ñ€ Ð´Ò¯Ñ€ÑÐ»ÑÐ»",
          incSub:"ÐÑÑ€ Ñ‚Ð¾Ð¼ÑŒÑ‘Ð¾ ÑÐ¾Ð½Ð³Ð¾. Timeline Ð½ÑŒ Ð°Ð»ÑŒ ÑˆÐ°Ñ‚Ð°Ð½Ð´ Ð¥Ð£Ð”ÐÐ›Ð”ÐÐ“Ð§/Ð¥Ð£Ð”ÐÐ›Ð”ÐÐ ÐÐ’ÐÐ“Ð§ Ñ…Ð°Ñ€Ð¸ÑƒÑ†Ð°Ñ…Ñ‹Ð³ Ñ…Ð°Ñ€ÑƒÑƒÐ»Ð½Ð° (Ð³ÑÑ€ÑÑÐ³ÑÑÑ€ÑÑ Ð±Ð°Ñ‚Ð°Ð»Ð³Ð°Ð°Ð¶ÑƒÑƒÐ»Ð½Ð° ÑƒÑƒ).",
          tlSeller:"Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð³Ñ‡",
          tlBuyer:"Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð½ Ð°Ð²Ð°Ð³Ñ‡",
          legendSeller:"Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð³Ñ‡ Ñ…Ð°Ñ€Ð¸ÑƒÑ†Ð½Ð°",
          legendBuyer:"Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð½ Ð°Ð²Ð°Ð³Ñ‡ Ñ…Ð°Ñ€Ð¸ÑƒÑ†Ð½Ð°",

          cbmTitle:"CBM Ñ‚Ð¾Ð¾Ñ†Ð¾Ð¾Ð»ÑƒÑƒÑ€",
          cbmTag:"Ð¨ÑƒÑƒÐ´",
          cbmSub:"ÐÑÐ³ Ñ…Ð°Ð¹Ñ€Ñ†Ð³Ð¸Ð¹Ð½ Ñ…ÑÐ¼Ð¶ÑÑÑ Ð¾Ñ€ÑƒÑƒÐ»Ð°Ð°Ð´, Ñ…Ð°Ð¹Ñ€Ñ†Ð°Ð³Ð½Ñ‹ Ñ‚Ð¾Ð¾Ð³ Ð½ÑÐ¼. ÐÑÐ³Ð¶Ð¸Ð¹Ð³ ÑÐ¾Ð»ÑŒÐ¶ Ð±Ð¾Ð»Ð½Ð¾.",
          cbmL:"Ð£Ñ€Ñ‚", cbmW:"Ó¨Ñ€Ð³Ó©Ð½", cbmH:"Ó¨Ð½Ð´Ó©Ñ€", cbmC:"Ð¥Ð°Ð¹Ñ€Ñ†Ð°Ð³", cbmUnit:"ÐÑÐ³Ð¶",
          uCM:"Ð¡Ð°Ð½Ñ‚Ð¸Ð¼ÐµÑ‚Ñ€ (cm)", uM:"ÐœÐµÑ‚Ñ€ (m)", uIN:"Ð˜Ð½Ñ‡ (in)",
          cbmNote:"CBM = (Ð£Ñ€Ñ‚ Ã— Ó¨Ñ€Ð³Ó©Ð½ Ã— Ó¨Ð½Ð´Ó©Ñ€) Ã— Ñ…Ð°Ð¹Ñ€Ñ†Ð°Ð³",
          cbmHint:"Ð—Ó©Ð²Ð»Ó©Ð³Ó©Ó©: Air freight-Ð´ volumetric weight Ð½ÑŒ Ð¸Ñ…ÑÐ²Ñ‡Ð»ÑÐ½ cmÂ³ / 6000 (carrier-ÑÑÑ Ñ…Ð°Ð¼Ð°Ð°Ñ€Ñ‡ Ó©Ó©Ñ€).",

          contactTitle:"Ð¥Ð¾Ð»Ð±Ð¾Ð¾ Ð±Ð°Ñ€Ð¸Ñ…",
          contactSub:"ÐœÐ°Ñ€ÑˆÑ€ÑƒÑ‚ + Ð°Ñ‡Ð°Ð° + Ñ…ÑƒÐ³Ð°Ñ†Ð°Ð° Ð¸Ð»Ð³ÑÑ â€” Ñ…ÑƒÑ€Ð´Ð°Ð½ Ñ…Ð°Ñ€Ð¸Ñƒ Ó©Ð³Ð½Ó©.",
          contactBandTitle:"Ò®Ð½Ð¸Ð¹Ð½ ÑÐ°Ð½Ð°Ð» Ñ…ÑƒÑ€Ð´Ð°Ð½ Ð°Ð²Ð°Ñ… ÑƒÑƒ?",
          contactBandSub:"WhatsApp ÑÑÐ²ÑÐ» Viber â€” Ñ…Ð°Ð¼Ð³Ð¸Ð¹Ð½ Ñ…ÑƒÑ€Ð´Ð°Ð½.",
          rights:"Ð‘Ò¯Ñ… ÑÑ€Ñ… Ñ…ÑƒÑƒÐ»Ð¸Ð°Ñ€ Ñ…Ð°Ð¼Ð³Ð°Ð°Ð»Ð°Ð³Ð´ÑÐ°Ð½.",

          drawerTitle:"Ò®Ð½Ð¸Ð¹Ð½ ÑÐ°Ð½Ð°Ð» Ð°Ð²Ð°Ñ…",
          drawerSub:"30 ÑÐµÐºÑƒÐ½Ð´ÑÐ´ Ð±Ó©Ð³Ð»Ó© â€” Ñ…ÑƒÑ€Ð´Ð°Ð½ Ñ…Ð°Ñ€Ð¸Ñƒ Ó©Ð³Ð½Ó©.",
          fName:"ÐÑÑ€", fCompany:"Ð‘Ð°Ð¹Ð³ÑƒÑƒÐ»Ð»Ð°Ð³Ð°", fRoute:"ÐœÐ°Ñ€ÑˆÑ€ÑƒÑ‚", fCargo:"ÐÑ‡Ð°Ð°", fWeight:"Ð–Ð¸Ð½ / Ð¥ÑÐ¼Ð¶ÑÑ", fTimeline:"Ð¥ÑƒÐ³Ð°Ñ†Ð°Ð°", fContact:"Ð¥Ð¾Ð»Ð±Ð¾Ð³Ð´Ð¾Ñ… Ñ…ÑÐ»Ð±ÑÑ€", fNotes:"ÐÑÐ¼ÑÐ»Ñ‚ Ñ‚ÑÐ¼Ð´ÑÐ³Ð»ÑÐ»",
          t1:"Ð¯ÐÐ ÐÐ›Ð¢ÐÐ™", t2:"1 Ð´Ð¾Ð»Ð¾Ð¾ Ñ…Ð¾Ð½Ð¾Ð³Ñ‚", t3:"2 Ð´Ð¾Ð»Ð¾Ð¾ Ñ…Ð¾Ð½Ð¾Ð³Ñ‚", t4:"Ð£ÑÐ½ Ñ…Ð°Ñ‚Ð°Ð½",
          send:"Ð˜Ð»Ð³ÑÑÑ…",
          privacy:"Ð­Ð½Ñ Ð¼ÑÐ´ÑÑÐ»Ð»Ð¸Ð¹Ð³ Ð·Ó©Ð²Ñ…Ó©Ð½ Ñ‚Ð°Ð½Ð´ Ñ…Ð°Ñ€Ð¸Ñƒ Ó©Ð³Ó©Ñ…Ó©Ð´ Ð°ÑˆÐ¸Ð³Ð»Ð°Ð½Ð°."
        }
      };

      // Coverage notes
      const notes = {
        en: {
          core1:"Fast coordination for UB â†” Erenhot flows: timing, partners, clean handover.",
          core2:"Support for Zamiin-Uud border flows: docs, updates, exception handling.",
          core3:"Choose rail or road based on cost/speed/reliability and cargo requirements.",
          g1:"Overseas pickup coordination via partners â€” align timelines and handover steps.",
          g2:"Cross-trade support when origin and destination are in different countries.",
          g3:"Multi-leg tracking alignment so you always know the next step."
        },
        mn: {
          core1:"Ð£Ð‘ â†” Ð­Ñ€ÑÑÐ½Ð¸Ð¹ Ñ‡Ð¸Ð³Ð»ÑÐ»Ð´: Ñ…ÑƒÐ³Ð°Ñ†Ð°Ð°, Ñ‚Ò¯Ð½Ñˆ, Ð´Ð°Ð¼Ð¶ÑƒÑƒÐ»Ð°Ð»Ñ‚ â€” Ð¾Ð¹Ð»Ð³Ð¾Ð¼Ð¶Ñ‚Ð¾Ð¹ Ð·Ð¾Ñ…Ð¸Ñ†ÑƒÑƒÐ»Ð°Ð»Ñ‚.",
          core2:"Ð—Ð°Ð¼Ñ‹Ð½-Ò®Ò¯Ð´ ÑƒÑ€ÑÐ³Ð°Ð»: Ð±Ð°Ñ€Ð¸Ð¼Ñ‚, Ð¼ÑÐ´ÑÑÐ»ÑÐ», Ð°ÑÑƒÑƒÐ´Ð°Ð» ÑˆÐ¸Ð¹Ð´ÑÐ»Ñ‚Ð¸Ð¹Ð½ Ð´ÑÐ¼Ð¶Ð»ÑÐ³.",
          core3:"Ð¢Ó©Ð¼Ó©Ñ€ Ð·Ð°Ð¼/Ð°Ð²Ñ‚Ð¾ â€” Ò¯Ð½Ñ, Ñ…ÑƒÑ€Ð´, Ð½Ð°Ð¹Ð´Ð²Ð°Ñ€Ñ‚Ð°Ð¹ Ð±Ð°Ð¹Ð´Ð»Ð°Ð°Ñ€ ÑÐ¾Ð½Ð³Ð¾Ð»Ñ‚ Ð³Ð°Ñ€Ð³Ð°Ð½Ð°.",
          g1:"Ð“Ð°Ð´Ð°Ð°Ð´ pickup-Ð¸Ð¹Ð³ Ñ‚Ò¯Ð½ÑˆÑÑÑ€ ÑƒÑÐ»Ð´ÑƒÑƒÐ»Ð¶, Ñ…ÑƒÐ³Ð°Ñ†Ð°Ð° Ð±Ð° Ð´Ð°Ð¼Ð¶ÑƒÑƒÐ»Ð°Ð»Ñ‚Ñ‹Ð³ Ñ‚Ð¾Ñ…Ð¸Ñ€ÑƒÑƒÐ»Ð½Ð°.",
          g2:"Cross-trade â€” Ð³Ð°Ñ€Ð°Ð»/Ð¾Ñ‡Ð¸Ñ… ÑƒÐ»Ñ Ó©Ó©Ñ€ Ò¯ÐµÐ´ Ð´ÑÐ¼Ð¶Ð»ÑÐ³ Ò¯Ð·Ò¯Ò¯Ð»Ð½Ñ.",
          g3:"ÐžÐ»Ð¾Ð½ ÑˆÐ°Ñ‚Ð½Ñ‹ tracking â€” Ð´Ð°Ñ€Ð°Ð°Ð³Ð¸Ð¹Ð½ Ð°Ð»Ñ…Ð¼Ñ‹Ð³ Ò¯Ñ€Ð³ÑÐ»Ð¶ Ð¼ÑÐ´Ð´ÑÐ³ Ð±Ð°Ð¹Ð½Ð°."
        }
      };

      // Route notes for globe pills
      const routeNotes = {
        en: {
          mngchn:"Core lanes focusing on Mongolia â†” China: border handover, timing, clean docs.",
          asiaeu:"Multi-leg lanes across Asia â†” Europe via partner network (road/rail/ocean/air).",
          global:"Flexible global lanes â€” pickup, cross-trade, and end-to-end coordination."
        },
        mn: {
          mngchn:"ÐœÐ¾Ð½Ð³Ð¾Ð» â†” Ð¥ÑÑ‚Ð°Ð´: Ñ…Ð¸Ð» Ð´ÑÑÑ€Ñ… Ð´Ð°Ð¼Ð¶ÑƒÑƒÐ»Ð°Ð»Ñ‚, Ñ…ÑƒÐ³Ð°Ñ†Ð°Ð°, Ð±Ð°Ñ€Ð¸Ð¼Ñ‚ Ð±Ð¸Ñ‡Ð³Ð¸Ð¹Ð½ Ñ†ÑÐ²ÑÑ€ Ð·Ð¾Ñ…Ð¸Ñ†ÑƒÑƒÐ»Ð°Ð»Ñ‚.",
          asiaeu:"ÐÐ·Ð¸ â†” Ð•Ð²Ñ€Ð¾Ð¿ Ð¾Ð»Ð¾Ð½ ÑˆÐ°Ñ‚Ñ‚Ð°Ð¹ Ñ‡Ð¸Ð³Ð»ÑÐ» â€” Ñ‚Ò¯Ð½ÑˆÐ¸Ð¹Ð½ ÑÒ¯Ð»Ð¶ÑÑÐ³ÑÑÑ€ (Ð°Ð²Ñ‚Ð¾/Ñ‚Ó©Ð¼Ó©Ñ€ Ð·Ð°Ð¼/ÑƒÑÐ°Ð½/Ð°Ð³Ð°Ð°Ñ€).",
          global:"Ð”ÑÐ»Ñ…Ð¸Ð¹Ð½ ÑƒÑÐ½ Ñ…Ð°Ñ‚Ð°Ð½ ÑÒ¯Ð»Ð¶ÑÑ â€” pickup, cross-trade, ÑÑ…Ð»ÑÐ»ÑÑÑ Ñ‚Ó©Ð³ÑÐ³Ó©Ð» Ñ…Ò¯Ñ€Ñ‚ÑÐ»."
        }
      };

      function setLang(lang){
        localStorage.setItem("bs_lang", lang);
        document.documentElement.lang = (lang === "mn") ? "mn" : "en";
        document.querySelectorAll("[data-i18n]").forEach(el=>{
          const key = el.getAttribute("data-i18n");
          if(dict[lang] && dict[lang][key]) el.textContent = dict[lang][key];
        });
        document.getElementById("lang-en").classList.toggle("active", lang==="en");
        document.getElementById("lang-mn").classList.toggle("active", lang==="mn");
        refreshCoverageNotes(lang);
        refreshRouteNote(lang);
        refreshIncotermsText(lang);
        refreshCBMLabels(lang);
      }

      function setTheme(theme){
        localStorage.setItem("bs_theme", theme);
        document.documentElement.setAttribute("data-theme", theme);
        const btn = document.getElementById("theme-toggle");
        btn.textContent = (theme === "dark") ? "â˜€ï¸" : "ðŸŒ™";
      }

      // Tabs
      function initTabs(){
        const tabs = document.querySelectorAll(".tab");
        tabs.forEach(btn=>{
          btn.addEventListener("click", ()=>{
            tabs.forEach(t=>t.classList.remove("active"));
            document.querySelectorAll(".panel").forEach(p=>p.classList.remove("active"));
            btn.classList.add("active");
            const id = btn.getAttribute("data-tab");
            const panel = document.getElementById(id);
            if(panel) panel.classList.add("active");
          });
        });
      }

      // Coverage chips
      function chipGroup(rootId, noteId){
        const root = document.getElementById(rootId);
        if(!root) return;
        root.addEventListener("click", (e)=>{
          const t = e.target.closest(".covChip");
          if(!t) return;
          root.querySelectorAll(".covChip").forEach(c=>c.classList.remove("active"));
          t.classList.add("active");
          const key = t.getAttribute("data-note");
          const lang = localStorage.getItem("bs_lang") || "en";
          const target = document.getElementById(noteId);
          if(target) target.textContent = notes[lang][key] || "";
        });
      }

      function refreshCoverageNotes(lang){
        const core = document.querySelector("#coreChips .covChip.active");
        const glob = document.querySelector("#globalChips .covChip.active");
        if(core) document.getElementById("coreNote").textContent = notes[lang][core.getAttribute("data-note")] || "";
        if(glob) document.getElementById("globalNote").textContent = notes[lang][glob.getAttribute("data-note")] || "";
      }

      // Reveal
      function initReveal(){
        if(window.__bsRevealInit) return;
        window.__bsRevealInit = true;
        const targets = document.querySelectorAll(".reveal");
        const io = new IntersectionObserver((entries)=>{
          entries.forEach(en=>{
            if(en.isIntersecting) en.target.classList.add("in");
          });
        }, {threshold:0.14});
        targets.forEach(t=>io.observe(t));
      }

      // Micro interactions: button pointer ripple origin
      function initButtonMotion(){
        document.querySelectorAll(".btn").forEach(btn=>{
          btn.addEventListener("pointermove", (e)=>{
            const r = btn.getBoundingClientRect();
            const x = ((e.clientX - r.left) / r.width) * 100;
            const y = ((e.clientY - r.top) / r.height) * 100;
            btn.style.setProperty("--rx", x + "%");
            btn.style.setProperty("--ry", y + "%");
          });
        });
      }

      // Subtle card tilt
      function initCardTilt(){
        document.querySelectorAll(".card").forEach(card=>{
          card.addEventListener("pointermove",(e)=>{
            const r = card.getBoundingClientRect();
            const px = (e.clientX - r.left) / r.width;
            const py = (e.clientY - r.top) / r.height;
            const rx = (py - 0.5) * -6;
            const ry = (px - 0.5) * 8;
            card.style.transform = `translateY(-10px) rotateX(${rx}deg) rotateY(${ry}deg)`;
          });
          card.addEventListener("pointerleave",()=>{
            card.style.transform = "";
          });
        });
      }

      // Quote drawer
      function initDrawer(){
        const overlay = document.getElementById("drawerOverlay");
        const drawer = document.getElementById("drawer");
        const open1 = document.getElementById("openQuote");
        const open2 = document.getElementById("openQuote2");
        const close = document.getElementById("closeDrawer");

        function open(){
          overlay.classList.add("open");
          drawer.classList.add("open");
          overlay.setAttribute("aria-hidden","false");
          drawer.setAttribute("aria-hidden","false");
          document.body.style.overflow = "hidden";
          setTimeout(()=>{ drawer.querySelector("input")?.focus(); }, 60);
        }
        function shut(){
          overlay.classList.remove("open");
          drawer.classList.remove("open");
          overlay.setAttribute("aria-hidden","true");
          drawer.setAttribute("aria-hidden","true");
          document.body.style.overflow = "";
        }

        open1.addEventListener("click", open);
        open2.addEventListener("click", open);
        close.addEventListener("click", shut);
        overlay.addEventListener("click", shut);
        document.addEventListener("keydown",(e)=>{ if(e.key==="Escape") shut(); });

        // Build WhatsApp/Viber message
        const form = document.getElementById("quoteForm");
        const wa = document.getElementById("sendWhatsApp");
        const vb = document.getElementById("sendViber");

        function buildMessage(){
          const data = new FormData(form);
          const name = data.get("name") || "";
          const company = data.get("company") || "";
          const route = data.get("route") || "";
          const cargo = data.get("cargo") || "";
          const weight = data.get("weight") || "";
          const timeline = data.get("timeline") || "";
          const notesTxt = data.get("notes") || "";

          const msg =
`Quote request â€” Baatar Shipping
Name: ${name}
Company: ${company}
Route: ${route}
Cargo: ${cargo}
Weight/Volume: ${weight}
Timeline: ${timeline}
Notes: ${notesTxt}`.trim();

          return encodeURIComponent(msg);
        }

        function refreshLinks(){
          const msg = buildMessage();
          wa.href = `https://wa.me/97699887055?text=${msg}`;
          vb.href = `viber://forward?text=${msg}`;
        }

        form.addEventListener("input", refreshLinks);
        refreshLinks();

        form.addEventListener("submit",(e)=>{
          e.preventDefault();
          refreshLinks();
          window.open(wa.href, "_blank");
        });
      }

      /* ---------------- NEW FEATURE: Animated Globe ---------------- */
      function initGlobe(){

        function initGlobe(){
  const canvas = document.getElementById("globe");
  const wrap = document.getElementById("globeWrap");
  if(!canvas || !wrap) return;

  const ctx = canvas.getContext("2d", { alpha:true });

  // Tooltip elements
  const tip = document.getElementById("globeTip");
  const tipTitle = document.getElementById("tipTitle");
  const tipSub = document.getElementById("tipSub");
  const tipTag1 = document.getElementById("tipTag1");
  const tipTag2 = document.getElementById("tipTag2");
  const tipClose = document.getElementById("tipClose");

  tipClose?.addEventListener("click", ()=>{
    tip.style.display = "none";
  });

  // HiDPI fit
  function fit(){
    const dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
    const css = canvas.getBoundingClientRect();
    const s = Math.floor(Math.min(css.width, css.height));
    canvas.width = Math.floor(s * dpr);
    canvas.height = Math.floor(s * dpr);
    ctx.setTransform(dpr,0,0,dpr,0,0);
  }
  fit();
  window.addEventListener("resize", fit);

  const state = {
    route: localStorage.getItem("bs_route") || "mngchn",
    t: 0,
    rotDrag: 0,       // degrees
    isDown: false,
    downX: 0,
    downRot: 0,
    moved: false,
    selectedCity: localStorage.getItem("bs_city") || "Ulaanbaatar"
  };

  // Cities (requested)
  const points = [
    {name:"Ulaanbaatar", labelEN:"Ulaanbaatar (UB)", labelMN:"Ð£Ð»Ð°Ð°Ð½Ð±Ð°Ð°Ñ‚Ð°Ñ€ (Ð£Ð‘)", lat:47.9, lon:106.9, kind:"Hub"},
    {name:"Beijing",     labelEN:"Beijing",          labelMN:"Ð‘ÑÑÐ¶Ð¸Ð½",         lat:39.9042, lon:116.4074, kind:"Hub"},
    {name:"Tianjin",     labelEN:"Tianjin",          labelMN:"Ð¢ÑÐ½ÑŒÐ¶Ð¸Ð½",        lat:39.0851, lon:117.1994, kind:"Port"},
    {name:"Istanbul",    labelEN:"Istanbul",         labelMN:"Ð˜ÑÑ‚Ð°Ð½Ð±ÑƒÐ»",       lat:41.0082, lon:28.9784,  kind:"Hub"},
    {name:"New York",    labelEN:"New York",         labelMN:"ÐÑŒÑŽ-Ð™Ð¾Ñ€Ðº",       lat:40.7128, lon:-74.0060, kind:"Hub"},
    {name:"Berlin",      labelEN:"Berlin",           labelMN:"Ð‘ÐµÑ€Ð»Ð¸Ð½",         lat:52.5200, lon:13.4050,  kind:"Hub"},
    {name:"Seoul",       labelEN:"Seoul",            labelMN:"Ð¡Ó©Ò¯Ð»",           lat:37.5665, lon:126.9780, kind:"Hub"},
    {name:"Cape Town",   labelEN:"Cape Town",        labelMN:"ÐšÐµÐ¹Ð¿Ñ‚Ð°ÑƒÐ½",       lat:-33.9249, lon:18.4241, kind:"Port"},
    {name:"Melbourne",   labelEN:"Melbourne",        labelMN:"ÐœÐµÐ»ÑŒÐ±ÑƒÑ€Ð½",       lat:-37.8136, lon:144.9631, kind:"Port"}
  ];

  // Lanes (simple demo lanes)
  const routes = {
    mngchn: [
      ["Ulaanbaatar","Beijing"],
      ["Beijing","Tianjin"],
      ["Ulaanbaatar","Tianjin"]
    ],
    asiaeu: [
      ["Seoul","Beijing"],
      ["Beijing","Istanbul"],
      ["Istanbul","Berlin"]
    ],
    global: [
      ["Ulaanbaatar","Seoul"],
      ["Berlin","New York"],
      ["Istanbul","Cape Town"],
      ["Seoul","Melbourne"]
    ]
  };

  function findPoint(name){
    return points.find(p=>p.name===name);
  }

  // lat/lon -> 3D unit sphere
  function project3(lat, lon, rotDeg){
    const phi = (90 - lat) * Math.PI/180;
    const theta = (lon + rotDeg) * Math.PI/180;
    const x = Math.sin(phi) * Math.cos(theta);
    const y = Math.cos(phi);
    const z = Math.sin(phi) * Math.sin(theta);
    return {x,y,z};
  }

  // Store latest 2D projections so click can pick nearest point
  let latest2D = [];

  function showTip(cityName){
    const lang = localStorage.getItem("bs_lang") || "en";
    const p = findPoint(cityName);
    if(!p || !tip) return;

    const title = (lang==="mn") ? p.labelMN : p.labelEN;
    tipTitle.textContent = title;
    tipSub.textContent =
      (lang==="mn")
        ? `ÐšÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚: ${p.lat.toFixed(2)}, ${p.lon.toFixed(2)}`
        : `Coordinates: ${p.lat.toFixed(2)}, ${p.lon.toFixed(2)}`;

    tipTag1.textContent = (lang==="mn") ? "Ð¡Ò¯Ð»Ð¶ÑÑ" : "Lane";
    tipTag2.textContent = (lang==="mn") ? p.kind==="Port" ? "Ð‘Ð¾Ð¾Ð¼Ñ‚" : "Ð¢Ó©Ð² Ñ†ÑÐ³" : p.kind;

    tip.style.display = "block";
  }

  function draw(){
    const w = canvas.getBoundingClientRect().width;
    const h = canvas.getBoundingClientRect().height;
    const cx = w/2, cy = h/2;
    const R = Math.min(w,h)*0.38;

    ctx.clearRect(0,0,w,h);

    // Background glow
    const grd = ctx.createRadialGradient(cx, cy, R*0.2, cx, cy, R*1.25);
    grd.addColorStop(0, "rgba(71,230,177,.14)");
    grd.addColorStop(0.45, "rgba(200,155,60,.10)");
    grd.addColorStop(1, "rgba(255,79,216,0)");
    ctx.fillStyle = grd;
    ctx.beginPath();
    ctx.arc(cx,cy,R*1.25,0,Math.PI*2);
    ctx.fill();

    // Globe body
    const dark = document.documentElement.getAttribute("data-theme")==="dark";
    const g2 = ctx.createRadialGradient(cx - R*0.25, cy - R*0.25, R*0.2, cx, cy, R);
    g2.addColorStop(0, dark ? "rgba(255,255,255,.10)" : "rgba(255,255,255,.75)");
    g2.addColorStop(1, dark ? "rgba(255,255,255,.03)" : "rgba(255,255,255,.38)");
    ctx.fillStyle = g2;
    ctx.strokeStyle = dark ? "rgba(255,255,255,.18)" : "rgba(11,28,45,.10)";
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.arc(cx,cy,R,0,Math.PI*2);
    ctx.fill();
    ctx.stroke();

    // Clip to globe for grid + lanes
    ctx.save();
    ctx.beginPath();
    ctx.arc(cx,cy,R,0,Math.PI*2);
    ctx.clip();

    // Lat lines
    ctx.strokeStyle = dark ? "rgba(255,255,255,.10)" : "rgba(11,28,45,.08)";
    for(let i=-60;i<=60;i+=20){
      const yy = cy + (i/90)*R*0.9;
      ctx.beginPath();
      ctx.ellipse(cx, yy, R*0.95, R*0.25, 0, 0, Math.PI*2);
      ctx.stroke();
    }
    // Lon lines (animated)
    for(let i=0;i<12;i++){
      const ang = (i/12)*Math.PI*2 + state.t*0.15;
      ctx.beginPath();
      ctx.ellipse(cx, cy, R*Math.abs(Math.cos(ang)), R, 0, 0, Math.PI*2);
      ctx.stroke();
    }

    const rot = (state.t*18) + state.rotDrag;

    // Convert 3D to 2D
    function to2D(p3){
      const x = cx + p3.x * R;
      const y = cy + p3.y * R;
      const front = p3.z > 0;
      const a = front ? 1 : 0.20;
      return {x,y,front,a,z:p3.z};
    }

    // Draw lanes
    const lane = routes[state.route] || [];
    lane.forEach(([aName,bName], idx)=>{
      const a = findPoint(aName), b = findPoint(bName);
      if(!a || !b) return;

      const A = to2D(project3(a.lat,a.lon,rot));
      const B = to2D(project3(b.lat,b.lon,rot));
      const alpha = Math.min(A.a, B.a);

      const mx = (A.x+B.x)/2;
      const my = (A.y+B.y)/2 - R*0.18;

      ctx.strokeStyle = `rgba(200,155,60,${0.20 + alpha*0.55})`;
      ctx.lineWidth = 3;
      ctx.beginPath();
      ctx.moveTo(A.x,A.y);
      ctx.quadraticCurveTo(mx,my,B.x,B.y);
      ctx.stroke();

      ctx.strokeStyle = `rgba(71,230,177,${0.10 + alpha*0.30})`;
      ctx.lineWidth = 1.6;
      ctx.beginPath();
      ctx.moveTo(A.x,A.y);
      ctx.quadraticCurveTo(mx,my,B.x,B.y);
      ctx.stroke();

      // moving dot
      const tt = (state.t*0.28 + idx*0.22) % 1;
      const qx = (1-tt)*(1-tt)*A.x + 2*(1-tt)*tt*mx + tt*tt*B.x;
      const qy = (1-tt)*(1-tt)*A.y + 2*(1-tt)*tt*my + tt*tt*B.y;

      ctx.fillStyle = `rgba(255,79,216,${0.25 + alpha*0.60})`;
      ctx.beginPath();
      ctx.arc(qx,qy,3.2,0,Math.PI*2);
      ctx.fill();
    });

    // Cities (store projected positions for click picking)
    latest2D = points.map(p=>{
      const P = to2D(project3(p.lat,p.lon,rot));
      const isSel = (p.name === state.selectedCity);
      const r = isSel ? (P.front ? 5.2 : 3.2) : (P.front ? 4.0 : 2.6);

      // city dot
      ctx.fillStyle = isSel
        ? `rgba(200,155,60,${0.35 + P.a*0.65})`
        : `rgba(74,111,165,${0.22 + P.a*0.70})`;

      ctx.beginPath();
      ctx.arc(P.x,P.y,r,0,Math.PI*2);
      ctx.fill();

      // city halo
      if(P.front){
        ctx.strokeStyle = isSel
          ? `rgba(200,155,60,${0.16 + P.a*0.30})`
          : `rgba(255,79,216,${0.08 + P.a*0.22})`;
        ctx.beginPath();
        ctx.arc(P.x,P.y,r+6,0,Math.PI*2);
        ctx.stroke();
      }

      return {name:p.name, x:P.x, y:P.y, front:P.front, alpha:P.a};
    });

    ctx.restore();

    // If tooltip is open, gently keep it anchored near selected city (when visible & front)
    if(tip && tip.style.display !== "none"){
      const target = latest2D.find(x=>x.name===state.selectedCity && x.front);
      if(target){
        // position inside wrap
        const pad = 12;
        const tw = 270; // approximate
        const th = 130; // approximate
        let left = target.x + 14;
        let top = target.y - 12;

        // clamp
        left = Math.max(pad, Math.min(left, w - tw - pad));
        top = Math.max(pad, Math.min(top, h - th - pad));

        tip.style.left = left + "px";
        tip.style.top = top + "px";
      }
    }

    state.t += 0.0125;
    requestAnimationFrame(draw);
  }

  draw();

  // Route pills
  const root = document.getElementById("routePills");
  if(root){
    root.addEventListener("click",(e)=>{
      const pill = e.target.closest(".routePill");
      if(!pill) return;
      root.querySelectorAll(".routePill").forEach(x=>x.classList.remove("active"));
      pill.classList.add("active");
      state.route = pill.getAttribute("data-route");
      localStorage.setItem("bs_route", state.route);
      refreshRouteNote(localStorage.getItem("bs_lang") || "en");
    });
  }

  // Drag rotate
  wrap.addEventListener("pointerdown",(e)=>{
    state.isDown = true;
    state.downX = e.clientX;
    state.downRot = state.rotDrag;
    state.moved = false;
    wrap.setPointerCapture?.(e.pointerId);
  });

  wrap.addEventListener("pointermove",(e)=>{
    if(!state.isDown) return;
    const dx = e.clientX - state.downX;
    state.rotDrag = state.downRot + (dx * 0.25); // degrees per px
    if(Math.abs(dx) > 6) state.moved = true;
  });

  wrap.addEventListener("pointerup",(e)=>{
    state.isDown = false;

    // Treat as click if not moved much
    if(!state.moved){
      const rect = canvas.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;

      // Pick nearest FRONT city within threshold
      let best = null;
      let bestD = Infinity;
      latest2D.forEach(p=>{
        if(!p.front) return;
        const dx = p.x - x, dy = p.y - y;
        const d = Math.sqrt(dx*dx + dy*dy);
        if(d < bestD){
          bestD = d;
          best = p;
        }
      });

      // threshold: scale with globe size
      const thr = Math.max(14, rect.width * 0.045);

      if(best && bestD <= thr){
        state.selectedCity = best.name;
        localStorage.setItem("bs_city", best.name);
        showTip(best.name);
      } else {
        // click empty -> hide tip
        tip.style.display = "none";
      }
    }

    state.moved = false;
  });

  // On load: show selected city tooltip once
  setTimeout(()=>{
    showTip(state.selectedCity);
  }, 250);
}

        const canvas = document.getElementById("globe");
        if(!canvas) return;
        const ctx = canvas.getContext("2d", { alpha:true });

        // HiDPI
        function fit(){
          const dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
          const cssSize = canvas.getBoundingClientRect();
          const s = Math.floor(Math.min(cssSize.width, cssSize.height));
          canvas.width = Math.floor(s * dpr);
          canvas.height = Math.floor(s * dpr);
          ctx.setTransform(dpr,0,0,dpr,0,0);
        }
        fit();
        window.addEventListener("resize", fit);

        const state = {
          route: localStorage.getItem("bs_route") || "mngchn",
          t: 0
        };

        // Simple lat/lon points for visual anchors (not a â€œreal mapâ€, but feels like a globe)
        const points = [
          {name:"Ulaanbaatar", lat:47.9, lon:106.9},
          {name:"Erenhot", lat:43.65, lon:111.98},
          {name:"Beijing", lat:39.9, lon:116.4},
          {name:"Tianjin", lat:39.1, lon:117.2},
          {name:"Istanbul", lat:41.0, lon:28.9},
          {name:"Frankfurt", lat:50.1, lon:8.6},
          {name:"Singapore", lat:1.35, lon:103.8},
          {name:"Busan", lat:35.1, lon:129.0}
        ];

        const routes = {
          mngchn: [
            ["Ulaanbaatar","Erenhot"],
            ["Erenhot","Beijing"],
            ["Beijing","Tianjin"]
          ],
          asiaeu: [
            ["Busan","Singapore"],
            ["Singapore","Istanbul"],
            ["Istanbul","Frankfurt"]
          ],
          global: [
            ["Ulaanbaatar","Singapore"],
            ["Beijing","Frankfurt"],
            ["Busan","Istanbul"]
          ]
        };

        function project(lat, lon, rot){
          // lat/lon to 3D unit sphere
          const phi = (90 - lat) * Math.PI/180;
          const theta = (lon + rot) * Math.PI/180;
          const x = Math.sin(phi) * Math.cos(theta);
          const y = Math.cos(phi);
          const z = Math.sin(phi) * Math.sin(theta);
          return {x,y,z};
        }

        function findPoint(name){
          return points.find(p=>p.name===name);
        }

        function draw(){
          const w = canvas.getBoundingClientRect().width;
          const h = canvas.getBoundingClientRect().height;
          const cx = w/2, cy = h/2;
          const R = Math.min(w,h)*0.38;

          ctx.clearRect(0,0,w,h);

          // Back glow
          const grd = ctx.createRadialGradient(cx, cy, R*0.2, cx, cy, R*1.25);
          grd.addColorStop(0, "rgba(71,230,177,.14)");
          grd.addColorStop(0.45, "rgba(200,155,60,.10)");
          grd.addColorStop(1, "rgba(255,79,216,0)");
          ctx.fillStyle = grd;
          ctx.beginPath();
          ctx.arc(cx,cy,R*1.25,0,Math.PI*2);
          ctx.fill();

          // Globe body
          const g2 = ctx.createRadialGradient(cx - R*0.25, cy - R*0.25, R*0.2, cx, cy, R);
          const dark = document.documentElement.getAttribute("data-theme")==="dark";
          g2.addColorStop(0, dark ? "rgba(255,255,255,.10)" : "rgba(255,255,255,.75)");
          g2.addColorStop(1, dark ? "rgba(255,255,255,.03)" : "rgba(255,255,255,.38)");
          ctx.fillStyle = g2;
          ctx.strokeStyle = dark ? "rgba(255,255,255,.18)" : "rgba(11,28,45,.10)";
          ctx.lineWidth = 1;
          ctx.beginPath();
          ctx.arc(cx,cy,R,0,Math.PI*2);
          ctx.fill();
          ctx.stroke();

          // Lat lines
          ctx.save();
          ctx.beginPath();
          ctx.arc(cx,cy,R,0,Math.PI*2);
          ctx.clip();
          ctx.strokeStyle = dark ? "rgba(255,255,255,.10)" : "rgba(11,28,45,.08)";
          for(let i=-60;i<=60;i+=20){
            const yy = cy + (i/90)*R*0.9;
            ctx.beginPath();
            ctx.ellipse(cx, yy, R*0.95, R*0.25, 0, 0, Math.PI*2);
            ctx.stroke();
          }
          // Lon lines
          for(let i=0;i<12;i++){
            const ang = (i/12)*Math.PI*2 + state.t*0.15;
            ctx.beginPath();
            ctx.ellipse(cx, cy, R*Math.abs(Math.cos(ang)), R, 0, 0, Math.PI*2);
            ctx.stroke();
          }

          // Draw points + routes
          const rot = state.t*18; // degrees
          const lane = routes[state.route] || [];

          function to2D(p3){
            const x = cx + p3.x * R;
            const y = cy + p3.y * R;
            const front = p3.z > 0;
            const a = front ? 1 : 0.25;
            return {x,y,front,a,z:p3.z};
          }

          // Routes
          lane.forEach(([aName,bName], idx)=>{
            const a = findPoint(aName), b = findPoint(bName);
            if(!a||!b) return;

            const A3 = project(a.lat,a.lon,rot);
            const B3 = project(b.lat,b.lon,rot);

            const A = to2D(A3), B = to2D(B3);
            const alpha = Math.min(A.a, B.a);

            // Curved arc
            const mx = (A.x+B.x)/2;
            const my = (A.y+B.y)/2 - R*0.18;
            ctx.strokeStyle = `rgba(200,155,60,${0.25 + alpha*0.55})`;
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(A.x,A.y);
            ctx.quadraticCurveTo(mx,my,B.x,B.y);
            ctx.stroke();

            // Neon highlight
            ctx.strokeStyle = `rgba(71,230,177,${0.12 + alpha*0.35})`;
            ctx.lineWidth = 1.6;
            ctx.beginPath();
            ctx.moveTo(A.x,A.y);
            ctx.quadraticCurveTo(mx,my,B.x,B.y);
            ctx.stroke();

            // Moving dot along arc
            const tt = (state.t*0.28 + idx*0.22) % 1;
            const qx = (1-tt)*(1-tt)*A.x + 2*(1-tt)*tt*mx + tt*tt*B.x;
            const qy = (1-tt)*(1-tt)*A.y + 2*(1-tt)*tt*my + tt*tt*B.y;

            ctx.fillStyle = `rgba(255,79,216,${0.35 + alpha*0.55})`;
            ctx.beginPath();
            ctx.arc(qx,qy,3.2,0,Math.PI*2);
            ctx.fill();
          });

          // Points
          points.forEach(p=>{
            const P3 = project(p.lat,p.lon,rot);
            const P = to2D(P3);
            const r = P.front ? 3.6 : 2.2;
            ctx.fillStyle = `rgba(74,111,165,${0.20 + P.a*0.70})`;
            ctx.beginPath();
            ctx.arc(P.x,P.y,r,0,Math.PI*2);
            ctx.fill();

            if(P.front){
              ctx.strokeStyle = `rgba(255,79,216,${0.10 + P.a*0.25})`;
              ctx.beginPath();
              ctx.arc(P.x,P.y,r+5,0,Math.PI*2);
              ctx.stroke();
            }
          });

          ctx.restore();

          state.t += 0.0125;
          requestAnimationFrame(draw);
        }

        draw();

        // Route pills
        const root = document.getElementById("routePills");
        if(root){
          root.addEventListener("click",(e)=>{
            const pill = e.target.closest(".routePill");
            if(!pill) return;
            root.querySelectorAll(".routePill").forEach(x=>x.classList.remove("active"));
            pill.classList.add("active");
            state.route = pill.getAttribute("data-route");
            localStorage.setItem("bs_route", state.route);
            refreshRouteNote(localStorage.getItem("bs_lang") || "en");
          });
        }
      }

      function refreshRouteNote(lang){
        const active = document.querySelector("#routePills .routePill.active");
        const key = active ? active.getAttribute("data-route") : (localStorage.getItem("bs_route")||"mngchn");
        const el = document.getElementById("routeNote");
        if(el) el.textContent = (routeNotes[lang] && routeNotes[lang][key]) ? routeNotes[lang][key] : "";
      }

      /* ---------------- NEW FEATURE: Incoterms Visual ---------------- */
      const incoterms = {
        EXW: {
          ratio: 12, // seller share %
          en: {
            title:"EXW â€” Ex Works",
            desc:"Seller makes goods available at their premises. Buyer handles pickup, export, main carriage, import, and delivery.",
            steps:[
              ["Origin pickup","Buyer"],
              ["Export clearance","Buyer"],
              ["Main transport","Buyer"],
              ["Import clearance","Buyer"],
              ["Final delivery","Buyer"]
            ]
          },
          mn: {
            title:"EXW â€” Ò®Ð¹Ð»Ð´Ð²ÑÑ€ÑÑÑ (Ex Works)",
            desc:"Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð³Ñ‡ Ð±Ð°Ñ€Ð°Ð°Ð³ Ó©Ó©Ñ€Ð¸Ð¹Ð½ Ð±Ð°Ð¹Ñ€Ð»Ð°Ð» Ð´ÑÑÑ€ Ð±ÑÐ»ÑÐ½ Ð±Ð¾Ð»Ð³Ð¾Ð½Ð¾. Ð¢Ð°Ñ‚Ð°Ð»Ñ‚, ÑÐºÑÐ¿Ð¾Ñ€Ñ‚, Ò¯Ð½Ð´ÑÑÐ½ Ñ‚ÑÑÐ²ÑÑ€, Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚, Ñ…Ò¯Ñ€Ð³ÑÐ»Ñ‚Ð¸Ð¹Ð³ Ñ…ÑƒÐ´Ð°Ð»Ð´Ð°Ð½ Ð°Ð²Ð°Ð³Ñ‡ Ñ…Ð°Ñ€Ð¸ÑƒÑ†Ð½Ð°.",
            steps:[
              ["Ð­Ñ…Ð»ÑÐ» Ñ‚Ð°Ñ‚Ð°Ð»Ñ‚","Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð½ Ð°Ð²Ð°Ð³Ñ‡"],
              ["Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð±Ò¯Ñ€Ð´Ò¯Ò¯Ð»ÑÐ»Ñ‚","Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð½ Ð°Ð²Ð°Ð³Ñ‡"],
              ["Ò®Ð½Ð´ÑÑÐ½ Ñ‚ÑÑÐ²ÑÑ€","Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð½ Ð°Ð²Ð°Ð³Ñ‡"],
              ["Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚ Ð±Ò¯Ñ€Ð´Ò¯Ò¯Ð»ÑÐ»Ñ‚","Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð½ Ð°Ð²Ð°Ð³Ñ‡"],
              ["Ð­Ñ†ÑÐ¸Ð¹Ð½ Ñ…Ò¯Ñ€Ð³ÑÐ»Ñ‚","Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð½ Ð°Ð²Ð°Ð³Ñ‡"]
            ]
          }
        },
        FOB: {
          ratio: 35,
          en: {
            title:"FOB â€” Free On Board (Sea/Waterway)",
            desc:"Seller delivers goods on board the vessel at the port of shipment. Buyer takes risk/cost after loading.",
            steps:[
              ["Origin pickup","Seller"],
              ["Export clearance","Seller"],
              ["Main transport","Buyer"],
              ["Import clearance","Buyer"],
              ["Final delivery","Buyer"]
            ]
          },
          mn: {
            title:"FOB â€” Ð£ÑÐ°Ð½ Ð¾Ð½Ð³Ð¾Ñ†Ð¾Ð½Ð´ Ñ…Ò¯Ñ€Ð³ÑÐ½ (Free On Board)",
            desc:"Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð³Ñ‡ Ð±Ð°Ñ€Ð°Ð°Ð³ Ð°Ñ‡Ð¸Ñ… Ð±Ð¾Ð¾Ð¼Ñ‚Ð¾Ð´ Ð¾Ð½Ð³Ð¾Ñ†Ð¾Ð½Ð´ Ð°Ñ‡Ð¸Ð¶ Ó©Ð³Ð½Ó©. ÐÑ‡ÑÐ°Ð½Ñ‹ Ð´Ð°Ñ€Ð°Ð°Ñ… ÑÑ€ÑÐ´ÑÐ»/Ð·Ð°Ñ€Ð´Ð»Ñ‹Ð³ Ñ…ÑƒÐ´Ð°Ð»Ð´Ð°Ð½ Ð°Ð²Ð°Ð³Ñ‡ Ñ…Ð°Ñ€Ð¸ÑƒÑ†Ð½Ð°.",
            steps:[
              ["Ð­Ñ…Ð»ÑÐ» Ñ‚Ð°Ñ‚Ð°Ð»Ñ‚","Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð³Ñ‡"],
              ["Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð±Ò¯Ñ€Ð´Ò¯Ò¯Ð»ÑÐ»Ñ‚","Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð³Ñ‡"],
              ["Ò®Ð½Ð´ÑÑÐ½ Ñ‚ÑÑÐ²ÑÑ€","Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð½ Ð°Ð²Ð°Ð³Ñ‡"],
              ["Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚ Ð±Ò¯Ñ€Ð´Ò¯Ò¯Ð»ÑÐ»Ñ‚","Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð½ Ð°Ð²Ð°Ð³Ñ‡"],
              ["Ð­Ñ†ÑÐ¸Ð¹Ð½ Ñ…Ò¯Ñ€Ð³ÑÐ»Ñ‚","Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð½ Ð°Ð²Ð°Ð³Ñ‡"]
            ]
          }
        },
        CIF: {
          ratio: 55,
          en: {
            title:"CIF â€” Cost, Insurance & Freight (Sea/Waterway)",
            desc:"Seller arranges and pays ocean freight + minimum insurance to destination port. Risk typically transfers when loaded on vessel (Incoterms rules apply).",
            steps:[
              ["Origin pickup","Seller"],
              ["Export clearance","Seller"],
              ["Main transport","Seller"],
              ["Import clearance","Buyer"],
              ["Final delivery","Buyer"]
            ]
          },
          mn: {
            title:"CIF â€” Ó¨Ñ€Ñ‚Ó©Ð³, Ð´Ð°Ð°Ñ‚Ð³Ð°Ð», Ñ‚ÑÑÐ²ÑÑ€ (Cost, Insurance & Freight)",
            desc:"Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð³Ñ‡ Ð´Ð°Ð»Ð°Ð¹Ð½ Ñ‚ÑÑÐ²ÑÑ€ Ð±Ð¾Ð»Ð¾Ð½ Ñ…Ð°Ð¼Ð³Ð¸Ð¹Ð½ Ð±Ð°Ð³Ð° Ð´Ð°Ð°Ñ‚Ð³Ð°Ð»Ñ‹Ð³ Ð·Ð¾Ñ…Ð¸Ð¾Ð½ Ð±Ð°Ð¹Ð³ÑƒÑƒÐ»Ð¶ Ñ‚Ó©Ð»Ð½Ó©. Ð­Ñ€ÑÐ´ÑÐ» Ð¸Ñ…ÑÐ²Ñ‡Ð»ÑÐ½ Ð¾Ð½Ð³Ð¾Ñ†Ð¾Ð½Ð´ Ð°Ñ‡Ð¸Ñ… Ò¯ÐµÐ´ ÑˆÐ¸Ð»Ð¶Ð¸Ð½Ñ (Incoterms Ð¶ÑƒÑ€Ð¼Ð°Ð°Ñ€).",
            steps:[
              ["Ð­Ñ…Ð»ÑÐ» Ñ‚Ð°Ñ‚Ð°Ð»Ñ‚","Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð³Ñ‡"],
              ["Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð±Ò¯Ñ€Ð´Ò¯Ò¯Ð»ÑÐ»Ñ‚","Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð³Ñ‡"],
              ["Ò®Ð½Ð´ÑÑÐ½ Ñ‚ÑÑÐ²ÑÑ€","Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð³Ñ‡"],
              ["Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚ Ð±Ò¯Ñ€Ð´Ò¯Ò¯Ð»ÑÐ»Ñ‚","Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð½ Ð°Ð²Ð°Ð³Ñ‡"],
              ["Ð­Ñ†ÑÐ¸Ð¹Ð½ Ñ…Ò¯Ñ€Ð³ÑÐ»Ñ‚","Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð½ Ð°Ð²Ð°Ð³Ñ‡"]
            ]
          }
        },
        DAP: {
          ratio: 78,
          en: {
            title:"DAP â€” Delivered At Place",
            desc:"Seller delivers to named place (ready for unloading). Buyer handles import clearance and duties/taxes unless agreed otherwise.",
            steps:[
              ["Origin pickup","Seller"],
              ["Export clearance","Seller"],
              ["Main transport","Seller"],
              ["Import clearance","Buyer"],
              ["Final delivery","Seller"]
            ]
          },
          mn: {
            title:"DAP â€” Ð¢Ð¾Ð´Ð¾Ñ€Ñ…Ð¾Ð¹ Ð³Ð°Ð·Ð°Ñ€Ñ‚ Ñ…Ò¯Ñ€Ð³ÑÐ¶ Ó©Ð³Ó©Ñ… (Delivered At Place)",
            desc:"Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð³Ñ‡ Ð½ÑÑ€Ð»ÑÑÑÐ½ Ð³Ð°Ð·Ð°Ñ€Ñ‚ (Ð±ÑƒÑƒÐ»Ð³Ð°Ñ…Ð°Ð´ Ð±ÑÐ»ÑÐ½) Ñ…Ò¯Ñ€Ð³ÑÐ½Ñ. Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚Ñ‹Ð½ Ð±Ò¯Ñ€Ð´Ò¯Ò¯Ð»ÑÐ»Ñ‚, Ñ‚Ð°Ñ‚Ð²Ð°Ñ€/Ñ…ÑƒÑ€Ð°Ð°Ð¼Ð¶Ð¸Ð¹Ð³ Ñ…ÑƒÐ´Ð°Ð»Ð´Ð°Ð½ Ð°Ð²Ð°Ð³Ñ‡ Ñ…Ð°Ñ€Ð¸ÑƒÑ†Ð½Ð° (Ó©Ó©Ñ€Ó©Ó©Ñ€ Ñ‚Ð¾Ñ…Ð¸Ñ€Ð¾Ð¾Ð³Ò¯Ð¹ Ð±Ð¾Ð»).",
            steps:[
              ["Ð­Ñ…Ð»ÑÐ» Ñ‚Ð°Ñ‚Ð°Ð»Ñ‚","Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð³Ñ‡"],
              ["Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð±Ò¯Ñ€Ð´Ò¯Ò¯Ð»ÑÐ»Ñ‚","Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð³Ñ‡"],
              ["Ò®Ð½Ð´ÑÑÐ½ Ñ‚ÑÑÐ²ÑÑ€","Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð³Ñ‡"],
              ["Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚ Ð±Ò¯Ñ€Ð´Ò¯Ò¯Ð»ÑÐ»Ñ‚","Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð½ Ð°Ð²Ð°Ð³Ñ‡"],
              ["Ð­Ñ†ÑÐ¸Ð¹Ð½ Ñ…Ò¯Ñ€Ð³ÑÐ»Ñ‚","Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð³Ñ‡"]
            ]
          }
        },
        DDP: {
          ratio: 95,
          en: {
            title:"DDP â€” Delivered Duty Paid",
            desc:"Seller handles delivery including import clearance and duties/taxes (highest seller responsibility).",
            steps:[
              ["Origin pickup","Seller"],
              ["Export clearance","Seller"],
              ["Main transport","Seller"],
              ["Import clearance","Seller"],
              ["Final delivery","Seller"]
            ]
          },
          mn: {
            title:"DDP â€” Ð¢Ð°Ñ‚Ð²Ð°Ñ€ Ñ‚Ó©Ð»ÑÓ©Ð½ Ñ…Ò¯Ñ€Ð³ÑÐ»Ñ‚ (Delivered Duty Paid)",
            desc:"Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð³Ñ‡ Ñ…Ò¯Ñ€Ð³ÑÐ»Ñ‚Ð¸Ð¹Ð³ Ð±Ò¯Ñ€ÑÐ½ Ñ…Ð°Ñ€Ð¸ÑƒÑ†Ð½Ð°: Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ñ‹Ð½ Ð±Ò¯Ñ€Ð´Ò¯Ò¯Ð»ÑÐ»Ñ‚, Ñ‚Ð°Ñ‚Ð²Ð°Ñ€/Ñ…ÑƒÑ€Ð°Ð°Ð¼Ð¶Ð¸Ð¹Ð³ Ñ…Ò¯Ñ€Ñ‚ÑÐ» (Ñ…Ð°Ð¼Ð³Ð¸Ð¹Ð½ Ó©Ð½Ð´Ó©Ñ€ Ñ…Ð°Ñ€Ð¸ÑƒÑ†Ð»Ð°Ð³Ð°).",
            steps:[
              ["Ð­Ñ…Ð»ÑÐ» Ñ‚Ð°Ñ‚Ð°Ð»Ñ‚","Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð³Ñ‡"],
              ["Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð±Ò¯Ñ€Ð´Ò¯Ò¯Ð»ÑÐ»Ñ‚","Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð³Ñ‡"],
              ["Ò®Ð½Ð´ÑÑÐ½ Ñ‚ÑÑÐ²ÑÑ€","Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð³Ñ‡"],
              ["Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚ Ð±Ò¯Ñ€Ð´Ò¯Ò¯Ð»ÑÐ»Ñ‚","Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð³Ñ‡"],
              ["Ð­Ñ†ÑÐ¸Ð¹Ð½ Ñ…Ò¯Ñ€Ð³ÑÐ»Ñ‚","Ð¥ÑƒÐ´Ð°Ð»Ð´Ð°Ð³Ñ‡"]
            ]
          }
        }
      };

      function initIncoterms(){
        const row = document.getElementById("termRow");
        if(!row) return;
        row.addEventListener("click",(e)=>{
          const b = e.target.closest(".termBtn");
          if(!b) return;
          row.querySelectorAll(".termBtn").forEach(x=>x.classList.remove("active"));
          b.classList.add("active");
          const term = b.getAttribute("data-term");
          localStorage.setItem("bs_term", term);
          renderTerm(term, localStorage.getItem("bs_lang") || "en");
        });

        const saved = localStorage.getItem("bs_term") || "EXW";
        const btn = row.querySelector(`.termBtn[data-term="${saved}"]`);
        if(btn){
          row.querySelectorAll(".termBtn").forEach(x=>x.classList.remove("active"));
          btn.classList.add("active");
        }
        renderTerm(saved, localStorage.getItem("bs_lang") || "en");
      }

      function renderTerm(term, lang){
        const data = incoterms[term] || incoterms.EXW;
        const segSeller = document.getElementById("segSeller");
        const segBuyer = document.getElementById("segBuyer");
        if(segSeller && segBuyer){
          const s = Math.max(0, Math.min(100, data.ratio));
          segSeller.style.width = s + "%";
          segBuyer.style.width = (100 - s) + "%";
        }

        const steps = document.getElementById("termSteps");
        if(steps){
          steps.innerHTML = "";
          const arr = data[lang]?.steps || data.en.steps;
          arr.forEach(([name, who])=>{
            const div = document.createElement("div");
            div.className = "step";
            const b = document.createElement("b");
            b.textContent = name;
            const sp = document.createElement("span");
            sp.textContent = who;
            div.appendChild(b);
            div.appendChild(sp);
            steps.appendChild(div);
          });
        }

        // Update explanatory line for selected term (small but clear)
        const panel = document.getElementById("termPanel");
        if(panel){
          // Insert or update a description paragraph under the timeline
          let p = panel.querySelector("[data-term-desc]");
          if(!p){
            p = document.createElement("div");
            p.setAttribute("data-term-desc","1");
            p.style.marginTop = "10px";
            p.style.color = "var(--muted)";
            p.style.fontSize = "12.5px";
            p.style.lineHeight = "1.45";
            panel.appendChild(p);
          }
          const obj = data[lang] || data.en;
          p.textContent = obj.title + " â€” " + obj.desc;
        }
      }

      function refreshIncotermsText(lang){
        const term = localStorage.getItem("bs_term") || "EXW";
        renderTerm(term, lang);
      }

      /* ---------------- NEW FEATURE: CBM Calculator ---------------- */
      function initCBM(){
        const L = document.getElementById("cbmL");
        const W = document.getElementById("cbmW");
        const H = document.getElementById("cbmH");
        const C = document.getElementById("cbmC");
        const U = document.getElementById("cbmUnit");
        if(!L||!W||!H||!C||!U) return;

        const out = document.getElementById("cbmOut");
        const each = document.getElementById("cbmEach");
        const cft = document.getElementById("cbmCft");

        function toMeters(v, unit){
          const x = Number(v) || 0;
          if(unit==="m") return x;
          if(unit==="cm") return x / 100;
          if(unit==="in") return x * 0.0254;
          return x;
        }

        function calc(){
          const unit = U.value;
          const l = toMeters(L.value, unit);
          const w = toMeters(W.value, unit);
          const h = toMeters(H.value, unit);
          const cartons = Math.max(1, Number(C.value) || 1);

          const per = (l*w*h);
          const total = per * cartons;

          if(out) out.textContent = `${total.toFixed(3)} CBM`;
          if(each) each.textContent = `Each: ${per.toFixed(3)} mÂ³`;
          if(cft){
            const ft3 = total * 35.3146667;
            cft.textContent = `${ft3.toFixed(2)} ftÂ³`;
          }
        }

        ["input","change"].forEach(ev=>{
          L.addEventListener(ev, calc);
          W.addEventListener(ev, calc);
          H.addEventListener(ev, calc);
          C.addEventListener(ev, calc);
          U.addEventListener(ev, calc);
        });

        calc();
      }

      function refreshCBMLabels(lang){
        // (labels are already handled by data-i18n) - this ensures option text updates correctly.
        const unitSel = document.getElementById("cbmUnit");
        if(!unitSel) return;
        // Re-apply i18n for option text already done by setLang, but keep safe:
        unitSel.querySelectorAll("option").forEach(opt=>{
          const key = opt.getAttribute("data-i18n");
          if(key && dict[lang] && dict[lang][key]) opt.textContent = dict[lang][key];
        });
      }

      /* ---------------- Boot ---------------- */
      document.getElementById("lang-en").addEventListener("click", ()=>setLang("en"));
      document.getElementById("lang-mn").addEventListener("click", ()=>setLang("mn"));
      document.getElementById("theme-toggle").addEventListener("click", ()=>{
        const cur = localStorage.getItem("bs_theme") || "light";
        setTheme(cur === "dark" ? "light" : "dark");
      });

      initTabs();
      chipGroup("coreChips","coreNote");
      chipGroup("globalChips","globalNote");
      initReveal();
      initButtonMotion();
      initCardTilt();
      initDrawer();

      // New features
      initGlobe();
      initIncoterms();
      initCBM();

      // Load saved settings
      setTheme(localStorage.getItem("bs_theme") || "light");
      setLang(localStorage.getItem("bs_lang") || "en");

      // Ensure route note & defaults
      refreshRouteNote(localStorage.getItem("bs_lang") || "en");
    })();
  </script>
</body>
</html>
