<!doctype html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Baatar Shipping ‚Äî Moving Trade Forward</title>
  <meta name="description" content="Baatar Shipping ‚Äî Mongolia ‚Üî China ‚Üî Global logistics coordination. Fast response, clear communication, trusted partners."/>

  <style>
    :root{
      --navy:#071a2c;
      --navy2:#0c2a4a;
      --navy3:#103b66;
      --gold:#c89b3c;
      --steel:#4a6fa5;

      --pink:#ff4fd8;
      --mint:#47e6b1;
      --ice:#cfe8ff;

      --bg:#eef4ff;
      --card:#ffffff;
      --text:#071a2c;
      --muted:#536273;
      --line:rgba(7,26,44,.10);

      --shadow:0 18px 45px rgba(7,26,44,.12);
      --shadow2:0 34px 120px rgba(7,26,44,.22);

      --r:22px;
      --max:1320px;
    }

    /* DARK MODE */
    [data-theme="dark"]{
      --bg:#050812;
      --card: rgba(255,255,255,.06);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.62);
      --line: rgba(255,255,255,.14);
      --shadow:0 18px 55px rgba(0,0,0,.55);
      --shadow2:0 40px 140px rgba(0,0,0,.72);
    }

    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "SF Pro Display", "SF Pro Text", Segoe UI, Roboto, Arial;
      color:var(--text);
      background:
        radial-gradient(1400px 700px at 8% -15%, rgba(255,79,216,.18), transparent 60%),
        radial-gradient(1300px 700px at 92% -10%, rgba(71,230,177,.16), transparent 58%),
        radial-gradient(1100px 650px at 12% 110%, rgba(200,155,60,.10), transparent 62%),
        radial-gradient(1000px 620px at 92% 105%, rgba(74,111,165,.14), transparent 60%),
        linear-gradient(180deg, rgba(8,28,50,.06), transparent 35%),
        var(--bg);
      transition: background .35s ease, color .25s ease;
      overflow-x:hidden;
    }

    a{color:inherit}
    .wrap{
      width:min(var(--max), 94vw);
      margin:0 auto;
      padding:18px 0 92px;
    }

    /* Subtle stage to remove ‚Äúawkward empty sides‚Äù */
    .stage{
      width:min(var(--max), 96vw);
      margin: 18px auto 0;
      border-radius: 34px;
      border:1px solid var(--line);
      background:
        radial-gradient(1200px 700px at 0% 0%, rgba(12,42,74,.10), transparent 55%),
        radial-gradient(1200px 700px at 100% 0%, rgba(16,59,102,.09), transparent 55%),
        linear-gradient(180deg, rgba(255,255,255,.70), rgba(255,255,255,.60));
      box-shadow: 0 30px 140px rgba(7,26,44,.10);
      overflow:hidden;
    }
    [data-theme="dark"] .stage{
      background:
        radial-gradient(1200px 700px at 0% 0%, rgba(255,79,216,.10), transparent 55%),
        radial-gradient(1200px 700px at 100% 0%, rgba(71,230,177,.08), transparent 55%),
        linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.04));
      border-color: rgba(255,255,255,.10);
      box-shadow: 0 40px 180px rgba(0,0,0,.45);
    }

    /* TOP */
    .top{
      position:sticky; top:0; z-index:60;
      backdrop-filter:saturate(160%) blur(14px);
      background: rgba(244,248,255,.58);
      border-bottom:1px solid rgba(7,26,44,.08);
      transition: background .25s ease, border-color .25s ease;
    }
    [data-theme="dark"] .top{
      background: rgba(5,8,18,.62);
      border-bottom:1px solid rgba(255,255,255,.10);
    }
    .topInner{
      width:min(var(--max), 96vw);
      margin:0 auto;
      padding:14px 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }

    .brand{
      display:flex; align-items:flex-start; gap:12px;
    }
    .mark{
      width:40px; height:40px;
      border-radius:14px;
      background:
        radial-gradient(18px 18px at 28% 32%, rgba(255,79,216,.45), transparent 55%),
        radial-gradient(20px 20px at 70% 22%, rgba(71,230,177,.35), transparent 60%),
        radial-gradient(22px 22px at 60% 70%, rgba(200,155,60,.35), transparent 60%),
        linear-gradient(135deg, rgba(7,26,44,.95), rgba(12,42,74,.92));
      box-shadow: 0 16px 50px rgba(7,26,44,.18);
      border:1px solid rgba(255,255,255,.22);
      position:relative;
      overflow:hidden;
    }
    [data-theme="dark"] .mark{ border-color: rgba(255,255,255,.10); }
    .mark::after{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(160px 60px at 10% 0%, rgba(255,255,255,.20), transparent 60%);
      transform: rotate(12deg);
      pointer-events:none;
    }

    .brandText{display:flex; flex-direction:column; line-height:1.02}
    .brandText b{
      letter-spacing:.12em;
      font-size:14px; /* bigger logo */
      text-transform:uppercase;
    }
    .brandText span{
      font-size:12px;
      color:var(--muted);
      margin-top:3px;
    }

    .nav{
      display:flex; align-items:center; gap:8px;
      flex-wrap:wrap; justify-content:flex-end;
    }
    .nav a{
      text-decoration:none;
      font-size:13px;
      color:var(--muted);
      padding:8px 10px;
      border-radius:999px;
      border:1px solid transparent;
      transition:transform .18s ease, background .18s ease, border-color .18s ease;
    }
    .nav a:hover{
      background: rgba(255,255,255,.70);
      border-color: var(--line);
      transform: translateY(-1px);
    }
    [data-theme="dark"] .nav a:hover{ background: rgba(255,255,255,.08); }

    .controls{display:flex; gap:8px; align-items:center; padding-left:4px;}
    .pillBtn{
      border:1px solid var(--line);
      background: rgba(255,255,255,.78);
      border-radius:999px;
      padding:7px 10px;
      font-size:12px;
      cursor:pointer;
      transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease, background .18s ease;
      color: var(--text);
      user-select:none;
    }
    [data-theme="dark"] .pillBtn{ background: rgba(255,255,255,.08); }
    .pillBtn:hover{
      transform:translateY(-1px);
      box-shadow:0 12px 26px rgba(7,26,44,.10);
    }
    .pillBtn.active{
      border-color: rgba(200,155,60,.55);
      box-shadow:0 12px 26px rgba(200,155,60,.12);
    }

    /* HERO */
    .hero{
      margin: 18px auto 0;
      border-radius: 34px;
      border:1px solid var(--line);
      background:
        radial-gradient(1100px 520px at 10% 0%, rgba(255,79,216,.18), transparent 55%),
        radial-gradient(1000px 520px at 90% 10%, rgba(71,230,177,.14), transparent 55%),
        radial-gradient(900px 520px at 40% -5%, rgba(200,155,60,.14), transparent 55%),
        linear-gradient(180deg, rgba(255,255,255,.88) 0%, rgba(245,248,255,.82) 100%);
      box-shadow:var(--shadow);
      overflow:hidden;
      position:relative;
    }
    [data-theme="dark"] .hero{
      background:
        radial-gradient(1100px 520px at 10% 0%, rgba(255,79,216,.16), transparent 55%),
        radial-gradient(1000px 520px at 90% 10%, rgba(71,230,177,.12), transparent 55%),
        radial-gradient(900px 520px at 40% -5%, rgba(200,155,60,.12), transparent 55%),
        linear-gradient(180deg, rgba(255,255,255,.07) 0%, rgba(255,255,255,.04) 100%);
    }

    .heroGrid{
      display:grid;
      grid-template-columns: 1.1fr .95fr;
      gap:22px;
      padding: 52px 28px 28px;
      align-items:center;
    }

    .kicker{
      display:inline-flex; align-items:center; gap:10px;
      font-size:12px; color:var(--muted);
      letter-spacing:.05em; text-transform:uppercase;
    }
    .kdot{
      width:10px; height:10px; border-radius:50%;
      background: linear-gradient(135deg, var(--steel), var(--gold));
      box-shadow:0 14px 28px rgba(200,155,60,.22);
    }

    h1{
      margin:10px 0 10px;
      font-size: clamp(40px, 4.6vw, 64px);
      letter-spacing:-.04em;
      line-height:1.01;
    }
    .lead{
      margin:0;
      color:var(--muted);
      font-size:15px;
      max-width:64ch;
      line-height:1.55;
    }

    .mini{
      margin-top:14px;
      color: var(--muted);
      font-size: 12.5px;
      max-width: 60ch;
      opacity:.95;
    }

    .chips{display:flex; flex-wrap:wrap; gap:10px; margin-top:18px}
    .chip{
      font-size:12px;
      padding:8px 12px;
      border-radius:999px;
      background: rgba(7,26,44,.06);
      border:1px solid var(--line);
      transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease, background .18s ease;
      cursor:default;
    }
    [data-theme="dark"] .chip{ background: rgba(255,255,255,.06); }
    .chip:hover{
      transform:translateY(-2px);
      box-shadow:0 16px 40px rgba(7,26,44,.12);
      border-color:rgba(200,155,60,.35);
    }

    .heroCtas{display:flex; flex-wrap:wrap; gap:10px; margin-top:18px}
    .btn{
      display:inline-flex; align-items:center; justify-content:center;
      padding:12px 16px;
      border-radius:999px;
      text-decoration:none;
      font-weight:650;
      font-size:13px;
      border:1px solid var(--line);
      transition:transform .18s ease, box-shadow .18s ease, filter .18s ease;
      position:relative;
      overflow:hidden;
      will-change: transform;
      user-select:none;
    }
    .btn.primary{
      background: linear-gradient(135deg, var(--navy), var(--navy2));
      border-color:transparent;
      color:#fff;
      box-shadow: 0 18px 70px rgba(7,26,44,.20);
    }
    .btn.primary:hover{ transform:translateY(-2px); filter:brightness(1.06) }
    .btn.ghost{
      background: rgba(255,255,255,.80);
      color: var(--text);
    }
    [data-theme="dark"] .btn.ghost{ background: rgba(255,255,255,.10); }
    .btn.ghost:hover{ transform:translateY(-2px); box-shadow:0 18px 50px rgba(7,26,44,.12) }

    /* Ripple origin */
    .btn::after{
      content:"";
      position:absolute;
      left: var(--rx, 50%);
      top: var(--ry, 50%);
      width: 0;
      height: 0;
      border-radius: 999px;
      transform: translate(-50%, -50%);
      background: rgba(255,255,255,.35);
      pointer-events:none;
    }
    .btn:active::after{
      width: 260px; height: 260px;
      transition: width .35s ease, height .35s ease;
    }

    /* HERO VISUAL: Apple-style interactive globe card */
    .heroVisual{
      border-radius: 30px;
      border:1px solid var(--line);
      background:
        radial-gradient(700px 380px at 15% 20%, rgba(16,59,102,.14), transparent 60%),
        radial-gradient(700px 380px at 85% 20%, rgba(71,230,177,.12), transparent 60%),
        radial-gradient(700px 380px at 55% 70%, rgba(255,79,216,.10), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.85), rgba(245,248,255,.72));
      box-shadow: 0 22px 80px rgba(7,26,44,.12);
      height: 320px;
      position:relative;
      overflow:hidden;
      display:flex;
      flex-direction:column;
    }
    [data-theme="dark"] .heroVisual{
      background:
        radial-gradient(700px 380px at 15% 20%, rgba(16,59,102,.20), transparent 60%),
        radial-gradient(700px 380px at 85% 20%, rgba(71,230,177,.14), transparent 60%),
        radial-gradient(700px 380px at 55% 70%, rgba(255,79,216,.12), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.05));
      box-shadow: 0 28px 110px rgba(0,0,0,.55);
    }

    .hvTop{
      padding:14px 14px 10px;
      display:flex; align-items:center; justify-content:space-between; gap:12px;
    }
    .hvTitle{
      display:flex; flex-direction:column; gap:2px;
    }
    .hvTitle b{ font-size:12px; letter-spacing:.08em; text-transform:uppercase; }
    .hvTitle span{ font-size:12px; color:var(--muted); }
    .hvPills{ display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-end; }
    .pill{
      font-size:11px;
      padding:7px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background: rgba(7,26,44,.05);
      color: var(--text);
      display:inline-flex; align-items:center; gap:8px;
    }
    [data-theme="dark"] .pill{ background: rgba(255,255,255,.06); }

    .dotLive{
      width:8px; height:8px; border-radius:50%;
      background: radial-gradient(circle at 30% 30%, rgba(71,230,177,1), rgba(71,230,177,.35));
      box-shadow: 0 0 0 6px rgba(71,230,177,.15);
      animation: livePulse 2.2s ease-in-out infinite;
    }
    @keyframes livePulse{
      0%,100%{ transform: scale(1); opacity:.9 }
      50%{ transform: scale(1.18); opacity:1 }
    }

    .hvCanvasWrap{
      position:relative;
      flex:1;
      padding: 4px 10px 12px;
    }
    canvas#heroGlobe{
      width:100%;
      height:100%;
      display:block;
      border-radius: 24px;
      border:1px solid rgba(255,255,255,.16);
      background:
        radial-gradient(600px 260px at 60% 40%, rgba(7,26,44,.12), transparent 55%),
        radial-gradient(500px 240px at 30% 60%, rgba(200,155,60,.10), transparent 55%),
        radial-gradient(420px 220px at 70% 20%, rgba(255,79,216,.10), transparent 55%),
        linear-gradient(180deg, rgba(7,26,44,.04), rgba(7,26,44,.02));
    }
    [data-theme="dark"] canvas#heroGlobe{
      background:
        radial-gradient(600px 260px at 60% 40%, rgba(0,0,0,.34), transparent 55%),
        radial-gradient(500px 240px at 30% 60%, rgba(200,155,60,.12), transparent 55%),
        radial-gradient(420px 220px at 70% 20%, rgba(255,79,216,.10), transparent 55%),
        linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.03));
      border-color: rgba(255,255,255,.10);
    }

    .tooltip{
      position:absolute;
      pointer-events:none;
      z-index:5;
      transform: translate(-50%, -115%);
      padding:10px 12px;
      border-radius: 14px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.82);
      box-shadow: 0 18px 70px rgba(7,26,44,.14);
      color: var(--text);
      font-size:12px;
      opacity:0;
      transition: opacity .12s ease, transform .12s ease;
      white-space:nowrap;
      backdrop-filter: blur(10px);
    }
    [data-theme="dark"] .tooltip{
      background: rgba(10,14,22,.72);
      border-color: rgba(255,255,255,.12);
      box-shadow: 0 18px 80px rgba(0,0,0,.45);
    }
    .tooltip.show{ opacity:1; transform: translate(-50%, -135%); }
    .tooltip b{ font-weight:800; }
    .tooltip .subt{ color: var(--muted); margin-top:2px; font-size:11px; }

    .lanePill{
      position:absolute;
      left: 22px;
      bottom: 20px;
      z-index:6;
      display:flex; align-items:center; gap:10px;
      padding:10px 12px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.22);
      background:
        radial-gradient(240px 80px at 10% 20%, rgba(255,79,216,.22), transparent 55%),
        radial-gradient(240px 80px at 70% 20%, rgba(71,230,177,.18), transparent 55%),
        linear-gradient(135deg, rgba(7,26,44,.84), rgba(12,42,74,.80));
      color:#fff;
      box-shadow: 0 18px 70px rgba(7,26,44,.22);
      backdrop-filter: blur(10px);
      max-width: calc(100% - 44px);
    }
    .lanePill .miniDot{
      width:10px; height:10px; border-radius:50%;
      background: linear-gradient(135deg, var(--gold), var(--mint));
      box-shadow: 0 0 0 6px rgba(200,155,60,.14);
    }
    .lanePill span{
      font-size:12px;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
    }
    .lanePill button{
      margin-left:auto;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.10);
      color:#fff;
      border-radius: 12px;
      padding:7px 10px;
      cursor:pointer;
      transition: transform .16s ease, background .16s ease;
      font-size:12px;
    }
    .lanePill button:hover{ transform: translateY(-1px); background: rgba(255,255,255,.16); }

    /* SECTIONS */
    .section{margin-top:24px}
    .sectionCard{
      border-radius: 30px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.72);
      box-shadow: 0 18px 70px rgba(7,26,44,.08);
      padding: 24px;
      position:relative;
      overflow:hidden;
    }
    [data-theme="dark"] .sectionCard{ background: rgba(255,255,255,.06); }

    .sectionCard::before{
      content:"";
      position:absolute; inset:-60px;
      background:
        radial-gradient(600px 260px at 0% 0%, rgba(255,79,216,.10), transparent 60%),
        radial-gradient(620px 260px at 100% 10%, rgba(71,230,177,.09), transparent 60%),
        radial-gradient(520px 260px at 50% 0%, rgba(200,155,60,.08), transparent 60%),
        radial-gradient(700px 360px at 50% 120%, rgba(16,59,102,.10), transparent 60%);
      opacity:.95;
      pointer-events:none;
    }
    .sectionCard > *{ position:relative; z-index:1; }

    .headRow{
      display:flex; align-items:flex-end; justify-content:space-between;
      gap:14px; flex-wrap:wrap;
    }
    .headRow h2{margin:0; font-size:20px; letter-spacing:-.01em}
    .sub{margin:6px 0 0; color:var(--muted); font-size:13px; max-width:80ch; line-height:1.55}

    /* Tabs */
    .tabs{ margin-top:16px; display:flex; gap:10px; flex-wrap:wrap; }
    .tab{
      border:1px solid var(--line);
      background: rgba(255,255,255,.78);
      border-radius:999px;
      padding:10px 12px;
      font-size:12px;
      cursor:pointer;
      transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease, background .18s ease;
      color: var(--text);
      user-select:none;
    }
    [data-theme="dark"] .tab{ background: rgba(255,255,255,.08); }
    .tab:hover{ transform:translateY(-2px); box-shadow:0 16px 40px rgba(7,26,44,.10) }
    .tab.active{ border-color:rgba(200,155,60,.55); box-shadow:0 16px 40px rgba(200,155,60,.12) }

    .tabPanels{margin-top:16px}
    .panel{
      display:none;
      border-radius:24px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.82);
      padding:18px;
    }
    [data-theme="dark"] .panel{ background: rgba(255,255,255,.06); }
    .panel.active{display:block}
    .panelGrid{ display:grid; grid-template-columns: 1fr 1fr; gap:14px; margin-top:12px; }

    /* Cards */
    .cards{
      margin-top:16px;
      display:grid;
      grid-template-columns: repeat(3, minmax(0,1fr));
      gap:14px;
    }
    .card{
      position:relative;
      border-radius:24px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.90);
      padding:16px;
      box-shadow:0 18px 60px rgba(7,26,44,.07);
      transition: transform .22s ease, box-shadow .22s ease, border-color .22s ease;
      overflow:hidden;
      transform-style: preserve-3d;
      will-change: transform;
    }
    [data-theme="dark"] .card{ background: rgba(255,255,255,.06); }
    .card::before{
      content:"";
      position:absolute; top:14px; left:14px;
      width:42px; height:6px;
      border-radius:999px;
      background: linear-gradient(90deg, var(--gold), var(--steel), var(--mint));
      opacity:.92;
    }
    .card:hover{
      transform: translateY(-10px);
      box-shadow: var(--shadow2);
      border-color: rgba(200,155,60,.35);
    }
    .card h3{margin:14px 0 6px; font-size:14px}
    .card p{margin:0; color:var(--muted); font-size:12.5px; line-height:1.5}
    .card .meta{margin-top:10px; display:flex; gap:8px; flex-wrap:wrap}

    .tag{
      font-size:11px;
      padding:7px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background: rgba(7,26,44,.04);
      color: var(--muted);
      user-select:none;
    }
    [data-theme="dark"] .tag{ background: rgba(255,255,255,.06); }
    .cardLink{ text-decoration:none; display:block; }

    /* Coverage */
    .coverageGrid{ margin-top:16px; display:grid; grid-template-columns: 1fr 1fr; gap:14px; }
    .covCard{
      border-radius:24px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.86);
      padding:16px;
      box-shadow:0 18px 60px rgba(7,26,44,.07);
      overflow:hidden;
      position:relative;
    }
    [data-theme="dark"] .covCard{ background: rgba(255,255,255,.06); }
    .covCard::after{
      content:"";
      position:absolute; inset:-40px;
      background:
        radial-gradient(520px 220px at 0% 0%, rgba(16,59,102,.10), transparent 60%),
        radial-gradient(520px 220px at 100% 10%, rgba(71,230,177,.08), transparent 60%);
      pointer-events:none;
      opacity:.9;
    }
    .covCard > *{ position:relative; z-index:1; }

    .covTop{display:flex; align-items:center; justify-content:space-between; gap:10px}
    .covCard h3{margin:0; font-size:14px}
    .covChips{display:flex; gap:8px; flex-wrap:wrap; margin-top:12px}
    .covChip{
      cursor:pointer;
      user-select:none;
      font-size:12px;
      padding:9px 12px;
      border-radius:999px;
      border:1px solid var(--line);
      background: rgba(7,26,44,.04);
      transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease, background .18s ease;
      color: var(--text);
    }
    [data-theme="dark"] .covChip{ background: rgba(255,255,255,.06); }
    .covChip:hover{transform: translateY(-2px); box-shadow:0 16px 40px rgba(7,26,44,.10)}
    .covChip.active{
      background: rgba(200,155,60,.16);
      border-color: rgba(200,155,60,.50);
      box-shadow:0 18px 50px rgba(200,155,60,.12);
    }
    .covNote{ margin-top:12px; color: var(--muted); font-size:12.5px; min-height: 40px; line-height:1.5}

    /* New: Coverage map + learning grid */
    .learnGrid{
      margin-top:14px;
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap:14px;
      align-items:start;
    }
    .panelCard{
      border-radius: 26px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.82);
      box-shadow: 0 18px 60px rgba(7,26,44,.06);
      padding:16px;
      overflow:hidden;
      position:relative;
    }
    [data-theme="dark"] .panelCard{ background: rgba(255,255,255,.06); }

    .panelCard h3{
      margin:0;
      font-size:14px;
      letter-spacing:-.01em;
    }
    .panelCard .small{
      margin:6px 0 0;
      color: var(--muted);
      font-size:12.5px;
      line-height:1.55;
    }

    /* Route Builder */
    .rbTop{
      display:flex; align-items:flex-end; justify-content:space-between; gap:12px; flex-wrap:wrap;
      margin-top:10px;
    }
    .rbPills{ display:flex; gap:8px; flex-wrap:wrap; }
    .rbPill{
      border:1px solid var(--line);
      background: rgba(7,26,44,.04);
      padding:8px 10px;
      border-radius: 999px;
      font-size:12px;
      cursor:pointer;
      user-select:none;
      transition: transform .16s ease, box-shadow .16s ease, border-color .16s ease;
    }
    [data-theme="dark"] .rbPill{ background: rgba(255,255,255,.06); }
    .rbPill:hover{ transform: translateY(-1px); box-shadow:0 14px 30px rgba(7,26,44,.10) }
    .rbPill.active{
      border-color: rgba(200,155,60,.55);
      box-shadow:0 16px 38px rgba(200,155,60,.12);
      background: rgba(200,155,60,.12);
    }

    .laneBig{
      margin-top:12px;
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.18);
      background:
        radial-gradient(500px 160px at 10% 0%, rgba(255,79,216,.20), transparent 60%),
        radial-gradient(500px 160px at 70% 0%, rgba(71,230,177,.16), transparent 60%),
        linear-gradient(135deg, rgba(7,26,44,.92), rgba(12,42,74,.88));
      color:#fff;
      padding:12px;
      display:flex; align-items:center; gap:10px; flex-wrap:wrap;
      box-shadow: 0 18px 70px rgba(7,26,44,.20);
    }
    .laneBig .s{
      font-size:12px; opacity:.9;
    }
    .laneBig b{
      font-size:13px;
      letter-spacing:.01em;
    }
    .laneBig .actions{
      margin-left:auto;
      display:flex; gap:8px; flex-wrap:wrap;
    }
    .laneBig .actions button{
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.10);
      color:#fff;
      border-radius: 14px;
      padding:8px 10px;
      cursor:pointer;
      transition: transform .16s ease, background .16s ease;
      font-size:12px;
    }
    .laneBig .actions button:hover{ transform: translateY(-1px); background: rgba(255,255,255,.16); }

    /* Incoterms premium matrix */
    .filters{
      display:flex; gap:10px; flex-wrap:wrap; align-items:center;
      margin-top:12px;
    }
    .filters select{
      border:1px solid var(--line);
      background: rgba(255,255,255,.85);
      color: var(--text);
      border-radius: 999px;
      padding: 10px 12px;
      font-size: 12px;
      outline:none;
    }
    [data-theme="dark"] .filters select{ background: rgba(255,255,255,.08); }

    .legend{
      display:flex; gap:10px; flex-wrap:wrap; margin-top:10px; color:var(--muted); font-size:12px;
    }
    .lg{
      display:flex; align-items:center; gap:8px;
      padding:8px 10px;
      border:1px solid var(--line);
      background: rgba(7,26,44,.03);
      border-radius: 999px;
      user-select:none;
    }
    [data-theme="dark"] .lg{ background: rgba(255,255,255,.06); }
    .sw{ width:10px; height:10px; border-radius: 4px; }
    .sw.b{ background: rgba(71,230,177,.85); }
    .sw.s{ background: rgba(255,79,216,.80); }
    .sw.m{ background: rgba(200,155,60,.85); }
    .sw.n{ background: rgba(74,111,165,.75); }

    .matrixWrap{
      margin-top:12px;
      border-radius: 22px;
      border:1px solid var(--line);
      overflow:hidden;
      background: rgba(255,255,255,.86);
    }
    [data-theme="dark"] .matrixWrap{ background: rgba(255,255,255,.06); }

    .matrix{
      width:100%;
      border-collapse: separate;
      border-spacing:0;
      min-width: 860px;
    }
    .matrix th, .matrix td{
      padding:10px 10px;
      border-bottom:1px solid var(--line);
      border-right:1px solid var(--line);
      font-size:12px;
      text-align:center;
      background: transparent;
    }
    .matrix th{
      position:sticky;
      top:0;
      z-index:2;
      background:
        radial-gradient(420px 140px at 20% 0%, rgba(255,79,216,.10), transparent 60%),
        radial-gradient(420px 140px at 70% 0%, rgba(71,230,177,.08), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.92), rgba(245,248,255,.78));
      font-weight:800;
      letter-spacing:-.01em;
    }
    [data-theme="dark"] .matrix th{
      background:
        radial-gradient(420px 140px at 20% 0%, rgba(255,79,216,.12), transparent 60%),
        radial-gradient(420px 140px at 70% 0%, rgba(71,230,177,.10), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.05));
    }
    .matrix th:first-child, .matrix td:first-child{
      position:sticky;
      left:0;
      z-index:3;
      text-align:left;
      font-weight:900;
      letter-spacing:.02em;
      background:
        radial-gradient(420px 140px at 0% 0%, rgba(16,59,102,.10), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.92), rgba(245,248,255,.78));
    }
    [data-theme="dark"] .matrix th:first-child,
    [data-theme="dark"] .matrix td:first-child{
      background:
        radial-gradient(420px 140px at 0% 0%, rgba(16,59,102,.14), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.05));
    }

    .cell{
      border-radius: 999px;
      padding:7px 10px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      min-width: 84px;
      border:1px solid rgba(255,255,255,.20);
      box-shadow: 0 12px 30px rgba(7,26,44,.08);
      transition: transform .16s ease, filter .16s ease;
      user-select:none;
    }
    .cell:hover{ transform: translateY(-1px); filter: brightness(1.05); }
    .cell.seller{ background: rgba(255,79,216,.16); border-color: rgba(255,79,216,.26); }
    .cell.buyer{ background: rgba(71,230,177,.16); border-color: rgba(71,230,177,.26); }
    .cell.split{ background: rgba(200,155,60,.14); border-color: rgba(200,155,60,.26); }
    .cell.none{ background: rgba(74,111,165,.10); border-color: rgba(74,111,165,.20); color: var(--muted); box-shadow:none; }

    .matrixFoot{
      padding:12px;
      color: var(--muted);
      font-size:12.5px;
      line-height:1.5;
    }

    /* CBM Calculator */
    .cbmGrid{
      margin-top:12px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
      align-items:start;
    }
    .cbmBox{
      border:1px solid var(--line);
      border-radius: 22px;
      background: rgba(255,255,255,.82);
      padding:14px;
      box-shadow: 0 18px 60px rgba(7,26,44,.06);
    }
    [data-theme="dark"] .cbmBox{ background: rgba(255,255,255,.06); }
    label{ font-size:11px; color: var(--muted); display:block; margin:2px 0 6px; }
    input, select, textarea{
      width:100%;
      border:1px solid var(--line);
      background: rgba(255,255,255,.86);
      color: var(--text);
      border-radius: 14px;
      padding: 12px 12px;
      font-size:13px;
      outline:none;
      transition: box-shadow .18s ease, border-color .18s ease, background .18s ease;
    }
    [data-theme="dark"] input,
    [data-theme="dark"] select,
    [data-theme="dark"] textarea{
      background: rgba(255,255,255,.08);
    }
    input:focus, select:focus, textarea:focus{
      border-color: rgba(200,155,60,.55);
      box-shadow:0 0 0 4px rgba(200,155,60,.18);
    }
    textarea{ resize: vertical; min-height: 90px; }

    .row2{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    .row3{
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap:10px;
    }
    .calcOut{
      border-radius: 20px;
      border:1px solid var(--line);
      background:
        radial-gradient(520px 180px at 20% 0%, rgba(255,79,216,.12), transparent 60%),
        radial-gradient(520px 180px at 80% 0%, rgba(71,230,177,.10), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.90), rgba(245,248,255,.80));
      padding:14px;
      min-height: 140px;
    }
    [data-theme="dark"] .calcOut{
      background:
        radial-gradient(520px 180px at 20% 0%, rgba(255,79,216,.12), transparent 60%),
        radial-gradient(520px 180px at 80% 0%, rgba(71,230,177,.10), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.05));
    }
    .kv{ display:flex; justify-content:space-between; gap:10px; padding:8px 0; border-bottom:1px solid var(--line); }
    .kv:last-child{ border-bottom:0; }
    .kv span{ color: var(--muted); font-size:12.5px; }
    .kv b{ font-size:13px; letter-spacing:-.01em; }

    /* CONTACT BAND */
    .band{
      margin-top:18px;
      border-radius: 28px;
      padding:18px;
      background:
        radial-gradient(700px 220px at 12% 0%, rgba(255,79,216,.22), transparent 60%),
        radial-gradient(700px 220px at 88% 0%, rgba(71,230,177,.18), transparent 60%),
        linear-gradient(135deg, var(--navy), var(--navy2));
      color:#fff;
      display:flex; align-items:center; justify-content:space-between; gap:14px; flex-wrap:wrap;
      box-shadow: var(--shadow);
      border:1px solid rgba(255,255,255,.10);
    }
    [data-theme="dark"] .band{
      background:
        radial-gradient(700px 220px at 12% 0%, rgba(255,79,216,.24), transparent 60%),
        radial-gradient(700px 220px at 88% 0%, rgba(71,230,177,.20), transparent 60%),
        linear-gradient(135deg, rgba(7,26,44,.80), rgba(12,42,74,.78));
      border:1px solid rgba(255,255,255,.12);
    }

    footer{
      margin-top:22px;
      display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap;
      color:var(--muted);
      font-size:12px;
      padding: 0 4px 18px;
    }

    /* Reveal + Stagger */
    .reveal{ opacity:0; transform: translateY(16px); transition: opacity .7s ease, transform .7s ease; }
    .reveal.in{ opacity:1; transform: translateY(0); }
    .stagger > *{ opacity:0; transform: translateY(16px); transition: opacity .6s ease, transform .6s ease; }
    .reveal.in .stagger > *{ opacity:1; transform: translateY(0); }
    .reveal.in .stagger > *:nth-child(1){ transition-delay:.05s }
    .reveal.in .stagger > *:nth-child(2){ transition-delay:.14s }
    .reveal.in .stagger > *:nth-child(3){ transition-delay:.23s }
    .reveal.in .stagger > *:nth-child(4){ transition-delay:.32s }
    .reveal.in .stagger > *:nth-child(5){ transition-delay:.41s }
    .reveal.in .stagger > *:nth-child(6){ transition-delay:.50s }

    /* QUOTE DRAWER */
    .drawerOverlay{
      position:fixed; inset:0; z-index:200;
      background: rgba(0,0,0,.32);
      backdrop-filter: blur(10px);
      opacity:0;
      pointer-events:none;
      transition: opacity .25s ease;
    }
    .drawerOverlay.open{ opacity:1; pointer-events:auto; }
    .drawer{
      position:fixed; top:0; right:0; height:100vh; width:min(480px, 92vw);
      z-index:210;
      transform: translateX(110%);
      transition: transform .35s cubic-bezier(.2,.9,.2,1);
      border-left:1px solid var(--line);
      background:
        radial-gradient(600px 300px at 10% 0%, rgba(255,79,216,.18), transparent 60%),
        radial-gradient(600px 300px at 90% 20%, rgba(71,230,177,.16), transparent 60%),
        radial-gradient(600px 300px at 50% 120%, rgba(16,59,102,.12), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.92) 0%, rgba(245,248,255,.88) 100%);
      color: var(--text);
      box-shadow: -30px 0 140px rgba(0,0,0,.28);
      padding:18px;
      display:flex;
      flex-direction:column;
      gap:14px;
    }
    [data-theme="dark"] .drawer{
      background:
        radial-gradient(600px 300px at 10% 0%, rgba(255,79,216,.18), transparent 60%),
        radial-gradient(600px 300px at 90% 20%, rgba(71,230,177,.16), transparent 60%),
        radial-gradient(600px 300px at 50% 120%, rgba(16,59,102,.12), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.08) 0%, rgba(255,255,255,.05) 100%);
    }
    .drawer.open{ transform: translateX(0); }

    .drawerTop{ display:flex; align-items:flex-start; justify-content:space-between; gap:10px; }
    .drawerTop h3{ margin:0; font-size:16px; letter-spacing:-.01em; }
    .drawerHint{ color: var(--muted); font-size:12.5px; margin-top:-6px; }

    .x{
      border:1px solid var(--line);
      background: rgba(255,255,255,.78);
      border-radius: 12px;
      padding:8px 10px;
      cursor:pointer;
      transition: transform .15s ease, box-shadow .15s ease, background .15s ease;
      color: var(--text);
    }
    [data-theme="dark"] .x{ background: rgba(255,255,255,.10); }
    .x:hover{ transform: translateY(-1px); box-shadow:0 16px 40px rgba(7,26,44,.12); }

    .form{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    .form .full{ grid-column: 1 / -1; }
    .drawerCtas{ display:flex; gap:10px; flex-wrap:wrap; margin-top:4px; }
    .smallNote{ color: var(--muted); font-size:12px; margin-top:4px; }

    /* Responsive */
    @media (max-width: 980px){
      .heroGrid{grid-template-columns:1fr; padding:34px 18px 18px}
      .heroVisual{height:320px}
      .cards{grid-template-columns:1fr}
      .coverageGrid{grid-template-columns:1fr}
      .panelGrid{grid-template-columns:1fr}
      .learnGrid{grid-template-columns:1fr}
      .cbmGrid{grid-template-columns:1fr}
      .form{grid-template-columns:1fr}
      .row2,.row3{grid-template-columns:1fr}
      .lanePill{ left: 16px; right:16px; }
    }
  </style>
</head>

<body>

  <div class="top">
    <div class="topInner">
      <div class="brand">
        <div class="mark" aria-hidden="true"></div>
        <div class="brandText">
          <b>BAATAR SHIPPING</b>
          <span data-i18n="tagline">Moving Trade Forward</span>
        </div>
      </div>

      <div class="nav" aria-label="Primary navigation">
        <a href="#services" data-i18n="navServices">Services</a>
        <a href="#coverage" data-i18n="navCoverage">Coverage</a>
        <a href="#learning" data-i18n="navLearning">Incoterms</a>
        <a href="#cbm" data-i18n="navCBM">CBM</a>
        <a href="#contact" data-i18n="navContact">Contact</a>
        <a href="about.html" data-i18n="navAbout">About</a>
        <a href="services.html" data-i18n="navServicesPage">Services Page</a>

        <div class="controls">
          <button class="pillBtn" id="theme-toggle" type="button" title="Toggle dark mode">üåô</button>
          <button class="pillBtn" id="lang-en" type="button">EN</button>
          <button class="pillBtn" id="lang-mn" type="button">MN</button>
        </div>
      </div>
    </div>
  </div>

  <div class="stage">
    <main class="wrap">

      <!-- HERO -->
      <section class="hero reveal" id="top">
        <div class="heroGrid">
          <div>
            <div class="kicker"><span class="kdot"></span> <span data-i18n="heroKicker">Cross-border logistics coordination</span></div>
            <h1 data-i18n="heroTitle">Mongolia ‚Üî China ‚Üî Global Logistics</h1>
            <p class="lead" data-i18n="heroSub">
              Reliable logistics coordination for cross-border and international trade ‚Äî clear communication, fast execution, trusted partners.
            </p>

            <div class="chips">
              <span class="chip" data-i18n="chip1">Fast response</span>
              <span class="chip" data-i18n="chip2">Clear coordination</span>
              <span class="chip" data-i18n="chip3">Trusted network</span>
              <span class="chip" data-i18n="chip4">Route clarity</span>
            </div>

            <div class="heroCtas">
              <button class="btn primary" id="openQuote" type="button" data-i18n="ctaPrimary">Request a quote</button>
              <a class="btn ghost" href="https://wa.me/97699887055" target="_blank" rel="noopener">WhatsApp</a>
              <a class="btn ghost" href="viber://chat?number=%2B97699887055">Viber</a>
              <a class="btn ghost" href="#coverage" data-i18n="ctaExplore">Explore routes</a>
            </div>

            <div class="mini" data-i18n="heroMini">
              Practical, calm, dependable ‚Äî built for long-term trade.
            </div>
          </div>

          <div class="heroVisual">
            <div class="hvTop">
              <div class="hvTitle">
                <b data-i18n="hvTitle">Global coverage</b>
                <span data-i18n="hvSub">Drag to rotate ‚Ä¢ Click city ‚Ä¢ Scroll to zoom</span>
              </div>
              <div class="hvPills">
                <div class="pill"><span class="dotLive"></span><span data-i18n="hvLive">Interactive</span></div>
                <div class="pill" id="autoRotatePill" title="Click the globe background to toggle auto-rotate">‚ü≤ <span data-i18n="hvAuto">Auto</span></div>
              </div>
            </div>

            <div class="hvCanvasWrap">
              <div class="tooltip" id="globeTip"><b>City</b><div class="subt">Click to add</div></div>
              <canvas id="heroGlobe" aria-label="Interactive globe showing cities and routes"></canvas>

              <div class="lanePill" id="heroLane">
                <span class="miniDot" aria-hidden="true"></span>
                <span id="heroLaneText">Selected lane: UB ‚Üí Beijing ‚Üí Tianjin</span>
                <button type="button" id="copyLaneBtn" title="Copy lane">Copy</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- SERVICES -->
      <section class="section reveal" id="services">
        <div class="sectionCard">
          <div class="headRow">
            <div>
              <h2 data-i18n="servicesTitle">Services</h2>
              <p class="sub" data-i18n="servicesSub">Tap a service to see what‚Äôs included ‚Äî designed to reduce risk and increase speed.</p>
            </div>
          </div>

          <div class="tabs" role="tablist" aria-label="Services tabs">
            <button class="tab active" type="button" data-tab="t1" data-i18n="tab1">Freight</button>
            <button class="tab" type="button" data-tab="t2" data-i18n="tab2">Cross-border</button>
            <button class="tab" type="button" data-tab="t3" data-i18n="tab3">Documents</button>
          </div>

          <div class="tabPanels">
            <div class="panel active" id="t1">
              <b data-i18n="p1Title">Freight coordination (planning + control)</b>
              <div class="panelGrid stagger">
                <div class="card">
                  <h3 data-i18n="p1aTitle">Route options</h3>
                  <p data-i18n="p1aText">Choose the best route for cost, speed, and reliability.</p>
                  <div class="meta"><span class="tag">MNG ‚Üî CHN</span><span class="tag" data-i18n="tagPlanning">Planning</span></div>
                </div>
                <div class="card">
                  <h3 data-i18n="p1bTitle">Partner alignment</h3>
                  <p data-i18n="p1bText">Coordinate carriers and operators so handovers are smooth.</p>
                  <div class="meta"><span class="tag" data-i18n="tagCoordination">Coordination</span><span class="tag">Updates</span></div>
                </div>
              </div>
            </div>

            <div class="panel" id="t2">
              <b data-i18n="p2Title">Cross-border execution (handover + exceptions)</b>
              <div class="panelGrid stagger">
                <div class="card">
                  <h3 data-i18n="p2aTitle">Border handover</h3>
                  <p data-i18n="p2aText">Clear responsibilities across the border to keep cargo moving.</p>
                  <div class="meta"><span class="tag">Handover</span><span class="tag" data-i18n="tagSpeed">Speed</span></div>
                </div>
                <div class="card">
                  <h3 data-i18n="p2bTitle">Issue handling</h3>
                  <p data-i18n="p2bText">If delays happen, we push a resolution plan fast.</p>
                  <div class="meta"><span class="tag" data-i18n="tagRisk">Risk</span><span class="tag">Status</span></div>
                </div>
              </div>
            </div>

            <div class="panel" id="t3">
              <b data-i18n="p3Title">Documentation support (reduce preventable delays)</b>
              <div class="panelGrid stagger">
                <div class="card">
                  <h3 data-i18n="p3aTitle">Checklist by route</h3>
                  <p data-i18n="p3aText">Simple checklist to avoid missing or wrong docs.</p>
                  <div class="meta"><span class="tag">Docs</span><span class="tag" data-i18n="tagAccuracy">Accuracy</span></div>
                </div>
                <div class="card">
                  <h3 data-i18n="p3bTitle">Validation</h3>
                  <p data-i18n="p3bText">Weights, codes, names ‚Äî confirm before shipment.</p>
                  <div class="meta"><span class="tag">Verification</span><span class="tag" data-i18n="tagClarity">Clarity</span></div>
                </div>
              </div>
            </div>
          </div>

          <div class="cards stagger" style="margin-top:14px;">
            <a class="card cardLink" href="services.html">
              <h3 data-i18n="svcCard1">See full Services page</h3>
              <p data-i18n="svcCard1Sub">Interactive details, quote shortcuts, and process overview.</p>
              <div class="meta"><span class="tag">services.html</span><span class="tag" data-i18n="tagExplore">Explore</span></div>
            </a>
            <div class="card">
              <h3 data-i18n="svcCard2">Fast quoting</h3>
              <p data-i18n="svcCard2Sub">Send route + cargo details ‚Äî we reply quickly with next steps.</p>
              <div class="meta"><span class="tag">WhatsApp</span><span class="tag">Viber</span></div>
            </div>
            <div class="card">
              <h3 data-i18n="svcCard3">Clean communication</h3>
              <p data-i18n="svcCard3Sub">No confusion, no silence ‚Äî clear updates at every stage.</p>
              <div class="meta"><span class="tag" data-i18n="tagUpdates">Updates</span><span class="tag" data-i18n="tagTrusted">Trusted</span></div>
            </div>
          </div>
        </div>
      </section>

      <!-- COVERAGE -->
      <section class="section reveal" id="coverage">
        <div class="sectionCard">
          <div class="headRow">
            <div>
              <h2 data-i18n="coverageTitle">Coverage</h2>
              <p class="sub" data-i18n="coverageSub">Tap a route chip. We‚Äôll show what that coverage means.</p>
            </div>
          </div>

          <div class="coverageGrid stagger">
            <div class="covCard">
              <div class="covTop">
                <h3 data-i18n="covCoreTitle">Core Routes</h3>
                <span class="tag" data-i18n="covCoreTag">MNG ‚Üî CHN</span>
              </div>
              <div class="covChips" id="coreChips">
                <div class="covChip active" data-note="core1" data-i18n="covChip1">UB ‚Üî Erenhot</div>
                <div class="covChip" data-note="core2" data-i18n="covChip2">Zamiin-Uud ‚Üî China</div>
                <div class="covChip" data-note="core3" data-i18n="covChip3">Rail / Road options</div>
              </div>
              <div class="covNote" id="coreNote"></div>
            </div>

            <div class="covCard">
              <div class="covTop">
                <h3 data-i18n="covGlobalTitle">Global Reach</h3>
                <span class="tag" data-i18n="covGlobalTag">Partners</span>
              </div>
              <div class="covChips" id="globalChips">
                <div class="covChip active" data-note="g1" data-i18n="covChip4">Overseas pickup</div>
                <div class="covChip" data-note="g2" data-i18n="covChip5">Cross-trade</div>
                <div class="covChip" data-note="g3" data-i18n="covChip6">Multi-leg tracking</div>
              </div>
              <div class="covNote" id="globalNote"></div>
            </div>
          </div>

          <!-- Coverage Map + Route Builder -->
          <div class="learnGrid" style="margin-top:14px;">
            <div class="panelCard">
              <h3 data-i18n="rbTitle">Route Builder</h3>
              <div class="small" data-i18n="rbSub">Click cities (or click on the globe). Drag to rotate up/down + left/right. Routes animate on the globe.</div>

              <div class="rbTop">
                <div class="rbPills" id="routeChips"></div>
                <div class="rbPills">
                  <div class="rbPill" id="rbClear" data-i18n="rbClear">Clear</div>
                  <div class="rbPill" id="rbShuffle" data-i18n="rbShuffle">Surprise</div>
                </div>
              </div>

              <div class="laneBig" id="laneBig">
                <div class="s" data-i18n="rbSelected">Selected lane</div>
                <b id="laneText">UB ‚Üí Beijing ‚Üí Tianjin</b>
                <div class="actions">
                  <button type="button" id="copyLaneBtn2" data-i18n="copy">Copy</button>
                  <button type="button" id="setHeroLaneBtn" data-i18n="useInHero">Use in hero</button>
                </div>
              </div>

              <div class="small" style="margin-top:10px;" data-i18n="rbHint">
                Tip: Click empty ocean to toggle auto-rotate. Scroll to zoom. Click a city again to remove.
              </div>
            </div>

            <div class="panelCard">
              <h3 data-i18n="covMiniTitle">City nodes</h3>
              <div class="small" data-i18n="covMiniSub">We highlight these hubs for quick planning. (You can add more later.)</div>
              <div class="legend" id="cityLegend"></div>
              <div class="small" style="margin-top:10px;" data-i18n="covMiniNote">
                Each node is clickable on the globe with hover labels.
              </div>
            </div>
          </div>

        </div>
      </section>

      <!-- INCOTERMS -->
      <section class="section reveal" id="learning">
        <div class="sectionCard">
          <div class="headRow">
            <div>
              <h2 data-i18n="incTitle">Incoterms 2020 ‚Äî Responsibility Matrix</h2>
              <p class="sub" data-i18n="incSub">A premium ‚Äúat-a-glance‚Äù comparison. Use filters for quick understanding, then confirm details on contracts.</p>
            </div>
          </div>

          <div class="filters">
            <select id="incMode">
              <option value="all" data-i18n="incModeAll">All modes</option>
              <option value="sea" data-i18n="incModeSea">Sea / inland waterway only</option>
            </select>
            <select id="incGroup">
              <option value="all" data-i18n="incGroupAll">All groups</option>
              <option value="E">Group E</option>
              <option value="F">Group F</option>
              <option value="C">Group C</option>
              <option value="D">Group D</option>
            </select>
          </div>

          <div class="legend">
            <div class="lg"><span class="sw b"></span><span data-i18n="lgBuyer">Buyer</span></div>
            <div class="lg"><span class="sw s"></span><span data-i18n="lgSeller">Seller</span></div>
            <div class="lg"><span class="sw m"></span><span data-i18n="lgSplit">Split / depends</span></div>
            <div class="lg"><span class="sw n"></span><span data-i18n="lgNA">Not typical / N/A</span></div>
          </div>

          <div class="matrixWrap" style="margin-top:12px; overflow:auto;">
            <table class="matrix" id="incMatrix" aria-label="Incoterms 2020 responsibility matrix">
              <!-- built by JS -->
            </table>
          </div>

          <div class="matrixFoot" data-i18n="incFoot">
            Note: This matrix is a simplified learning view. Incoterms define delivery point, transfer of risk, and cost allocation ‚Äî always confirm contract terms, insurance requirements, and local regulations.
          </div>
        </div>
      </section>

      <!-- CBM -->
      <section class="section reveal" id="cbm">
        <div class="sectionCard">
          <div class="headRow">
            <div>
              <h2 data-i18n="cbmTitle">CBM Calculator</h2>
              <p class="sub" data-i18n="cbmSub">Enter carton size and quantity. Get CBM (m¬≥) + cubic feet instantly.</p>
            </div>
          </div>

          <div class="cbmGrid stagger">
            <div class="cbmBox">
              <div class="row2">
                <div>
                  <label data-i18n="cbmUnit">Units</label>
                  <select id="cbmUnit">
                    <option value="cm">cm</option>
                    <option value="in">in</option>
                  </select>
                </div>
                <div>
                  <label data-i18n="cbmCartons">Cartons</label>
                  <input id="cbmCartons" type="number" min="1" step="1" value="1"/>
                </div>
              </div>

              <div class="row3" style="margin-top:10px;">
                <div>
                  <label data-i18n="cbmL">Length</label>
                  <input id="cbmL" type="number" min="0" step="0.01" placeholder="0"/>
                </div>
                <div>
                  <label data-i18n="cbmW">Width</label>
                  <input id="cbmW" type="number" min="0" step="0.01" placeholder="0"/>
                </div>
                <div>
                  <label data-i18n="cbmH">Height</label>
                  <input id="cbmH" type="number" min="0" step="0.01" placeholder="0"/>
                </div>
              </div>

              <div class="row2" style="margin-top:10px;">
                <div>
                  <label data-i18n="cbmWeight">Gross weight (optional)</label>
                  <input id="cbmKg" type="number" min="0" step="0.01" placeholder="kg"/>
                </div>
                <div>
                  <label data-i18n="cbmCopy">Copy results</label>
                  <button class="btn ghost" id="cbmCopyBtn" type="button" style="width:100%;">Copy</button>
                </div>
              </div>

              <div class="small" style="margin-top:10px;" data-i18n="cbmHint">
                Tip: For air freight, volumetric weight is often used ‚Äî ask us and we‚Äôll help.
              </div>
            </div>

            <div class="calcOut" id="cbmOut">
              <div class="kv"><span data-i18n="cbmPer">Per carton volume</span><b id="perVol">‚Äî</b></div>
              <div class="kv"><span data-i18n="cbmTotal">Total volume</span><b id="totVol">‚Äî</b></div>
              <div class="kv"><span data-i18n="cbmCBM">Total CBM (m¬≥)</span><b id="totCBM">‚Äî</b></div>
              <div class="kv"><span data-i18n="cbmFT3">Total ft¬≥</span><b id="totFT">‚Äî</b></div>
              <div class="kv"><span data-i18n="cbmDensity">Density (kg/m¬≥)</span><b id="dens">‚Äî</b></div>
            </div>
          </div>
        </div>
      </section>

      <!-- CONTACT -->
      <section class="section reveal" id="contact">
        <div class="sectionCard">
          <div class="headRow">
            <div>
              <h2 data-i18n="contactTitle">Contact</h2>
              <p class="sub" data-i18n="contactSub">Message us with route + cargo details + timeline. We reply quickly.</p>
            </div>
          </div>

          <div class="band stagger">
            <div>
              <b data-i18n="contactBandTitle">Need a quick quote?</b><br/>
              <span data-i18n="contactBandSub">WhatsApp or Viber ‚Äî fastest response.</span>
            </div>
            <div style="display:flex; gap:10px; flex-wrap:wrap;">
              <button class="btn primary" id="openQuote2" type="button" data-i18n="ctaPrimary">Request a quote</button>
              <a class="btn ghost" href="https://wa.me/97699887055" target="_blank" rel="noopener">WhatsApp</a>
              <a class="btn ghost" href="viber://chat?number=%2B97699887055">Viber</a>
            </div>
          </div>
        </div>
      </section>

      <footer>
        <div>¬© 2026 Baatar Shipping. <span data-i18n="rights">All rights reserved.</span></div>
        <div data-i18n="tagline">Moving Trade Forward</div>
      </footer>

    </main>
  </div>

  <!-- QUOTE DRAWER -->
  <div class="drawerOverlay" id="drawerOverlay" aria-hidden="true"></div>

  <aside class="drawer" id="drawer" aria-hidden="true" aria-label="Quote request form">
    <div class="drawerTop">
      <div>
        <h3 data-i18n="drawerTitle">Request a quote</h3>
        <div class="drawerHint" data-i18n="drawerSub">Fill this in 30 seconds. We‚Äôll reply quickly.</div>
      </div>
      <button class="x" id="closeDrawer" type="button">‚úï</button>
    </div>

    <form class="form" id="quoteForm">
      <div>
        <label data-i18n="fName">Name</label>
        <input name="name" required placeholder="Your name"/>
      </div>
      <div>
        <label data-i18n="fCompany">Company</label>
        <input name="company" placeholder="Company (optional)"/>
      </div>
      <div class="full">
        <label data-i18n="fRoute">Route</label>
        <input name="route" required placeholder="Example: Ulaanbaatar ‚Üí Erenhot ‚Üí Tianjin"/>
      </div>
      <div>
        <label data-i18n="fCargo">Cargo</label>
        <input name="cargo" required placeholder="Example: textiles / machinery"/>
      </div>
      <div>
        <label data-i18n="fWeight">Weight / Volume</label>
        <input name="weight" placeholder="Example: 12 tons / 40HQ"/>
      </div>
      <div>
        <label data-i18n="fTimeline">Timeline</label>
        <select name="timeline">
          <option value="asap" data-i18n="t1">ASAP</option>
          <option value="1w" data-i18n="t2">Within 1 week</option>
          <option value="2w" data-i18n="t3">Within 2 weeks</option>
          <option value="flex" data-i18n="t4">Flexible</option>
        </select>
      </div>
      <div>
        <label data-i18n="fContact">Preferred contact</label>
        <select name="contact">
          <option value="whatsapp">WhatsApp</option>
          <option value="viber">Viber</option>
          <option value="email">Email</option>
        </select>
      </div>
      <div class="full">
        <label data-i18n="fNotes">Notes</label>
        <textarea name="notes" placeholder="Any special requirements?"></textarea>
      </div>

      <div class="drawerCtas full">
        <button class="btn primary" type="submit" data-i18n="send">Send request</button>
        <a class="btn ghost" id="sendWhatsApp" href="#" target="_blank" rel="noopener">Send via WhatsApp</a>
        <a class="btn ghost" id="sendViber" href="#">Send via Viber</a>
      </div>

      <div class="smallNote full" data-i18n="privacy">We only use this info to reply to your request.</div>
    </form>
  </aside>

  <script>
    (function(){
      // ---------------- i18n ----------------
      const dict = {
        en: {
          tagline:"Moving Trade Forward",
          navServices:"Services", navCoverage:"Coverage", navLearning:"Incoterms", navCBM:"CBM", navContact:"Contact", navAbout:"About", navServicesPage:"Services Page",

          heroKicker:"Cross-border logistics coordination",
          heroTitle:"Mongolia ‚Üî China ‚Üî Global Logistics",
          heroSub:"Reliable logistics coordination for cross-border and international trade ‚Äî clear communication, fast execution, trusted partners.",
          chip1:"Fast response", chip2:"Clear coordination", chip3:"Trusted network", chip4:"Route clarity",
          ctaPrimary:"Request a quote",
          ctaExplore:"Explore routes",
          heroMini:"Practical, calm, dependable ‚Äî built for long-term trade.",
          hvTitle:"Global coverage",
          hvSub:"Drag to rotate ‚Ä¢ Click city ‚Ä¢ Scroll to zoom",
          hvLive:"Interactive",
          hvAuto:"Auto",

          servicesTitle:"Services",
          servicesSub:"Tap a service to see what‚Äôs included ‚Äî designed to reduce risk and increase speed.",
          tab1:"Freight", tab2:"Cross-border", tab3:"Documents",
          p1Title:"Freight coordination (planning + control)",
          p1aTitle:"Route options", p1aText:"Choose the best route for cost, speed, and reliability.",
          p1bTitle:"Partner alignment", p1bText:"Coordinate carriers and operators so handovers are smooth.",
          p2Title:"Cross-border execution (handover + exceptions)",
          p2aTitle:"Border handover", p2aText:"Clear responsibilities across the border to keep cargo moving.",
          p2bTitle:"Issue handling", p2bText:"If delays happen, we push a resolution plan fast.",
          p3Title:"Documentation support (reduce preventable delays)",
          p3aTitle:"Checklist by route", p3aText:"Simple checklist to avoid missing or wrong docs.",
          p3bTitle:"Validation", p3bText:"Weights, codes, names ‚Äî confirm before shipment.",
          svcCard1:"See full Services page", svcCard1Sub:"Interactive details, quote shortcuts, and process overview.",
          svcCard2:"Fast quoting", svcCard2Sub:"Send route + cargo details ‚Äî we reply quickly with next steps.",
          svcCard3:"Clean communication", svcCard3Sub:"No confusion, no silence ‚Äî clear updates at every stage.",
          tagPlanning:"Planning", tagCoordination:"Coordination", tagSpeed:"Speed", tagRisk:"Risk", tagAccuracy:"Accuracy", tagClarity:"Clarity", tagExplore:"Explore", tagUpdates:"Updates", tagTrusted:"Trusted",

          coverageTitle:"Coverage",
          coverageSub:"Tap a route chip. We‚Äôll show what that coverage means.",
          covCoreTitle:"Core Routes", covCoreTag:"MNG ‚Üî CHN",
          covGlobalTitle:"Global Reach", covGlobalTag:"Partners",
          covChip1:"UB ‚Üî Erenhot", covChip2:"Zamiin-Uud ‚Üî China", covChip3:"Rail / Road options",
          covChip4:"Overseas pickup", covChip5:"Cross-trade", covChip6:"Multi-leg tracking",

          rbTitle:"Route Builder",
          rbSub:"Click cities (or click on the globe). Drag to rotate up/down + left/right. Routes animate on the globe.",
          rbClear:"Clear",
          rbShuffle:"Surprise",
          rbSelected:"Selected lane",
          rbHint:"Tip: Click empty ocean to toggle auto-rotate. Scroll to zoom. Click a city again to remove.",
          copy:"Copy",
          useInHero:"Use in hero",

          covMiniTitle:"City nodes",
          covMiniSub:"We highlight these hubs for quick planning. (You can add more later.)",
          covMiniNote:"Each node is clickable on the globe with hover labels.",

          incTitle:"Incoterms 2020 ‚Äî Responsibility Matrix",
          incSub:"A premium ‚Äúat-a-glance‚Äù comparison. Use filters for quick understanding, then confirm details on contracts.",
          incModeAll:"All modes",
          incModeSea:"Sea / inland waterway only",
          incGroupAll:"All groups",
          lgBuyer:"Buyer",
          lgSeller:"Seller",
          lgSplit:"Split / depends",
          lgNA:"Not typical / N/A",
          incFoot:"Note: This matrix is a simplified learning view. Incoterms define delivery point, transfer of risk, and cost allocation ‚Äî always confirm contract terms, insurance requirements, and local regulations.",

          cbmTitle:"CBM Calculator",
          cbmSub:"Enter carton size and quantity. Get CBM (m¬≥) + cubic feet instantly.",
          cbmUnit:"Units",
          cbmCartons:"Cartons",
          cbmL:"Length",
          cbmW:"Width",
          cbmH:"Height",
          cbmWeight:"Gross weight (optional)",
          cbmCopy:"Copy results",
          cbmHint:"Tip: For air freight, volumetric weight is often used ‚Äî ask us and we‚Äôll help.",
          cbmPer:"Per carton volume",
          cbmTotal:"Total volume",
          cbmCBM:"Total CBM (m¬≥)",
          cbmFT3:"Total ft¬≥",
          cbmDensity:"Density (kg/m¬≥)",

          contactTitle:"Contact",
          contactSub:"Message us with route + cargo details + timeline. We reply quickly.",
          contactBandTitle:"Need a quick quote?",
          contactBandSub:"WhatsApp or Viber ‚Äî fastest response.",
          rights:"All rights reserved.",

          drawerTitle:"Request a quote",
          drawerSub:"Fill this in 30 seconds. We‚Äôll reply quickly.",
          fName:"Name", fCompany:"Company", fRoute:"Route", fCargo:"Cargo", fWeight:"Weight / Volume", fTimeline:"Timeline", fContact:"Preferred contact", fNotes:"Notes",
          t1:"ASAP", t2:"Within 1 week", t3:"Within 2 weeks", t4:"Flexible",
          send:"Send request",
          privacy:"We only use this info to reply to your request."
        },
        mn: {
          tagline:"–•—É–¥–∞–ª–¥–∞–∞–≥ —É—Ä–∞–≥—à–ª—É—É–ª–Ω–∞",
          navServices:"“Æ–π–ª—á–∏–ª–≥—ç—ç", navCoverage:"–•–∞–º—Ä–∞—Ö —Ö“Ø—Ä—ç—ç", navLearning:"Incoterms", navCBM:"CBM", navContact:"–•–æ–ª–±–æ–æ –±–∞—Ä–∏—Ö", navAbout:"–ë–∏–¥–Ω–∏–π —Ç—É—Ö–∞–π", navServicesPage:"“Æ–π–ª—á–∏–ª–≥—ç—ç (—Ö—É—É–¥–∞—Å)",

          heroKicker:"–•–∏–ª –¥–∞–º–Ω–∞—Å–∞–Ω –ª–æ–∂–∏—Å—Ç–∏–∫–∏–π–Ω –∑–æ—Ö–∏—Ü—É—É–ª–∞–ª—Ç",
          heroTitle:"–ú–æ–Ω–≥–æ–ª ‚Üî –•—è—Ç–∞–¥ ‚Üî –î—ç–ª—Ö–∏–π –õ–æ–∂–∏—Å—Ç–∏–∫",
          heroSub:"–•–∏–ª –¥–∞–º–Ω–∞—Å–∞–Ω –±–æ–ª–æ–Ω –æ–ª–æ–Ω —É–ª—Å—ã–Ω —Ç—ç—ç–≤—ç—Ä—Ç ‚Äî –æ–π–ª–≥–æ–º–∂—Ç–æ–π —Ö–∞—Ä–∏–ª—Ü–∞–∞, —Ö—É—Ä–¥–∞–Ω –≥“Ø–π—Ü—ç—Ç–≥—ç–ª, –Ω–∞–π–¥–≤–∞—Ä—Ç–∞–π —Ç“Ø–Ω—à–ª—ç–ª.",
          chip1:"–•—É—Ä–¥–∞–Ω —Ö–∞—Ä–∏—É", chip2:"–¢–æ–¥ –∑–æ—Ö–∏—Ü—É—É–ª–∞–ª—Ç", chip3:"–ù–∞–π–¥–≤–∞—Ä—Ç–∞–π —Å“Ø–ª–∂—ç—ç", chip4:"–ú–∞—Ä—à—Ä—É—Ç —Ç–æ–¥–æ—Ä—Ö–æ–π",
          ctaPrimary:"“Æ–Ω–∏–π–Ω —Å–∞–Ω–∞–ª –∞–≤–∞—Ö",
          ctaExplore:"–ß–∏–≥–ª—ç–ª“Ø“Ø–¥–∏–π–≥ “Ø–∑—ç—Ö",
          heroMini:"–ü—Ä–∞–∫—Ç–∏–∫, —Ç–∞–π–≤–∞–Ω, –Ω–∞–π–¥–≤–∞—Ä—Ç–∞–π ‚Äî —É—Ä—Ç —Ö—É–≥–∞—Ü–∞–∞–Ω—ã —Ö—É–¥–∞–ª–¥–∞–∞–Ω–¥.",
          hvTitle:"–î—ç–ª—Ö–∏–π–Ω —Ö–∞–º—Ä–∞—Ö —Ö“Ø—Ä—ç—ç",
          hvSub:"–ß–∏—Ä–∂ —ç—Ä–≥“Ø“Ø–ª ‚Ä¢ –•–æ—Ç –¥—ç—ç—Ä –¥–∞—Ä ‚Ä¢ Scroll ‚Äî zoom",
          hvLive:"–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤",
          hvAuto:"–ê–≤—Ç–æ",

          servicesTitle:"“Æ–π–ª—á–∏–ª–≥—ç—ç",
          servicesSub:"“Æ–π–ª—á–∏–ª–≥—ç—ç–≥ –¥–∞—Ä–∂ –¥—ç–ª–≥—ç—Ä—ç–Ω–≥“Ø–π–≥ “Ø–∑—ç—ç—Ä—ç–π ‚Äî —ç—Ä—Å–¥—ç–ª –±—É—É—Ä—É—É–ª–∂, —Ö—É—Ä–¥—ã–≥ –Ω—ç–º—ç–≥–¥“Ø“Ø–ª–Ω—ç.",
          tab1:"–¢—ç—ç–≤—ç—Ä", tab2:"–•–∏–ª –¥–∞–º–Ω–∞—Å–∞–Ω", tab3:"–ë–∞—Ä–∏–º—Ç –±–∏—á–∏–≥",
          p1Title:"–¢—ç—ç–≤—Ä–∏–π–Ω –∑–æ—Ö–∏—Ü—É—É–ª–∞–ª—Ç (—Ç”©–ª”©–≤–ª”©–ª—Ç + —Ö—è–Ω–∞–ª—Ç)",
          p1aTitle:"–ú–∞—Ä—à—Ä—É—Ç —Å–æ–Ω–≥–æ–ª—Ç", p1aText:"“Æ–Ω—ç, —Ö—É—Ä–¥, –Ω–∞–π–¥–≤–∞—Ä—Ç–∞–π –±–∞–π–¥–ª–∞–∞—Ä –æ–Ω–æ–≤—á—Ç–æ–π–≥ —Å–æ–Ω–≥–æ–Ω–æ.",
          p1bTitle:"–¢“Ø–Ω—à –∑–æ—Ö–∏—Ü—É—É–ª–∞–ª—Ç", p1bText:"–î–∞–º–∂—É—É–ª–∞–ª—Ç—ã–≥ –∂–∏–≥–¥ –±–æ–ª–≥–æ—Ö—ã–Ω —Ç—É–ª–¥ —Ç“Ø–Ω—à“Ø“Ø–¥–∏–π–≥ —É—è–ª–¥—É—É–ª–Ω–∞.",
          p2Title:"–•–∏–ª –¥–∞–º–Ω–∞—Å–∞–Ω –≥“Ø–π—Ü—ç—Ç–≥—ç–ª (–¥–∞–º–∂—É—É–ª–∞–ª—Ç + –∞—Å—É—É–¥–∞–ª —à–∏–π–¥—ç–ª—Ç)",
          p2aTitle:"–•–∏–ª –¥—ç—ç—Ä—Ö –¥–∞–º–∂—É—É–ª–∞–ª—Ç", p2aText:"–•–∞—Ä–∏—É—Ü–ª–∞–≥—ã–≥ —Ç–æ–¥–æ—Ä—Ö–æ–π–ª–∂ —Ç—ç—ç–≤—Ä–∏–π–≥ —Ç–∞—Å–∞–ª–¥—É—É–ª–∞—Ö–≥“Ø–π.",
          p2bTitle:"–ê—Å—É—É–¥–∞–ª —à–∏–π–¥–≤—ç—Ä–ª—ç–ª—Ç", p2bText:"–°–∞–∞—Ç–∞–ª –≥–∞—Ä–≤–∞–ª —Ö—É—Ä–¥–∞–Ω —à–∏–π–¥–≤—ç—Ä–ª—ç—Ö —Ç”©–ª”©–≤–ª”©–≥”©”© –≥–∞—Ä–≥–∞–Ω–∞.",
          p3Title:"–ë–∞—Ä–∏–º—Ç –±–∏—á–≥–∏–π–Ω –¥—ç–º–∂–ª—ç–≥ (—É—Ä—å–¥—á–∏–ª–∞–Ω —Å—ç—Ä–≥–∏–π–ª—ç—Ö —Å–∞–∞—Ç–ª—ã–≥ –±—É—É—Ä—É—É–ª–Ω–∞)",
          p3aTitle:"–ú–∞—Ä—à—Ä—É—Ç –±“Ø—Ä–∏–π–Ω checklist", p3aText:"–î—É—Ç—É—É/–±—É—Ä—É—É –±–∞—Ä–∏–º—Ç–∞–∞—Å “Ø“Ø—Å—ç—Ö —ç—Ä—Å–¥—ç–ª–∏–π–≥ –±–∞–≥–∞—Å–≥–∞–Ω–∞.",
          p3bTitle:"–®–∞–ª–≥–∞–ª—Ç, –±–∞—Ç–∞–ª–≥–∞–∞–∂—É—É–ª–∞–ª—Ç", p3bText:"–ñ–∏–Ω, –∫–æ–¥, –Ω—ç—Ä ‚Äî –∞—á–∏—Ö–∞–∞—Å ”©–º–Ω”© –±–∞—Ç–∞–ª–≥–∞–∞–∂—É—É–ª–Ω–∞.",
          svcCard1:"“Æ–π–ª—á–∏–ª–≥—ç—ç–Ω–∏–π —Ö—É—É–¥—Å—ã–≥ “Ø–∑—ç—Ö", svcCard1Sub:"–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤ –¥—ç–ª–≥—ç—Ä—ç–Ω–≥“Ø–π, “Ø–Ω–∏–π–Ω —Å–∞–Ω–∞–ª, –ø—Ä–æ—Ü–µ—Å—Å.",
          svcCard2:"–•—É—Ä–¥–∞–Ω —Å–∞–Ω–∞–ª", svcCard2Sub:"–ú–∞—Ä—à—Ä—É—Ç + –∞—á–∞–∞–Ω—ã –º—ç–¥—ç—ç–ª—ç–ª –∏–ª–≥—ç—ç ‚Äî —Ö—É—Ä–¥–∞–Ω —Ö–∞—Ä–∏—É ”©–≥–Ω”©.",
          svcCard3:"–¢–æ–¥ —Ö–∞—Ä–∏–ª—Ü–∞–∞", svcCard3Sub:"–¢”©”©—Ä”©–≥–¥”©–ª–≥“Ø–π ‚Äî —à–∞—Ç –±“Ø—Ä –¥—ç—ç—Ä –æ–π–ª–≥–æ–º–∂—Ç–æ–π –º—ç–¥—ç–≥–¥—ç–ª.",
          tagPlanning:"–¢”©–ª”©–≤–ª”©–ª—Ç", tagCoordination:"–ó–æ—Ö–∏—Ü—É—É–ª–∞–ª—Ç", tagSpeed:"–•—É—Ä–¥", tagRisk:"–≠—Ä—Å–¥—ç–ª", tagAccuracy:"–ù—è–≥—Ç", tagClarity:"–¢–æ–¥", tagExplore:"“Æ–∑—ç—Ö", tagUpdates:"–ú—ç–¥—ç—ç–ª—ç–ª", tagTrusted:"–ù–∞–π–¥–≤–∞—Ä—Ç–∞–π",

          coverageTitle:"–•–∞–º—Ä–∞—Ö —Ö“Ø—Ä—ç—ç",
          coverageSub:"–ß–∏–ø –¥—ç—ç—Ä –¥–∞—Ä ‚Äî —Ö–∞–º—Ä–∞—Ö —Ö“Ø—Ä—ç—ç–≥ —Ç–æ–≤—á —Ç–∞–π–ª–±–∞—Ä–ª–∞–Ω–∞.",
          covCoreTitle:"“Æ–Ω–¥—Å—ç–Ω —á–∏–≥–ª—ç–ª", covCoreTag:"–ú–ù ‚Üî –•–ù",
          covGlobalTitle:"–î—ç–ª—Ö–∏–π–Ω —Ö–∞–º—Ä–∞—Ö —Ö“Ø—Ä—ç—ç", covGlobalTag:"–¢“Ø–Ω—à–ª—ç–ª",
          covChip1:"–£–ë ‚Üî –≠—Ä—ç—ç–Ω–∏–π", covChip2:"–ó–∞–º—ã–Ω-“Æ“Ø–¥ ‚Üî –•—è—Ç–∞–¥", covChip3:"–¢”©–º”©—Ä –∑–∞–º / –ê–≤—Ç–æ —Å–æ–Ω–≥–æ–ª—Ç",
          covChip4:"–ì–∞–¥–∞–∞–¥ pickup", covChip5:"Cross-trade", covChip6:"–û–ª–æ–Ω —à–∞—Ç–Ω—ã tracking",

          rbTitle:"Route Builder",
          rbSub:"–•–æ—Ç –¥—ç—ç—Ä –¥–∞—Ä (—ç—Å–≤—ç–ª globe –¥—ç—ç—Ä –¥–∞—Ä). –î—ç—ç—à/–¥–æ–æ—à + –±–∞—Ä—É—É–Ω/–∑“Ø“Ø–Ω —á–∏—Ä–∂ —ç—Ä–≥“Ø“Ø–ª. –ú–∞—Ä—à—Ä—É—Ç —Ö”©–¥”©–ª–≥”©”©–Ω—Ç”©”©—Ä –≥–∞—Ä–Ω–∞.",
          rbClear:"–¶—ç–≤—ç—Ä–ª—ç—Ö",
          rbShuffle:"–°–∞–Ω–∞–º—Å–∞—Ä–≥“Ø–π",
          rbSelected:"–°–æ–Ω–≥–æ—Å–æ–Ω —á–∏–≥–ª—ç–ª",
          rbHint:"–ó”©–≤–ª”©–≥”©”©: –î–∞–ª–∞–π –¥—ç—ç—Ä –¥–∞—Ä–∂ –∞–≤—Ç–æ-—ç—Ä–≥“Ø“Ø–ª–≥–∏–π–≥ –∞—Å–∞–∞—Ö/—É–Ω—Ç—Ä–∞–∞—Ö. Scroll ‚Äî zoom. –•–æ—Ç –¥—ç—ç—Ä –¥–∞—Ö–∏–Ω –¥–∞—Ä–∂ —Ö–∞—Å–Ω–∞.",
          copy:"–•—É—É–ª–∞—Ö",
          useInHero:"Hero-–¥ —Ö—ç—Ä—ç–≥–ª—ç—Ö",

          covMiniTitle:"–•–æ—Ç—ã–Ω —Ü—ç–≥“Ø“Ø–¥",
          covMiniSub:"–¢”©–ª”©–≤–ª”©–ª—Ç–∏–π–≥ —Ö—É—Ä–¥–ª—É—É–ª–∞—Ö –≥–æ–ª —Ü—ç–≥“Ø“Ø–¥–∏–π–≥ —Ö–∞—Ä—É—É–ª–ª–∞–∞. (–î–∞—Ä–∞–∞ –Ω—å –Ω—ç–º—ç–≥–¥“Ø“Ø–ª–∂ –±–æ–ª–Ω–æ.)",
          covMiniNote:"–•–æ—Ç –±“Ø—Ä globe –¥—ç—ç—Ä hover label-—Ç—ç–π, –¥–∞—Ä–∂ —Å–æ–Ω–≥–æ–Ω–æ.",

          incTitle:"Incoterms 2020 ‚Äî –•–∞—Ä–∏—É—Ü–ª–∞–≥—ã–Ω –º–∞—Ç—Ä–∏—Ü",
          incSub:"–ù—ç–≥ —Ö–∞—Ä–∞–∞–¥ –æ–π–ª–≥–æ—Ö ‚Äúpremium‚Äù —Ö–∞—Ä—å—Ü—É—É–ª–∞–ª—Ç. –®“Ø“Ø–ª—Ç“Ø“Ø—Ä –∞—à–∏–≥–ª–∞–∞–¥ —Ö—É—Ä–¥–∞–Ω –æ–π–ª–≥–æ–∂, –≥—ç—Ä—ç—ç–Ω–¥—ç—ç –∑–∞–∞–≤–∞–ª –±–∞—Ç–∞–ª–≥–∞–∞–∂—É—É–ª–Ω–∞.",
          incModeAll:"–ë“Ø—Ö —Ç—ç—ç–≤—Ä–∏–π–Ω —Ç”©—Ä”©–ª",
          incModeSea:"–ó”©–≤—Ö”©–Ω –¥–∞–ª–∞–π/–¥–æ—Ç–æ–æ–¥ —É—Å–∞–Ω –∑–∞–º",
          incGroupAll:"–ë“Ø—Ö –±“Ø–ª—ç–≥",
          lgBuyer:"–•—É–¥–∞–ª–¥–∞–Ω –∞–≤–∞–≥—á",
          lgSeller:"–•—É–¥–∞–ª–¥–∞–≥—á",
          lgSplit:"–•—É–≤–∞–∞–≥–¥–∞–Ω–∞",
          lgNA:"–ï—Ä–¥–∏–π–Ω –±–∏—à / –±–∞–π—Ö–≥“Ø–π",
          incFoot:"–ê–Ω—Ö–∞–∞—Ä: –≠–Ω—ç –Ω—å —Å—É—Ä–∞–ª—Ü–∞—Ö –∑–æ—Ä–∏—É–ª–∞–ª—Ç—Ç–∞–π —Ö—è–ª–±–∞—Ä—á–∏–ª—Å–∞–Ω —Ö–∞—Ä–∞–≥–¥–∞—Ü. Incoterms –Ω—å —Ö“Ø—Ä–≥—ç–ª—Ç–∏–π–Ω —Ü—ç–≥, —ç—Ä—Å–¥—ç–ª–∏–π–Ω —à–∏–ª–∂–∏–ª—Ç, –∑–∞—Ä–¥–ª—ã–Ω —Ö—É–≤–∞–∞—Ä–∏–ª–∞–ª—Ç—ã–≥ —Ç–æ–¥–æ—Ä—Ö–æ–π–ª–¥–æ–≥ ‚Äî –≥—ç—Ä—ç—ç, –¥–∞–∞—Ç–≥–∞–ª, –æ—Ä–æ–Ω –Ω—É—Ç–≥–∏–π–Ω –¥“Ø—Ä—ç–º –∂—É—Ä–º—ã–≥ –∑–∞–∞–≤–∞–ª —à–∞–ª–≥–∞–Ω–∞.",

          cbmTitle:"CBM –¢–æ–æ—Ü–æ–æ–ª—É—É—Ä",
          cbmSub:"–•–∞–π—Ä—Ü–≥–∏–π–Ω —Ö—ç–º–∂—ç—ç, —Ç–æ–æ–≥ –æ—Ä—É—É–ª ‚Äî CBM (–º¬≥) + ft¬≥ —à—É—É–¥ –≥–∞—Ä–Ω–∞.",
          cbmUnit:"–ù—ç–≥–∂",
          cbmCartons:"–•–∞–π—Ä—Ü–∞–≥ (—Ç–æ–æ)",
          cbmL:"–£—Ä—Ç",
          cbmW:"”®—Ä–≥”©–Ω",
          cbmH:"”®–Ω–¥”©—Ä",
          cbmWeight:"–ù–∏–π—Ç –∂–∏–Ω (–∑–∞–∞–≤–∞–ª –±–∏—à)",
          cbmCopy:"“Æ—Ä –¥“Ø–Ω —Ö—É—É–ª–∞—Ö",
          cbmHint:"–ó”©–≤–ª”©–≥”©”©: –ê–≥–∞–∞—Ä—ã–Ω —Ç—ç—ç–≤—ç—Ä—Ç —ç–∑—ç–ª—Ö“Ø“Ø–Ω–∏–π –∂–∏–Ω —Ç–æ–æ—Ü–¥–æ–≥ —Ç–æ—Ö–∏–æ–ª–¥–æ–ª –±–∏–π ‚Äî –±–∏–¥ —Ç—É—Å–∞–ª—ä—è.",
          cbmPer:"–ù—ç–≥ —Ö–∞–π—Ä—Ü–≥–∏–π–Ω —ç–∑—ç–ª—Ö“Ø“Ø–Ω",
          cbmTotal:"–ù–∏–π—Ç —ç–∑—ç–ª—Ö“Ø“Ø–Ω",
          cbmCBM:"–ù–∏–π—Ç CBM (–º¬≥)",
          cbmFT3:"–ù–∏–π—Ç ft¬≥",
          cbmDensity:"–ù—è–≥—Ç—Ä–∞–ª (–∫–≥/–º¬≥)",

          contactTitle:"–•–æ–ª–±–æ–æ –±–∞—Ä–∏—Ö",
          contactSub:"–ú–∞—Ä—à—Ä—É—Ç + –∞—á–∞–∞ + —Ö—É–≥–∞—Ü–∞–∞ –∏–ª–≥—ç—ç ‚Äî —Ö—É—Ä–¥–∞–Ω —Ö–∞—Ä–∏—É ”©–≥–Ω”©.",
          contactBandTitle:"“Æ–Ω–∏–π–Ω —Å–∞–Ω–∞–ª —Ö—É—Ä–¥–∞–Ω –∞–≤–∞—Ö —É—É?",
          contactBandSub:"WhatsApp —ç—Å–≤—ç–ª Viber ‚Äî —Ö–∞–º–≥–∏–π–Ω —Ö—É—Ä–¥–∞–Ω.",
          rights:"–ë“Ø—Ö —ç—Ä—Ö —Ö—É—É–ª–∏–∞—Ä —Ö–∞–º–≥–∞–∞–ª–∞–≥–¥—Å–∞–Ω.",

          drawerTitle:"“Æ–Ω–∏–π–Ω —Å–∞–Ω–∞–ª –∞–≤–∞—Ö",
          drawerSub:"30 —Å–µ–∫—É–Ω–¥—ç–¥ –±”©–≥–ª”© ‚Äî —Ö—É—Ä–¥–∞–Ω —Ö–∞—Ä–∏—É ”©–≥–Ω”©.",
          fName:"–ù—ç—Ä", fCompany:"–ë–∞–π–≥—É—É–ª–ª–∞–≥–∞", fRoute:"–ú–∞—Ä—à—Ä—É—Ç", fCargo:"–ê—á–∞–∞", fWeight:"–ñ–∏–Ω / –•—ç–º–∂—ç—ç", fTimeline:"–•—É–≥–∞—Ü–∞–∞", fContact:"–•–æ–ª–±–æ–≥–¥–æ—Ö —Ö—ç–ª–±—ç—Ä", fNotes:"–ù—ç–º—ç–ª—Ç —Ç—ç–º–¥—ç–≥–ª—ç–ª",
          t1:"–Ø–ê–†–ê–õ–¢–ê–ô", t2:"1 –¥–æ–ª–æ–æ —Ö–æ–Ω–æ–≥—Ç", t3:"2 –¥–æ–ª–æ–æ —Ö–æ–Ω–æ–≥—Ç", t4:"–£—è–Ω —Ö–∞—Ç–∞–Ω",
          send:"–ò–ª–≥—ç—ç—Ö",
          privacy:"–≠–Ω—ç –º—ç–¥—ç—ç–ª–ª–∏–π–≥ –∑”©–≤—Ö”©–Ω —Ç–∞–Ω–¥ —Ö–∞—Ä–∏—É ”©–≥”©—Ö”©–¥ –∞—à–∏–≥–ª–∞–Ω–∞."
        }
      };

      // Coverage notes
      const notes = {
        en: {
          core1:"Fast coordination for UB ‚Üî Erenhot flows: timing, partners, clean handover.",
          core2:"Support for Zamiin-Uud border flows: documents, updates, exception handling.",
          core3:"Choose rail or road based on cost/speed/reliability and cargo requirements.",
          g1:"Overseas pickup coordination via partners ‚Äî align timelines and handover steps.",
          g2:"Cross-trade support when origin and destination are in different countries.",
          g3:"Multi-leg tracking alignment so you always know the next step."
        },
        mn: {
          core1:"–£–ë ‚Üî –≠—Ä—ç—ç–Ω–∏–π —á–∏–≥–ª—ç–ª–¥: —Ö—É–≥–∞—Ü–∞–∞, —Ç“Ø–Ω—à, –¥–∞–º–∂—É—É–ª–∞–ª—Ç ‚Äî –æ–π–ª–≥–æ–º–∂—Ç–æ–π –∑–æ—Ö–∏—Ü—É—É–ª–∞–ª—Ç.",
          core2:"–ó–∞–º—ã–Ω-“Æ“Ø–¥ —É—Ä—Å–≥–∞–ª: –±–∞—Ä–∏–º—Ç, –º—ç–¥—ç—ç–ª—ç–ª, –∞—Å—É—É–¥–∞–ª —à–∏–π–¥—ç–ª—Ç–∏–π–Ω –¥—ç–º–∂–ª—ç–≥.",
          core3:"–¢”©–º”©—Ä –∑–∞–º/–∞–≤—Ç–æ ‚Äî “Ø–Ω—ç, —Ö—É—Ä–¥, –Ω–∞–π–¥–≤–∞—Ä—Ç–∞–π –±–∞–π–¥–ª–∞–∞—Ä —Å–æ–Ω–≥–æ–ª—Ç –≥–∞—Ä–≥–∞–Ω–∞.",
          g1:"–ì–∞–¥–∞–∞–¥ pickup-–∏–π–≥ —Ç“Ø–Ω—à—ç—ç—Ä —É—è–ª–¥—É—É–ª–∂, —Ö—É–≥–∞—Ü–∞–∞ –±–∞ –¥–∞–º–∂—É—É–ª–∞–ª—Ç—ã–≥ —Ç–æ—Ö–∏—Ä—É—É–ª–Ω–∞.",
          g2:"Cross-trade ‚Äî –≥–∞—Ä–∞–ª/–æ—á–∏—Ö —É–ª—Å ”©”©—Ä “Ø–µ–¥ –¥—ç–º–∂–ª—ç–≥ “Ø–∑“Ø“Ø–ª–Ω—ç.",
          g3:"–û–ª–æ–Ω —à–∞—Ç–Ω—ã tracking ‚Äî –¥–∞—Ä–∞–∞–≥–∏–π–Ω –∞–ª—Ö–º—ã–≥ “Ø—Ä–≥—ç–ª–∂ –º—ç–¥–¥—ç–≥ –±–∞–π–Ω–∞."
        }
      };

      // ---------------- Globe + Cities ----------------
      const cities = [
        { id:"ub",        en:"Ulaanbaatar", mn:"–£–ª–∞–∞–Ω–±–∞–∞—Ç–∞—Ä", lat:47.918, lon:106.917 },
        { id:"beijing",   en:"Beijing",     mn:"–ë—ç—ç–∂–∏–Ω",      lat:39.904, lon:116.407 },
        { id:"tianjin",   en:"Tianjin",     mn:"–¢—è–Ω—å–∂–∏–Ω",     lat:39.084, lon:117.200 },
        { id:"istanbul",  en:"Istanbul",    mn:"–ò—Å—Ç–∞–Ω–±—É–ª",    lat:41.008, lon:28.978  },
        { id:"newyork",   en:"New York",    mn:"–ù—å—é-–ô–æ—Ä–∫",    lat:40.713, lon:-74.006 },
        { id:"berlin",    en:"Berlin",      mn:"–ë–µ—Ä–ª–∏–Ω",      lat:52.520, lon:13.405  },
        { id:"seoul",     en:"Seoul",       mn:"–°”©“Ø–ª",        lat:37.566, lon:126.978 },
        { id:"capetown",  en:"Cape Town",   mn:"–ö–µ–π–ø—Ç–∞—É–Ω",    lat:-33.925,lon:18.424  },
        { id:"melbourne", en:"Melbourne",   mn:"–ú–µ–ª—å–±—É—Ä–Ω",    lat:-37.813,lon:144.963 }
      ];

      // Default lane
      let lane = ["ub","beijing","tianjin"];

      // ---------------- Incoterms Matrix ----------------
      // Responsibilities columns (simplified learning view)
      const incCols = [
        { key:"export",  en:"Export clearance", mn:"–≠–∫—Å–ø–æ—Ä—Ç—ã–Ω –≥–∞–∞–ª—å" },
        { key:"main",    en:"Main carriage",    mn:"“Æ–Ω–¥—Å—ç–Ω —Ç—ç—ç–≤—ç—Ä" },
        { key:"risk",    en:"Risk transfer",    mn:"–≠—Ä—Å–¥—ç–ª —à–∏–ª–∂–∏–ª—Ç" },
        { key:"ins",     en:"Insurance",        mn:"–î–∞–∞—Ç–≥–∞–ª" },
        { key:"import",  en:"Import clearance", mn:"–ò–º–ø–æ—Ä—Ç—ã–Ω –≥–∞–∞–ª—å" },
        { key:"unload",  en:"Unloading",        mn:"–ë—É—É–ª–≥–∞–ª—Ç" },
        { key:"deliver", en:"Delivery point",   mn:"–•“Ø—Ä–≥—ç–ª—Ç–∏–π–Ω —Ü—ç–≥" }
      ];

      // Who typically pays/does (learning simplification):
      // seller / buyer / split / none
      const INC = [
        { term:"EXW", group:"E", sea:false, row:{
          export:"buyer", main:"buyer", risk:"buyer", ins:"buyer", import:"buyer", unload:"buyer", deliver:"seller"
        }, note_en:"Seller makes goods available at premises. Buyer handles almost everything.",
           note_mn:"–•—É–¥–∞–ª–¥–∞–≥—á ”©”©—Ä–∏–π–Ω –±–∞–π—Ä–∞–Ω–¥ –±—ç–ª—ç–Ω –±–æ–ª–≥–æ–Ω–æ. –ë–∞—Ä–∞–≥ –±“Ø—Ö–Ω–∏–π–≥ —Ö—É–¥–∞–ª–¥–∞–Ω –∞–≤–∞–≥—á —Ö–∞—Ä–∏—É—Ü–Ω–∞." },

        { term:"FCA", group:"F", sea:false, row:{
          export:"seller", main:"buyer", risk:"split", ins:"buyer", import:"buyer", unload:"buyer", deliver:"seller"
        }, note_en:"Seller delivers to carrier/point agreed. Buyer handles main carriage.",
           note_mn:"–•—É–¥–∞–ª–¥–∞–≥—á —Ç–æ—Ö–∏—Ä—Å–æ–Ω —Ü—ç–≥/—Ç—ç—ç–≤—ç—Ä–ª—ç–≥—á–∏–¥ —Ö“Ø—Ä–≥—ç–Ω—ç. “Æ–Ω–¥—Å—ç–Ω —Ç—ç—ç–≤—Ä–∏–π–≥ —Ö—É–¥–∞–ª–¥–∞–Ω –∞–≤–∞–≥—á." },

        { term:"FAS", group:"F", sea:true, row:{
          export:"seller", main:"buyer", risk:"split", ins:"buyer", import:"buyer", unload:"buyer", deliver:"seller"
        }, note_en:"Sea only. Seller places goods alongside vessel. Buyer handles loading & sea carriage.",
           note_mn:"–ó”©–≤—Ö”©–Ω –¥–∞–ª–∞–π. –•—É–¥–∞–ª–¥–∞–≥—á —É—Å–∞–Ω –æ–Ω–≥–æ—Ü–Ω—ã —Ö–∞–∂—É—É–¥ —Ç–∞–≤–∏–Ω–∞. –ê—á–∏–ª—Ç/–¥–∞–ª–∞–π–Ω —Ç—ç—ç–≤—Ä–∏–π–≥ —Ö—É–¥–∞–ª–¥–∞–Ω –∞–≤–∞–≥—á." },

        { term:"FOB", group:"F", sea:true, row:{
          export:"seller", main:"buyer", risk:"split", ins:"buyer", import:"buyer", unload:"buyer", deliver:"seller"
        }, note_en:"Sea only. Seller loads on board. Risk transfers when on board.",
           note_mn:"–ó”©–≤—Ö”©–Ω –¥–∞–ª–∞–π. –•—É–¥–∞–ª–¥–∞–≥—á –æ–Ω–≥–æ—Ü–æ–Ω–¥ –∞—á–∏–∂ ”©–≥–Ω”©. –≠—Ä—Å–¥—ç–ª –æ–Ω–≥–æ—Ü–æ–Ω–¥ –∞—á–∏–≥–¥–∞—Ö–∞–¥ —à–∏–ª–∂–∏–Ω—ç." },

        { term:"CFR", group:"C", sea:true, row:{
          export:"seller", main:"seller", risk:"split", ins:"buyer", import:"buyer", unload:"buyer", deliver:"split"
        }, note_en:"Sea only. Seller pays sea carriage, risk transfers at loading (on board).",
           note_mn:"–ó”©–≤—Ö”©–Ω –¥–∞–ª–∞–π. –•—É–¥–∞–ª–¥–∞–≥—á –¥–∞–ª–∞–π–Ω —Ç—ç—ç–≤—Ä–∏–π–≥ —Ç”©–ª–Ω”©, —ç—Ä—Å–¥—ç–ª –æ–Ω–≥–æ—Ü–æ–Ω–¥ –∞—á–∏—Ö “Ø–µ–¥ —à–∏–ª–∂–∏–Ω—ç." },

        { term:"CIF", group:"C", sea:true, row:{
          export:"seller", main:"seller", risk:"split", ins:"seller", import:"buyer", unload:"buyer", deliver:"split"
        }, note_en:"Sea only. Like CFR but seller also provides minimum insurance.",
           note_mn:"–ó”©–≤—Ö”©–Ω –¥–∞–ª–∞–π. CFR-—Ç—ç–π –∞–¥–∏–ª –±–æ–ª–æ–≤—á —Ö—É–¥–∞–ª–¥–∞–≥—á —Ö–∞–º–≥–∏–π–Ω –±–∞–≥–∞ –¥–∞–∞—Ç–≥–∞–ª —Ö–∏–π–¥—ç–≥." },

        { term:"CPT", group:"C", sea:false, row:{
          export:"seller", main:"seller", risk:"split", ins:"buyer", import:"buyer", unload:"buyer", deliver:"split"
        }, note_en:"Seller pays carriage to named place; risk transfers to buyer when handed to carrier.",
           note_mn:"–•—É–¥–∞–ª–¥–∞–≥—á –Ω—ç—Ä–ª—ç—Å—ç–Ω —Ü—ç–≥ —Ö“Ø—Ä—Ç—ç–ª —Ç—ç—ç–≤—Ä–∏–π–≥ —Ç”©–ª–Ω”©; —ç—Ä—Å–¥—ç–ª —Ç—ç—ç–≤—ç—Ä–ª—ç–≥—á–∏–¥ —à–∏–ª–∂–∏—Ö “Ø–µ–¥ —Ö—É–¥–∞–ª–¥–∞–Ω –∞–≤–∞–≥—á —Ä—É—É." },

        { term:"CIP", group:"C", sea:false, row:{
          export:"seller", main:"seller", risk:"split", ins:"seller", import:"buyer", unload:"buyer", deliver:"split"
        }, note_en:"Like CPT but seller provides insurance (higher coverage than CIF typically).",
           note_mn:"CPT-—Ç—ç–π –∞–¥–∏–ª –±–æ–ª–æ–≤—á —Ö—É–¥–∞–ª–¥–∞–≥—á –¥–∞–∞—Ç–≥–∞–ª —Ö–∏–π–¥—ç–≥ (–∏—Ö—ç–≤—á–ª—ç–Ω CIF-—ç—ç—Å ”©–Ω–¥”©—Ä —Ö–∞–º–≥–∞–∞–ª–∞–ª—Ç)." },

        { term:"DAP", group:"D", sea:false, row:{
          export:"seller", main:"seller", risk:"seller", ins:"split", import:"buyer", unload:"buyer", deliver:"seller"
        }, note_en:"Delivered at Place. Seller delivers ready for unloading at named place. Import is buyer.",
           note_mn:"DAP: –•—É–¥–∞–ª–¥–∞–≥—á –Ω—ç—Ä–ª—ç—Å—ç–Ω —Ü—ç–≥ –¥—ç—ç—Ä –±—É—É–ª–≥–∞—Ö–∞–¥ –±—ç–ª—ç–Ω —Ö“Ø—Ä–≥—ç–Ω—ç. –ò–º–ø–æ—Ä—Ç ‚Äî —Ö—É–¥–∞–ª–¥–∞–Ω –∞–≤–∞–≥—á." },

        { term:"DPU", group:"D", sea:false, row:{
          export:"seller", main:"seller", risk:"seller", ins:"split", import:"buyer", unload:"seller", deliver:"seller"
        }, note_en:"Delivered at Place Unloaded. Seller unloads at destination place. Import is buyer.",
           note_mn:"DPU: –•—É–¥–∞–ª–¥–∞–≥—á –æ—á–∏—Ö –≥–∞–∑–∞—Ä—Ç –±—É—É–ª–≥–∞–∂ ”©–≥–Ω”©. –ò–º–ø–æ—Ä—Ç ‚Äî —Ö—É–¥–∞–ª–¥–∞–Ω –∞–≤–∞–≥—á." },

        { term:"DDP", group:"D", sea:false, row:{
          export:"seller", main:"seller", risk:"seller", ins:"split", import:"seller", unload:"buyer", deliver:"seller"
        }, note_en:"Delivered Duty Paid. Seller handles import clearance & duties (strongest seller obligation).",
           note_mn:"DDP: –•—É–¥–∞–ª–¥–∞–≥—á –∏–º–ø–æ—Ä—Ç—ã–Ω –≥–∞–∞–ª—å, —Ç–∞—Ç–≤–∞—Ä/—Ö—É—Ä–∞–∞–º–∂–∏–π–≥ —Ö–∞—Ä–∏—É—Ü–Ω–∞ (—Ö–∞–º–≥–∏–π–Ω ”©–Ω–¥”©—Ä “Ø“Ø—Ä—ç–≥)." }
      ];

      // ---------------- Helpers ----------------
      const $ = (q, el=document)=>el.querySelector(q);
      const $$ = (q, el=document)=>Array.from(el.querySelectorAll(q));

      function setLang(lang){
        localStorage.setItem("bs_lang", lang);
        document.documentElement.lang = (lang === "mn") ? "mn" : "en";

        $$("[data-i18n]").forEach(el=>{
          const key = el.getAttribute("data-i18n");
          if(dict[lang] && dict[lang][key]) el.textContent = dict[lang][key];
        });

        $("#lang-en").classList.toggle("active", lang==="en");
        $("#lang-mn").classList.toggle("active", lang==="mn");

        refreshCoverageNotes(lang);
        renderCityLegend(lang);
        renderRouteChips(lang);
        renderLaneText(lang);
        buildIncoterms(lang);
        updateHeroLanePill(lang);
      }

      function setTheme(theme){
        localStorage.setItem("bs_theme", theme);
        document.documentElement.setAttribute("data-theme", theme);
        const btn = $("#theme-toggle");
        btn.textContent = (theme === "dark") ? "‚òÄÔ∏è" : "üåô";
      }

      // Tabs
      function initTabs(){
        const tabs = $$(".tab");
        tabs.forEach(btn=>{
          btn.addEventListener("click", ()=>{
            tabs.forEach(t=>t.classList.remove("active"));
            $$(".panel").forEach(p=>p.classList.remove("active"));
            btn.classList.add("active");
            const id = btn.getAttribute("data-tab");
            const panel = document.getElementById(id);
            if(panel) panel.classList.add("active");
          });
        });
      }

      // Coverage chips
      function chipGroup(rootId, noteId){
        const root = document.getElementById(rootId);
        if(!root) return;
        root.addEventListener("click", (e)=>{
          const t = e.target.closest(".covChip");
          if(!t) return;
          root.querySelectorAll(".covChip").forEach(c=>c.classList.remove("active"));
          t.classList.add("active");
          const key = t.getAttribute("data-note");
          const lang = localStorage.getItem("bs_lang") || "en";
          const target = document.getElementById(noteId);
          if(target) target.textContent = notes[lang][key] || "";
        });
      }

      function refreshCoverageNotes(lang){
        const core = $("#coreChips .covChip.active");
        const glob = $("#globalChips .covChip.active");
        if(core) $("#coreNote").textContent = notes[lang][core.getAttribute("data-note")] || "";
        if(glob) $("#globalNote").textContent = notes[lang][glob.getAttribute("data-note")] || "";
      }

      // Reveal
      function initReveal(){
        if(window.__bsRevealInit) return;
        window.__bsRevealInit = true;
        const targets = $$(".reveal");
        const io = new IntersectionObserver((entries)=>{
          entries.forEach(en=>{
            if(en.isIntersecting) en.target.classList.add("in");
          });
        }, {threshold:0.14});
        targets.forEach(t=>io.observe(t));
      }

      // Micro interactions: button pointer ripple origin
      function initButtonMotion(){
        $$(".btn").forEach(btn=>{
          btn.addEventListener("pointermove", (e)=>{
            const r = btn.getBoundingClientRect();
            const x = ((e.clientX - r.left) / r.width) * 100;
            const y = ((e.clientY - r.top) / r.height) * 100;
            btn.style.setProperty("--rx", x + "%");
            btn.style.setProperty("--ry", y + "%");
          });
        });
      }

      // Subtle card tilt
      function initCardTilt(){
        $$(".card").forEach(card=>{
          card.addEventListener("pointermove",(e)=>{
            const r = card.getBoundingClientRect();
            const px = (e.clientX - r.left) / r.width;
            const py = (e.clientY - r.top) / r.height;
            const rx = (py - 0.5) * -6;
            const ry = (px - 0.5) * 8;
            card.style.transform = `translateY(-10px) rotateX(${rx}deg) rotateY(${ry}deg)`;
          });
          card.addEventListener("pointerleave",()=>{
            card.style.transform = "";
          });
        });
      }

      // Quote drawer
      function initDrawer(){
        const overlay = $("#drawerOverlay");
        const drawer = $("#drawer");
        const open1 = $("#openQuote");
        const open2 = $("#openQuote2");
        const close = $("#closeDrawer");

        function open(){
          overlay.classList.add("open");
          drawer.classList.add("open");
          overlay.setAttribute("aria-hidden","false");
          drawer.setAttribute("aria-hidden","false");
          document.body.style.overflow = "hidden";
          setTimeout(()=>{ drawer.querySelector("input")?.focus(); }, 60);
        }
        function shut(){
          overlay.classList.remove("open");
          drawer.classList.remove("open");
          overlay.setAttribute("aria-hidden","true");
          drawer.setAttribute("aria-hidden","true");
          document.body.style.overflow = "";
        }

        open1.addEventListener("click", open);
        open2.addEventListener("click", open);
        close.addEventListener("click", shut);
        overlay.addEventListener("click", shut);
        document.addEventListener("keydown",(e)=>{ if(e.key==="Escape") shut(); });

        // WhatsApp/Viber message
        const form = $("#quoteForm");
        const wa = $("#sendWhatsApp");
        const vb = $("#sendViber");

        function buildMessage(){
          const data = new FormData(form);
          const name = data.get("name") || "";
          const company = data.get("company") || "";
          const route = data.get("route") || "";
          const cargo = data.get("cargo") || "";
          const weight = data.get("weight") || "";
          const timeline = data.get("timeline") || "";
          const notesTxt = data.get("notes") || "";

          const msg =
`Quote request ‚Äî Baatar Shipping
Name: ${name}
Company: ${company}
Route: ${route}
Cargo: ${cargo}
Weight/Volume: ${weight}
Timeline: ${timeline}
Notes: ${notesTxt}`.trim();

          return encodeURIComponent(msg);
        }

        function refreshLinks(){
          const msg = buildMessage();
          wa.href = `https://wa.me/97699887055?text=${msg}`;
          vb.href = `viber://forward?text=${msg}`;
        }

        form.addEventListener("input", refreshLinks);
        refreshLinks();

        form.addEventListener("submit",(e)=>{
          e.preventDefault();
          refreshLinks();
          window.open(wa.href, "_blank");
        });
      }

      // ---------------- Route Builder UI ----------------
      function renderCityLegend(lang){
        const legend = $("#cityLegend");
        legend.innerHTML = "";
        cities.forEach(c=>{
          const item = document.createElement("div");
          item.className = "lg";
          item.innerHTML = `<span class="sw n"></span><span>${lang==="mn"?c.mn:c.en}</span>`;
          legend.appendChild(item);
        });
      }

      function renderRouteChips(lang){
        const wrap = $("#routeChips");
        wrap.innerHTML = "";
        cities.forEach(c=>{
          const d = document.createElement("div");
          d.className = "rbPill" + (lane.includes(c.id) ? " active":"");
          d.textContent = (lang==="mn"?c.mn:c.en);
          d.dataset.city = c.id;
          wrap.appendChild(d);
        });
      }

      function laneName(lang, ids){
        const map = new Map(cities.map(c=>[c.id, (lang==="mn"?c.mn:c.en)]));
        return ids.map(id=>map.get(id)||id).join(" ‚Üí ");
      }

      function renderLaneText(lang){
        $("#laneText").textContent = laneName(lang, lane);
      }

      function updateHeroLanePill(lang){
        $("#heroLaneText").textContent = (lang==="mn" ? "–°–æ–Ω–≥–æ—Å–æ–Ω —á–∏–≥–ª—ç–ª: " : "Selected lane: ") + laneName(lang, lane);
      }

      function initRouteBuilder(){
        $("#routeChips").addEventListener("click",(e)=>{
          const t = e.target.closest(".rbPill");
          if(!t) return;
          const id = t.dataset.city;
          toggleCityInLane(id);
        });

        $("#rbClear").addEventListener("click",()=>{
          lane = ["ub","beijing","tianjin"];
          syncLane();
        });

        $("#rbShuffle").addEventListener("click",()=>{
          // pick 3-5 random unique cities
          const pool = cities.map(c=>c.id);
          const n = 3 + Math.floor(Math.random()*3);
          const picked = [];
          while(picked.length < n){
            const id = pool[Math.floor(Math.random()*pool.length)];
            if(!picked.includes(id)) picked.push(id);
          }
          lane = picked;
          syncLane();
        });

        $("#copyLaneBtn2").addEventListener("click", copyLane);
        $("#copyLaneBtn").addEventListener("click", copyLane);

        $("#setHeroLaneBtn").addEventListener("click", ()=>{
          updateHeroLanePill(localStorage.getItem("bs_lang")||"en");
          toast("Hero updated");
        });

        function copyLane(){
          const lang = localStorage.getItem("bs_lang")||"en";
          const txt = laneName(lang, lane);
          navigator.clipboard?.writeText(txt).then(()=>toast(lang==="mn"?"–•—É—É–ª–∞–≤":"Copied")).catch(()=>toast("Copy failed"));
        }
      }

      function syncLane(){
        const lang = localStorage.getItem("bs_lang")||"en";
        renderRouteChips(lang);
        renderLaneText(lang);
        updateHeroLanePill(lang);
        globeSetRoute(lane);
      }

      function toggleCityInLane(id){
        if(lane.includes(id)){
          lane = lane.filter(x=>x!==id);
          if(lane.length < 2){
            // ensure at least 2 nodes so route looks good
            lane = ["ub","beijing","tianjin"];
          }
        }else{
          lane = [...lane, id];
          if(lane.length > 6){
            lane.shift();
          }
        }
        syncLane();
      }

      // ---------------- Toast (tiny) ----------------
      let toastTO;
      function toast(msg){
        let t = document.getElementById("toast");
        if(!t){
          t = document.createElement("div");
          t.id = "toast";
          t.style.position="fixed";
          t.style.left="50%";
          t.style.bottom="22px";
          t.style.transform="translateX(-50%)";
          t.style.padding="10px 12px";
          t.style.borderRadius="14px";
          t.style.border="1px solid rgba(255,255,255,.18)";
          t.style.background="rgba(7,26,44,.85)";
          t.style.color="#fff";
          t.style.fontSize="12px";
          t.style.boxShadow="0 18px 70px rgba(0,0,0,.35)";
          t.style.backdropFilter="blur(10px)";
          t.style.zIndex="999";
          t.style.opacity="0";
          t.style.transition="opacity .18s ease, transform .18s ease";
          document.body.appendChild(t);
        }
        t.textContent = msg;
        t.style.opacity="1";
        t.style.transform="translateX(-50%) translateY(-4px)";
        clearTimeout(toastTO);
        toastTO = setTimeout(()=>{
          t.style.opacity="0";
          t.style.transform="translateX(-50%) translateY(0px)";
        }, 1400);
      }

      // ---------------- Incoterms rendering ----------------
      function buildIncoterms(lang){
        const mode = $("#incMode").value;
        const grp = $("#incGroup").value;
        const tbl = $("#incMatrix");

        const cols = incCols.map(c=> (lang==="mn"?c.mn:c.en));
        const header = `
          <thead>
            <tr>
              <th style="min-width:120px;">${lang==="mn"?"–ù—ç—Ä":"Term"}</th>
              ${cols.map(c=>`<th>${c}</th>`).join("")}
            </tr>
          </thead>
        `;

        const filtered = INC.filter(r=>{
          if(mode==="sea" && !r.sea) return false;
          if(grp!=="all" && r.group!==grp) return false;
          return true;
        });

        const cell = (who)=>{
          const cls = who==="seller"?"seller":who==="buyer"?"buyer":who==="split"?"split":"none";
          const label = lang==="mn"
            ? (who==="seller"?"–•—É–¥–∞–ª–¥–∞–≥—á":who==="buyer"?"–•—É–¥–∞–ª–¥–∞–Ω –∞–≤–∞–≥—á":who==="split"?"–•—É–≤–∞–∞–≥–¥–∞–Ω–∞":"‚Äî")
            : (who==="seller"?"Seller":who==="buyer"?"Buyer":who==="split"?"Split":"‚Äî");
          return `<span class="cell ${cls}">${label}</span>`;
        };

        const body = `
          <tbody>
            ${filtered.map(r=>{
              const note = (lang==="mn"?r.note_mn:r.note_en);
              return `
                <tr title="${escapeHtml(note)}">
                  <td>
                    <div style="display:flex; align-items:center; gap:10px;">
                      <div style="font-weight:950; font-size:12.5px; letter-spacing:.08em;">${r.term}</div>
                      <span class="tag">Group ${r.group}</span>
                      ${r.sea ? `<span class="tag">${lang==="mn"?"–î–∞–ª–∞–π":"Sea"}</span>` : `<span class="tag">${lang==="mn"?"–ë“Ø—Ö":"All"}</span>`}
                    </div>
                  </td>
                  ${incCols.map(c=>`<td>${cell(r.row[c.key])}</td>`).join("")}
                </tr>
              `;
            }).join("")}
          </tbody>
        `;

        tbl.innerHTML = header + body;
      }

      function escapeHtml(s){
        return String(s).replace(/[&<>"']/g, (m)=>({
          "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
        }[m]));
      }

      function initIncoterms(){
        $("#incMode").addEventListener("change", ()=>buildIncoterms(localStorage.getItem("bs_lang")||"en"));
        $("#incGroup").addEventListener("change", ()=>buildIncoterms(localStorage.getItem("bs_lang")||"en"));
      }

      // ---------------- CBM Calculator ----------------
      function initCBM(){
        const unitEl = $("#cbmUnit");
        const cartsEl = $("#cbmCartons");
        const lEl = $("#cbmL"), wEl = $("#cbmW"), hEl = $("#cbmH");
        const kgEl = $("#cbmKg");

        const perVol = $("#perVol");
        const totVol = $("#totVol");
        const totCBM = $("#totCBM");
        const totFT = $("#totFT");
        const dens = $("#dens");

        function num(v){ const n = parseFloat(v); return isFinite(n) ? n : 0; }

        function calc(){
          const unit = unitEl.value;
          const cartons = Math.max(1, Math.round(num(cartsEl.value) || 1));
          const L = num(lEl.value), W = num(wEl.value), H = num(hEl.value);
          const kg = num(kgEl.value);

          // Convert to meters
          let l_m=0,w_m=0,h_m=0;
          if(unit==="cm"){
            l_m = L/100; w_m=W/100; h_m=H/100;
          } else {
            // inches to meters
            l_m = L*0.0254; w_m=W*0.0254; h_m=H*0.0254;
          }

          const per_m3 = l_m*w_m*h_m;
          const tot_m3 = per_m3*cartons;
          const ft3 = tot_m3 * 35.3146667;

          perVol.textContent = per_m3>0 ? `${per_m3.toFixed(4)} m¬≥` : "‚Äî";
          totVol.textContent = tot_m3>0 ? `${tot_m3.toFixed(4)} m¬≥` : "‚Äî";
          totCBM.textContent = tot_m3>0 ? `${tot_m3.toFixed(4)}` : "‚Äî";
          totFT.textContent = tot_m3>0 ? `${ft3.toFixed(2)}` : "‚Äî";

          const density = (kg>0 && tot_m3>0) ? (kg/tot_m3) : 0;
          dens.textContent = density>0 ? `${density.toFixed(1)}` : "‚Äî";
        }

        [unitEl,cartsEl,lEl,wEl,hEl,kgEl].forEach(el=>el.addEventListener("input", calc));
        calc();

        $("#cbmCopyBtn").addEventListener("click", ()=>{
          calc();
          const text =
`CBM Calculator ‚Äî Baatar Shipping
Units: ${unitEl.value}
Cartons: ${cartsEl.value}
L√óW√óH: ${lEl.value}√ó${wEl.value}√ó${hEl.value}
Per carton: ${perVol.textContent}
Total m¬≥: ${totVol.textContent}
Total CBM: ${totCBM.textContent}
Total ft¬≥: ${totFT.textContent}
Weight (kg): ${kgEl.value || "-"}
Density: ${dens.textContent}`.trim();

          navigator.clipboard?.writeText(text).then(()=>toast("Copied")).catch(()=>toast("Copy failed"));
        });
      }

      // ---------------- Globe renderer (2-axis drag + inertia + zoom + hover labels) ----------------
      let globeApi = null;

      function initGlobe(){
        const canvas = $("#heroGlobe");
        const tip = $("#globeTip");
        const ctx = canvas.getContext("2d", { alpha:true });

        const state = {
          dpr: Math.max(1, Math.min(2, window.devicePixelRatio || 1)),
          w: 0, h: 0,
          yaw: -0.9,      // left-right
          pitch: 0.22,    // up-down
          vyaw: 0, vpitch: 0,
          drag:false,
          lx:0, ly:0,
          zoom: 1.0,
          auto: true,
          hoverId: null,
          selected: new Set(lane),
          route: [...lane],
          t: 0,
          stars: []
        };

        // Precompute stars
        function seedStars(){
          state.stars = [];
          const n = 80;
          for(let i=0;i<n;i++){
            state.stars.push({
              x: Math.random(),
              y: Math.random(),
              r: 0.5 + Math.random()*1.6,
              a: 0.18 + Math.random()*0.35
            });
          }
        }
        seedStars();

        function resize(){
          const r = canvas.getBoundingClientRect();
          state.w = Math.max(320, r.width);
          state.h = Math.max(220, r.height);
          canvas.width = Math.floor(state.w * state.dpr);
          canvas.height = Math.floor(state.h * state.dpr);
          ctx.setTransform(state.dpr,0,0,state.dpr,0,0);
        }

        function clamp(v, a, b){ return Math.max(a, Math.min(b, v)); }

        // 3D helpers
        function toRad(deg){ return deg*Math.PI/180; }
        function pointFromLatLon(lat, lon){
          const la = toRad(lat), lo = toRad(lon);
          const x = Math.cos(la)*Math.cos(lo);
          const y = Math.sin(la);
          const z = Math.cos(la)*Math.sin(lo);
          return {x,y,z};
        }
        function rotY(p, a){
          const ca=Math.cos(a), sa=Math.sin(a);
          return { x: p.x*ca + p.z*sa, y:p.y, z: -p.x*sa + p.z*ca };
        }
        function rotX(p, a){
          const ca=Math.cos(a), sa=Math.sin(a);
          return { x: p.x, y: p.y*ca - p.z*sa, z: p.y*sa + p.z*ca };
        }
        function project(p){
          // camera looking toward origin, z is depth
          const f = 1.75 / state.zoom;
          const z = p.z + 2.4; // shift forward
          const s = f / z;
          return { x: p.x*s, y: p.y*s, z: p.z, s };
        }

        function bg(){
          // subtle ‚ÄúApple-like‚Äù dark glass inside canvas
          const g = ctx.createRadialGradient(state.w*0.62, state.h*0.32, 10, state.w*0.5, state.h*0.55, Math.max(state.w,state.h)*0.7);
          const dark = (getTheme()==="dark");
          if(dark){
            g.addColorStop(0, "rgba(255,255,255,0.06)");
            g.addColorStop(0.6,"rgba(0,0,0,0.18)");
            g.addColorStop(1, "rgba(0,0,0,0.26)");
          }else{
            g.addColorStop(0, "rgba(7,26,44,0.06)");
            g.addColorStop(0.6,"rgba(7,26,44,0.03)");
            g.addColorStop(1, "rgba(7,26,44,0.02)");
          }
          ctx.fillStyle = g;
          ctx.fillRect(0,0,state.w,state.h);

          // stars
          ctx.save();
          ctx.globalCompositeOperation = "screen";
          for(const s of state.stars){
            ctx.beginPath();
            ctx.fillStyle = `rgba(255,255,255,${s.a})`;
            ctx.arc(s.x*state.w, s.y*state.h, s.r, 0, Math.PI*2);
            ctx.fill();
          }
          ctx.restore();
        }

        function drawSphere(cx, cy, R){
          const dark = (getTheme()==="dark");
          // glow
          ctx.save();
          ctx.globalCompositeOperation = "lighter";
          const glow = ctx.createRadialGradient(cx, cy, R*0.20, cx, cy, R*1.15);
          glow.addColorStop(0, dark ? "rgba(71,230,177,.10)" : "rgba(16,59,102,.10)");
          glow.addColorStop(0.45, dark ? "rgba(255,79,216,.08)" : "rgba(71,230,177,.06)");
          glow.addColorStop(1, "rgba(0,0,0,0)");
          ctx.fillStyle = glow;
          ctx.beginPath(); ctx.arc(cx, cy, R*1.12, 0, Math.PI*2); ctx.fill();
          ctx.restore();

          // sphere shading
          const grad = ctx.createRadialGradient(cx - R*0.25, cy - R*0.30, R*0.20, cx, cy, R);
          if(dark){
            grad.addColorStop(0, "rgba(255,255,255,0.10)");
            grad.addColorStop(0.5,"rgba(255,255,255,0.06)");
            grad.addColorStop(1, "rgba(255,255,255,0.02)");
          }else{
            grad.addColorStop(0, "rgba(255,255,255,0.95)");
            grad.addColorStop(0.55,"rgba(245,248,255,0.90)");
            grad.addColorStop(1, "rgba(235,242,255,0.82)");
          }
          ctx.fillStyle = grad;
          ctx.beginPath(); ctx.arc(cx, cy, R, 0, Math.PI*2); ctx.fill();

          // rim
          ctx.strokeStyle = dark ? "rgba(255,255,255,0.10)" : "rgba(7,26,44,0.10)";
          ctx.lineWidth = 1;
          ctx.beginPath(); ctx.arc(cx, cy, R, 0, Math.PI*2); ctx.stroke();

          // subtle highlight
          ctx.save();
          ctx.globalCompositeOperation = "screen";
          ctx.fillStyle = dark ? "rgba(255,255,255,0.06)" : "rgba(255,255,255,0.45)";
          ctx.beginPath();
          ctx.ellipse(cx - R*0.22, cy - R*0.28, R*0.46, R*0.30, -0.2, 0, Math.PI*2);
          ctx.fill();
          ctx.restore();
        }

        function drawGraticules(cx, cy, R){
          const dark = (getTheme()==="dark");
          ctx.save();
          ctx.translate(cx, cy);

          ctx.strokeStyle = dark ? "rgba(255,255,255,0.10)" : "rgba(7,26,44,0.09)";
          ctx.lineWidth = 1;

          // latitude lines
          for(let lat=-60; lat<=60; lat+=30){
            const pts = [];
            for(let lon=-180; lon<=180; lon+=6){
              let p = pointFromLatLon(lat, lon);
              p = rotY(p, state.yaw);
              p = rotX(p, state.pitch);
              if(p.z < -0.28) continue;
              const pr = project(p);
              pts.push(pr);
            }
            if(pts.length>2){
              ctx.beginPath();
              ctx.moveTo(pts[0].x*R, pts[0].y*R);
              for(let i=1;i<pts.length;i++) ctx.lineTo(pts[i].x*R, pts[i].y*R);
              ctx.stroke();
            }
          }

          // longitude lines
          for(let lon=-150; lon<=150; lon+=30){
            const pts = [];
            for(let lat=-90; lat<=90; lat+=4){
              let p = pointFromLatLon(lat, lon);
              p = rotY(p, state.yaw);
              p = rotX(p, state.pitch);
              if(p.z < -0.28) continue;
              const pr = project(p);
              pts.push(pr);
            }
            if(pts.length>2){
              ctx.beginPath();
              ctx.moveTo(pts[0].x*R, pts[0].y*R);
              for(let i=1;i<pts.length;i++) ctx.lineTo(pts[i].x*R, pts[i].y*R);
              ctx.stroke();
            }
          }

          ctx.restore();
        }

        function cityScreenPositions(cx, cy, R){
          const out = [];
          for(const c of cities){
            let p = pointFromLatLon(c.lat, c.lon);
            p = rotY(p, state.yaw);
            p = rotX(p, state.pitch);
            const behind = p.z < -0.20;
            const pr = project(p);
            out.push({
              ...c,
              sx: cx + pr.x*R,
              sy: cy + pr.y*R,
              z: p.z,
              vis: !behind,
              scale: pr.s
            });
          }
          // draw back-to-front
          out.sort((a,b)=>a.z-b.z);
          return out;
        }

        function drawCities(cx, cy, R){
          const dark = (getTheme()==="dark");
          const lang = localStorage.getItem("bs_lang")||"en";
          const list = cityScreenPositions(cx, cy, R);

          for(const c of list){
            if(!c.vis) continue;
            const isSel = state.selected.has(c.id);
            const r = 4.2 + (isSel?2.0:0) * clamp(c.scale*1.2, 0.6, 1.3);

            // glow
            ctx.save();
            ctx.globalCompositeOperation = "lighter";
            ctx.beginPath();
            ctx.fillStyle = isSel ? "rgba(200,155,60,0.30)" : "rgba(74,111,165,0.18)";
            ctx.arc(c.sx, c.sy, r*2.2, 0, Math.PI*2);
            ctx.fill();
            ctx.restore();

            // core
            ctx.beginPath();
            ctx.fillStyle = isSel ? "rgba(200,155,60,0.95)" : (dark ? "rgba(255,255,255,0.72)" : "rgba(7,26,44,0.62)");
            ctx.arc(c.sx, c.sy, r, 0, Math.PI*2);
            ctx.fill();

            // ring
            ctx.strokeStyle = isSel ? "rgba(255,79,216,0.40)" : "rgba(255,255,255,0.18)";
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.arc(c.sx, c.sy, r*1.9, 0, Math.PI*2);
            ctx.stroke();

            // tiny label hint for selected (not all, so it stays clean)
            if(isSel){
              ctx.font = "600 11px ui-sans-serif, system-ui";
              ctx.fillStyle = dark ? "rgba(255,255,255,0.78)" : "rgba(7,26,44,0.78)";
              const name = (lang==="mn"?c.mn:c.en);
              ctx.fillText(name, c.sx + 10, c.sy - 10);
            }
          }
        }

        function greatCirclePoints(a, b, steps=60){
          // Interpolate on sphere using slerp
          const A = pointFromLatLon(a.lat, a.lon);
          const B = pointFromLatLon(b.lat, b.lon);
          // dot
          let dot = A.x*B.x + A.y*B.y + A.z*B.z;
          dot = clamp(dot, -1, 1);
          const omega = Math.acos(dot);
          const sinOmega = Math.sin(omega) || 1e-6;
          const pts = [];
          for(let i=0;i<=steps;i++){
            const t = i/steps;
            const s1 = Math.sin((1-t)*omega)/sinOmega;
            const s2 = Math.sin(t*omega)/sinOmega;
            const p = { x:A.x*s1 + B.x*s2, y:A.y*s1 + B.y*s2, z:A.z*s1 + B.z*s2 };
            pts.push(p);
          }
          return pts;
        }

        function drawRoute(cx, cy, R){
          if(!state.route || state.route.length < 2) return;
          const dark = (getTheme()==="dark");

          const map = new Map(cities.map(c=>[c.id,c]));
          const ids = state.route.filter(id=>map.has(id));
          if(ids.length < 2) return;

          ctx.save();
          ctx.translate(0,0);

          // animated dash offset
          const dash = 10;
          const gap = 10;
          const phase = (state.t*70) % (dash+gap);

          for(let i=0;i<ids.length-1;i++){
            const A = map.get(ids[i]);
            const B = map.get(ids[i+1]);
            const pts = greatCirclePoints(A, B, 70);

            // project points with current rotation
            const sp = [];
            for(const pp of pts){
              let p = rotY(pp, state.yaw);
              p = rotX(p, state.pitch);
              if(p.z < -0.26) { sp.push(null); continue; }
              const pr = project(p);
              sp.push({ x: cx + pr.x*R, y: cy + pr.y*R, z:p.z });
            }

            // draw segments (skip behind)
            const grad = ctx.createLinearGradient(cx, cy, cx+R, cy-R);
            grad.addColorStop(0, "rgba(255,79,216,0.70)");
            grad.addColorStop(0.5, "rgba(200,155,60,0.72)");
            grad.addColorStop(1, "rgba(71,230,177,0.65)");

            ctx.lineWidth = 2.4;
            ctx.strokeStyle = grad;
            ctx.setLineDash([dash, gap]);
            ctx.lineDashOffset = -phase;

            ctx.beginPath();
            let started=false;
            for(const p of sp){
              if(!p){ started=false; continue; }
              if(!started){ ctx.moveTo(p.x, p.y); started=true; }
              else ctx.lineTo(p.x, p.y);
            }
            ctx.stroke();

            // glow pass
            ctx.setLineDash([]);
            ctx.globalCompositeOperation = "lighter";
            ctx.lineWidth = 7;
            ctx.strokeStyle = dark ? "rgba(200,155,60,0.10)" : "rgba(7,26,44,0.06)";
            ctx.beginPath();
            started=false;
            for(const p of sp){
              if(!p){ started=false; continue; }
              if(!started){ ctx.moveTo(p.x, p.y); started=true; }
              else ctx.lineTo(p.x, p.y);
            }
            ctx.stroke();
            ctx.globalCompositeOperation = "source-over";
          }

          ctx.restore();
        }

        function draw(){
          ctx.clearRect(0,0,state.w,state.h);
          bg();

          const cx = state.w*0.5;
          const cy = state.h*0.56;
          const R = Math.min(state.w, state.h) * 0.38;

          // auto rotate
          if(state.auto && !state.drag){
            state.vyaw += 0.0008;
          }

          // inertia
          if(!state.drag){
            state.yaw += state.vyaw;
            state.pitch += state.vpitch;
            state.vyaw *= 0.94;
            state.vpitch *= 0.92;
          }

          state.pitch = clamp(state.pitch, -1.05, 1.05);

          // draw globe
          drawSphere(cx, cy, R);
          drawGraticules(cx, cy, R);

          // route then cities
          drawRoute(cx, cy, R);
          drawCities(cx, cy, R);

          state.t += 0.016;
          requestAnimationFrame(draw);
        }

        function pickCity(mx, my){
          const cx = state.w*0.5;
          const cy = state.h*0.56;
          const R = Math.min(state.w, state.h) * 0.38;
          const list = cityScreenPositions(cx, cy, R).filter(c=>c.vis);

          // nearest within radius
          let best=null;
          let bd=9999;
          for(const c of list){
            const dx = mx - c.sx;
            const dy = my - c.sy;
            const d = Math.hypot(dx,dy);
            const hit = 12;
            if(d < hit && d < bd){
              best = c; bd = d;
            }
          }
          return best;
        }

        function getTheme(){
          return localStorage.getItem("bs_theme") || "light";
        }

        // pointer interaction
        canvas.addEventListener("pointerdown",(e)=>{
          canvas.setPointerCapture(e.pointerId);
          state.drag = true;
          state.lx = e.offsetX;
          state.ly = e.offsetY;
        });

        canvas.addEventListener("pointermove",(e)=>{
          const mx = e.offsetX, my = e.offsetY;

          // hover
          const hit = pickCity(mx, my);
          if(hit){
            state.hoverId = hit.id;
            const lang = localStorage.getItem("bs_lang")||"en";
            tip.style.left = mx + "px";
            tip.style.top = my + "px";
            tip.classList.add("show");
            tip.innerHTML = `<b>${lang==="mn"?hit.mn:hit.en}</b><div class="subt">${lang==="mn"?"–î–∞—Ä–∂ –º–∞—Ä—à—Ä—É—Ç–∞–¥ –Ω—ç–º":"Click to add/remove"}</div>`;
          }else{
            state.hoverId = null;
            tip.classList.remove("show");
          }

          if(!state.drag) return;
          const dx = mx - state.lx;
          const dy = my - state.ly;
          state.lx = mx;
          state.ly = my;

          // rotation
          state.yaw += dx * 0.006;
          state.pitch += dy * 0.004;

          state.vyaw = dx * 0.0009;
          state.vpitch = dy * 0.0007;
        });

        function endDrag(){
          state.drag = false;
        }
        canvas.addEventListener("pointerup", endDrag);
        canvas.addEventListener("pointercancel", endDrag);
        canvas.addEventListener("pointerleave", ()=>{ tip.classList.remove("show"); });

        // click to select city, or toggle autorotate
        canvas.addEventListener("click",(e)=>{
          const hit = pickCity(e.offsetX, e.offsetY);
          if(hit){
            toggleCityInLane(hit.id);
            state.selected = new Set(lane);
            return;
          }
          state.auto = !state.auto;
          toast(state.auto ? "Auto-rotate on" : "Auto-rotate off");
        });

        // zoom
        canvas.addEventListener("wheel",(e)=>{
          e.preventDefault();
          const delta = Math.sign(e.deltaY);
          state.zoom = clamp(state.zoom + delta*0.06, 0.85, 1.35);
        }, { passive:false });

        // expose API
        globeApi = {
          setRoute(ids){
            state.route = [...ids];
            state.selected = new Set(ids);
          }
        };

        function globeSetRoute(ids){
          globeApi?.setRoute(ids);
        }
        window.globeSetRoute = globeSetRoute;

        // init sizes
        const ro = new ResizeObserver(()=>resize());
        ro.observe(canvas);
        resize();
        requestAnimationFrame(draw);

        // initial route
        globeApi.setRoute(lane);
      }

      function globeSetRoute(ids){
        // placeholder replaced by initGlobe
      }

      // ---------------- Boot ----------------
      $("#lang-en").addEventListener("click", ()=>setLang("en"));
      $("#lang-mn").addEventListener("click", ()=>setLang("mn"));
      $("#theme-toggle").addEventListener("click", ()=>{
        const cur = localStorage.getItem("bs_theme") || "light";
        setTheme(cur === "dark" ? "light" : "dark");
      });

      initTabs();
      chipGroup("coreChips","coreNote");
      chipGroup("globalChips","globalNote");
      initReveal();
      initButtonMotion();
      initCardTilt();
      initDrawer();
      initRouteBuilder();
      initIncoterms();
      initCBM();
      initGlobe();

      // Load saved settings
      setTheme(localStorage.getItem("bs_theme") || "light");
      const lang = localStorage.getItem("bs_lang") || "en";
      setLang(lang);

      // initial notes
      refreshCoverageNotes(lang);

      // initial lane text
      updateHeroLanePill(lang);

      // hero copy lane
      $("#copyLaneBtn").addEventListener("click", ()=>{
        const l = laneName(localStorage.getItem("bs_lang")||"en", lane);
        navigator.clipboard?.writeText(l).then(()=>toast("Copied")).catch(()=>toast("Copy failed"));
      });
    })();
  </script>
</body>
</html>
